{"version":3,"sources":["queries/stationQuery.js","mutations/stationMutation.js","components/Notifications/Notification.js","components/Notifications/index.js","contexts/NotificationContext.js","components/StationLoginPage.js","queries/shiftReportQuery.js","components/StationReportPage/MenuBar.js","components/ShiftReport/TaskModal.js","components/ShiftReport/TaskInfo.js","components/ShiftReport/GenericTasksPanel.js","components/ShiftReport/AircraftTasksPanel.js","components/ShiftReport/StaffWorkTime.js","components/ShiftReport/index.js","components/StationReportPage/Context.js","components/StationReportPage/stationReducer.js","components/StationReportPage/NewReportForm/FormFields.js","utils/DateHelper.js","components/StationReportPage/NewReportForm/validator.js","components/StationReportPage/NewReportForm/ErrorMessage.js","mutations/timeSheetMutation.js","components/StationReportPage/NewReportForm/StaffEditModel.js","components/StationReportPage/NewReportForm/StaffForm.js","components/StationReportPage/NewReportForm/StaffForms.js","components/StationReportPage/NewReportForm/TaskForm.js","components/StationReportPage/NewReportForm/TaskForms.js","components/StationReportPage/NewReportForm/AircraftSelectionForm.js","components/StationReportPage/NewReportForm/StaffAddModel.js","mutations/submitShiftReport.js","components/StationReportPage/NewReportForm/index.js","mutations/costumerMutation.js","queries/costumerQuey.js","components/ConfirmModal.js","components/CostumerInfo/AddAircraftModal.js","components/CostumerInfo/AddContactModal.js","components/TimeSheetsReport/TimeSheetEditFields.js","components/CostumerInfo/AddStationModal.js","components/CostumerInfo/index.js","components/StationInfo/AssignCostumersModal.js","components/StationInfo/AddMailingListModal.js","components/StationInfo/AddShiftsModal.js","components/StationInfo/ResetStationKeyModal.js","components/StationInfo/Settings.js","components/StationInfo/stationMenu.js","components/StationInfo/Index.js","components/ShiftReportsList/ShiftReportFilter.js","components/ShiftReport/ReportViewModal.js","components/ShiftReportsList/ReportsTable.js","components/ShiftReportsList/index.js","components/StationReportPage/index.js","mutations/staffMutation.js","components/StaffLoginPage.js","queries/timeSheetQuery.js","components/TimeSheetsReport/TimeSheetEditModel.js","components/TimeSheetsReport/TImeSheetRow.js","components/TimeSheetsReport/index.js","components/StaffPage/TimeSheet.js","queries/staffQuery.js","components/TimeSheetsOverview/TimeSheetsFilter.js","components/TimeSheetsOverview/index.js","components/AdminPages/ManageTimeSheets.js","components/StaffPage/PasswordResetPage.js","mutations/permissionMutation.js","components/StaffPage/PermissionManager.js","components/StaffPage/StaffEditModel.js","components/StaffPage/PasswordChangeModel.js","components/StaffPage/Profile.js","components/StaffPage/RegisterPage.js","components/StaffPage/StaffMenuBar.js","components/StaffPage/StaffSubMenu.js","components/StaffPage/index.js","components/AdminPages/NewStaffModal.js","components/AdminPages/AllStaffs.js","components/AdminPages/NewStationModal.js","components/AdminPages/AllStations.js","components/AdminPages/AdminMenuBar.js","components/AdminPages/NewCostumerModal.js","components/AdminPages/Costumers.js","components/AdminPages/index.js","router.js","App.js","index.js"],"names":["ALL_STATION","gql","GET_STATION","LOGIN_TO_STATION","ADD_STATION","ADD_TO_MAILINGLIST","REMOVE_FROM_MAILINGLIST","ADD_SHIFTS","REMOVE_SHIFTS","CHANGE_STATION_KEY","DELETE_STATION","ASSIGN_COSTUMERS","Notification","dispatch","notification","useEffect","timeout","setTimeout","type","payload","id","clearTimeout","Message","success","error","attached","onDismiss","content","Notifications","useContext","NotificationContext","notifications","Segment","basic","style","width","position","zIndex","padding","map","key","createContext","initialState","notificationReducer","state","action","length","filter","n","NotificationProvider","props","useReducer","Provider","value","children","StationLoginPage","history","useHistory","useState","radioButton","setRadioButton","stationKey","setStationKey","remember","setRemember","useQuery","notifyOnNetworkStatusChange","loading","data","useMutation","onError","message","loginStation","loginToStationResult","station","loginToStation","sessionStorage","setItem","JSON","stringify","localStorage","push","event","a","preventDefault","variables","password","storedStationKey","parse","getItem","toggleRemember","Grid","textAlign","height","verticalAlign","Column","maxWidth","Header","as","color","Image","src","Form","size","onSubmit","clearing","stacked","allStations","Field","float","clear","marginRight","Radio","label","location","checked","onChange","radioButtonChange","Input","name","target","fluid","icon","iconPosition","placeholder","Checkbox","onClick","Button","renderPasswordInput","Divider","horizontal","GET_SHIFT_REPORT","GET_REPORTLIST","GET_SHIFTREPORT_ID","MenuBar","activeItem","setActiveItem","confirmOpen","setConfirmOpen","navigatingTo","setNavigatingTo","CurrentDataLossWarning","Confirm","open","cancelButton","confirmButton","header","onCancel","onConfirm","handleMenuClick","e","Menu","inverted","stackable","Item","active","primary","removeItem","TaskModal","task","Modal","onClose","setOpen","Content","taskCategory","Group","Subheader","aircraft","registration","costumer","status","description","updates","update","i","handoverId","viewingOnHanodover","shift","startTime","split","Label","note","TaskInfo","openDetail","setOpenDetail","updateOnthisHandover","_","find","includes","Icon","compact","GenericTaskPanel","genericTasks","legth","block","SegmentGroup","AircraftTaskPanel","aircraftTasks","aircrafts","key_costumerName","tasks","key_aircraft","StaffWorkTime","timesheets","Table","celled","Row","HeaderCell","Body","timesheet","Cell","staff","substring","endTime","ShiftReport","reportData","tasksByCat","groupBy","mapValues","cat","k","chain","AIRCRAFT","taskcat","floated","staffAndTime","tasksByType","key_taskType","Context","lastShiftReport","reducer","DateInputField","useFormikContext","setFieldValue","setFieldTouched","useField","field","meta","touched","popupPosition","dateTimeFormat","closable","onBlur","preserveViewMode","pointing","prompt","TimeInputField","InputField","inputlabel","AircraftCheckBox","display","toggle","marginLeft","toUpperCase","TextAreaField","TextArea","formatDate","dateToFormat","isNaN","findIndex","regex","match","splitT","date","time","dateSplit","timeSplit","Date","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","operateDate","duration","unit","operation","ndate","isNumber","splitDateTime","splitDate","newDate","toDate","stringDate","getWeekNumber","dt","tdt","valueOf","dayn","getDay","setDate","firstThursday","setMonth","Math","ceil","getDatefromWeek","w","y","simpleStartDate","UTC","dayOfWeek","IsoWeekStart","getMonthName","monthInt","Proxy","get","prop","parseInt","getMonthOptions","currentMonth","Array","v","text","getWeekOptions","today","dYear","lastYearWeekNum","lastRetriveable","options","week","option","getFilterYear","filterBy","number","year","currentWeek","validateStaffInputField","validateStartEndTime","startDate","now","validateTaskField","trim","validateEmail","email","validateName","ErrorMessage","form","getIn","errors","SIGN_OFF_SHIFT","UPDATE_TIMESHEET","APPROVE_TIMESHEET","DELETE_TIMESHEET","REQUEST_CLARIFICATION","StaffEditModel","fieldName","removeClick","removeStaff","setRemoveStaff","getFieldMeta","signOff","shiftStartTime","shiftEndTime","ibreakt","notifyResult","setNotifyResult","username","setUsername","setPassword","setStartTime","setEndTime","breakt","setBreakt","signOffTimeSheet","submit","values","signOffData","break","additionalAction","Dimmer","Loader","closeIcon","closeOnEscape","closeOnDimmerClick","onOpen","enableReinitialize","initialValues","fullname","resetEmail","validate","handleSubmit","maxDate","minDate","labelPosition","min","columns","vertical","StaffForm","index","remove","signOffKey","readOnly","changing","circular","staffs","StaffForms","addStaffOpen","replace","TaskForm","onRemove","disabled","getFieldProps","noteFieldVisibile","setNoteFieldVisibile","taskAction","taskStatus","taskNotes","actionButtonClick","toggleNotes","notes","TaskStatusBar","prevShiftLabel","notesLabel","marginBottom","rows","visibility","removeButtonClick","actionCloseCheckBoxClick","actionOpenCheckBoxClick","actionDeferCheckBoxClick","margin","backgroundColor","link","positive","Or","negative","hidden","paddingBotton","TaskForms","tasksIdentifier","aircraftId","newTaskField","AircraftSelectionForm","costumers","setCheckedAircrafts","checkedAircrafts","StaffAddModel","registerUserOpen","setRegisterUserOpen","forgotPasswordOpen","setForgotPasswordOpen","addedStaff","emailError","usernameError","FormField","warning","visible","FormGroup","SUBMIT_REPORT","NewReportForm","context","openAddStaffModel","setOpenAddStaffModel","setCostumers","initialFields","setInitialFields","store","result","getShiftReport","submitShiftReport","writeQuery","query","flag","onCompleted","submitReport","getShiftName","sdt","shifts","reduce","p","c","splitSt","st","setHours","setMinutes","diff","list","taskList","costumerList","simplifiedTask","newNote","disbleCheck","matchesProperty","staffErrors","errList","isEmpty","mapKeys","validateStaffsField","taskErrors","typedTasks","pickBy","identity","validateTasks","submitData","formdata","updatedTasks","tasksByIdentifier","identifier","initialTask","difference","Object","keys","reducedTask","beforeSubmit","submitCount","OTHER","LOGISTICS","tertiary","ADD_COSTUMER","ADD_AIRCRFAT","ADD_CONTACT","ADD_STATION_TO_COSTUMER","REMOVE_AIRCRFAT","REMOVE_CONTACT","REMOVE_COSTUMER_FROM_STATION","DELETE_COSTUMER","ALL_COSTUMERS","VERIFY_REGISTRATION","GET_COSTUMER","ConfirmModal","confirm","title","Actions","fn","AddAircraftModal","useLazyQuery","checkAircraftRegistration","duplicateError","setDuplicateError","verifyAircraftRegistration","addAircrafts","modify","fields","existingAircraftRefs","readField","newAircraftRefs","forEach","some","ref","writeFragment","fragment","onerror","err","errAircraft","registrations","AddContactModal","addContact","keyContacts","existingContactsRefs","newContactRefs","contact","addContacts","phone","widths","marginTop","RemarkField","remarkTitle","remarkDate","remarkBy","remarkText","remarkEdit","List","val","fontStyle","textDecoration","DropDownField","labeled","input","Dropdown","borderTopLeftRadius","borderBottomLeftRadius","AddStationModal","stationOptions","setStationOptions","loadStations","stationLoading","stationData","existingStationIds","stations","addStationsToCostumer","existingCostumerRefs","addStation","dirty","search","selection","multiple","onFocus","CostumerInfo","costumerData","costumerId","setData","addStationModalOpen","setAddStationModalOpen","addAircraftModalOpen","setAddAircraftModalOpen","addContactModalOpen","setAddContactModalOpen","params","useParams","skip","costumerLoading","costumerError","fetchedData","removeFromStation","evict","goBack","deleteCostumer","removeContact","removeAircraftMut","removeCostumerFromStation","costumersRef","existingStationRefs","stationsRef","then","res","setConfirm","confirmModalOpen","setConfirmModalOpen","getCostumer","padded","permission","admin","floating","removeAircraft","edit","stationId","removeContactFromStation","Footer","address","city","country","Flag","toLowerCase","_id","AssignCostumersModal","setCostumerList","loadCostumers","allCostumers","currentCostumers","costumerOptions","assignCostumers","existingStationsRefs","response","addCostumers","AddMailingListModal","emails","setEmails","mailingList","existingAddresses","newEmails","errEmail","AddShiftsModal","addShifts","existingShiftsRefs","newShiftRefs","ResetStationKeyModal","changekey","ModalHeader","ModalContent","newKey","confirmKey","Settings","loggedInStaff","addShiftsModalOpen","setAddShiftsModalOpen","addMailingListModalOpen","setAddMailingListModalOpen","resetStationKeyModalOpen","setResetStationKeyModalOpen","setStationData","getStation","deleteStation","deleteFromMailingList","deleteShift","collapsing","existingEmails","item","deleteFromMailingMutation","shiftName","StationMenu","setActiveCostumer","useLocation","page","aar","pathname","path","splice","navigatePath","secondary","StationInfo","activeCostumer","assignCostumerModalOpen","setAssignCostumerModalOpen","locationPaths","getBreadCrumbLink","arr","Breadcrumb","BreadcrumbSection","Link","to","BreadcrumbDivider","street","postcode","staffList","view","lastActive","activeAt","Card","raised","contract","extra","ShiftReportFilter","setFilter","loggedInStation","setFilterBy","setNumber","setStations","stOpt","ReportViewModal","openReport","setOpenReport","getReport","onMount","ReportsTable","transformedData","setTransformedData","transformingData","getReportList","report","striped","structured","entries","reports","rowSpan","ShiftReportsList","slectBy","StationReportPage","notificationDispatch","queryParams","errorReport","loadingReport","dataReport","dataStation","LOGIN_STAFF","RESET_PASSWORD","RESET_REGISTER_CODE","RESET_PASSWORD_REQ","CHANGE_PASSWORD","STAFF_EDIT","STAFF_ADD","SET_STAFF_STATUS","DELETE_STAFF","COMPLETE_REGISTRATION","StaffLoginPage","login","staffLogin","handleLogin","storedStaffKey","GET_TIMESHEETS","GET_ALL_TIMESHEETS","TimeSheetEditModel","self","add","shiftReportLoading","shiftReportData","closeModel","updateTimeSheet","updateTimeSheetLoading","newRemarkField","setNewRemarkField","selfHasPermissionToAddEdit","sign","staffId","getShiftList","handleShiftChange","ISODate","toISOString","vars","getShiftReportByShift","handover","remarks","getTimeSheetByUser","existingTimeSheetRefs","newTimeSheet","addToTimeSheet","getAllTimeSheets","period","cloneDeep","totHours","toFixed","itemsPending","parseFloat","broadcast","modalHeader","init","by","getInitValues","insertAt","newRemarks","autoAddRemarks","placholder","getRecomendedShiftOption","remark","TimeSheetRow","timeSheet","shiftReport","totalHours","total","ot","overTime","setAdd","deleteOpen","setDeleteOpen","clarifyOpen","setClarifyOpen","clarifyText","setClarifyText","approveTimesheet","timesheetSignLoading","mutatedeleteTimesheet","deleteLoading","requestClarification","clarifyLoading","isEmptyRow","isWeekDay","href","Popup","trigger","approved","approveTimeSheet","wide","clearify","askToclarify","on","deleteTimeSheet","TimeSheetsReport","shiftDate","endDate","calenderArray","day","calenderObject","zipObject","netTotal","netOt","formatData","timeSheets","totalDaily","reqHours","stickyTh","top","colSpan","TimeSheet","setStaffName","selected","timesheetOnly","selectedYear","selectBy","setSelectBy","filterDuration","getStaffName","start","sdate","filterStartDate","end","ed","sd","filterEndDate","isAllApproved","GET_STAFF","GET_STAFF_REG","GET_ALL_STAFF_MINIMAL","GET_ALL_STAFF","VERIFY_USERNAME","TimeSheetsFilter","setStaff","setPeriod","setGroupBy","from","setFrom","setTo","basePage","filterStatus","setFilterStatus","staffOptions","setStaffOptions","getAllStations","getAllStaffs","staffLoading","staffData","staffOpt","allStaff","clearable","dateFormat","TimeSheetsOverview","periodTitle","month","TableHeader","TableRow","TableHeaderCell","TableBody","TableCell","ManageTimeSheets","setName","staffName","Section","PasswordResetPage","resetPassword","resetCode","confirmPassword","CHANGE_PERMISSION","PermissionManager","permissions","setOptions","superUserSet","setSuperUserSet","hasSuperPermission","updatePermission","pLoading","mapPermission","permssionType","hasPermission","mod","getStationOptions","soptions","allStationIds","formValues","prev","cur","scope","isEqual","pType","resetForm","className","newViewValues","Set","updateStaff","updateStaffLoading","initVal","contractType","contractHours","test","updatedValues","omitBy","PasswordChangeModel","changePassword","newPassword","Profile","handleCancel","handleConfirm","passwordChangeOpen","setPasswordChangeOpen","withPermission","staffCanEdit","rpLoading","resetRegisterCode","rcLoading","resetConfirm","getStaff","registered","registerCode","centered","idCardCode","editModelOpen","setEditModelOpen","RegisterPage","completeRegistration","regstrationLoading","registrationData","validateUsernameQuery","usernameLoading","usernameData","verified","usernameVerified","setUsernameVerified","verifyUsername","registerStaff","handleChange","handleBlur","undefined","currentTarget","StaffMenuBar","menuItems","StaffSubMenu","loggedInStaffPermissions","StaffPage","subMenuActiveItem","setSubMenuActiveItem","loggedInStaffName","setLoggedInStaffName","staffHasMangeRights","toLocaleLowerCase","NewStaffModel","addStaffMutation","existingStaffRefs","newStaff","addStaff","AllStaffs","staffsData","setStaffsData","staffAddOpen","setStaffAddOpen","loggedInstaff","deleteStaff","toggleStaffStatus","filterData","accountStatus","NewStationModel","addStationMutation","countryList","setCountryList","fetch","json","countries","countryArray","alpha2Code","fetchCountries","stationKeyConfirm","newStation","autoComplete","paddingTop","AllStations","detailed","stationsData","setStationsData","stationAddOpen","setStationAddOpen","activeStaffs","AdminMenuBar","permisison","NewCostumerModel","addCostumerMutation","aircraftCheckLoading","aircraftCheckData","duplicateAircraftError","setDuplicateAircraftError","addCostumer","existingCostumersRefs","newCostumerRef","Costumers","costumerAddOpen","setCostumerAddOpen","AdminPages","AppRouter","App","authLink","setContext","headers","token","authorization","httpLink","HttpLink","uri","window","client","ApolloClient","cache","InMemoryCache","concat","ReactDOM","render","Container","document","getElementById"],"mappings":"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","file":"static/js/main.1b61444f.chunk.js","sourcesContent":["import { gql } from '@apollo/client'\nexport const ALL_STATION = gql`\n query ($detailed: Boolean = false ){\n  allStations (detailed: $detailed){\n    id\n    location\n    shifts @skip(if: $detailed){\n      name\n      startTime\n    }\n    address @include(if: $detailed){\n      country\n      postcode\n      city\n      street\n    }\n    phone @include(if: $detailed)\n    email @include(if: $detailed)\n    activeStaffs @include(if: $detailed)\n    \n  }\n}`\n\nexport const GET_STATION = gql`\n  query fetchStation($id: String!){\n    getStation(id: $id) {\n      costumers {\n        contract\n        aircrafts {\n          id\n          registration\n        }\n        name\n        id\n      }\n      shifts {\n        id\n        name\n        startTime\n      }\n      location\n      id\n      address {\n        country\n        postcode\n        city\n        street\n      }\n      phone\n      email\n      staffList{\n        id\n        name\n        lastActive{\n          activeAt\n        }\n      }\n      procedures{\n        title\n        description\n      }\n      mailingList\n\n    }\n  }\n\n`","import { gql } from '@apollo/client'\nexport const LOGIN_TO_STATION = gql`\n  mutation stationLogin($id: String!, $password:String!){\n    loginToStation(id: $id, password: $password) \n  }\n`\n\nexport const ADD_STATION = gql`\n  mutation addStation ($location:String! , $address: AddressInput! , $phone: String! ,$email: String!, $shifts: [ShiftInfoInput!]!, $costumers: [String], $stationKey:String! ){\n    addStation(\n      location:$location\n      address:$address\n      phone:$phone\n      email:$email\n      shifts:$shifts\n      costumers:$costumers\n      stationKey: $stationKey\n    ){\n      id\n    }\n  }`\n\nexport const ADD_TO_MAILINGLIST = gql` mutation addToMailingList($emails:[String!]! , $stationId: String!){\n    addToMailingList(\n      email: $emails\n      stationId: $stationId\n    ){\n      status\n      message\n    }\n  }\n\n  `\n\nexport const REMOVE_FROM_MAILINGLIST = gql`mutation removeFromMailingList($email:String! , $stationId: String!){\n    removeFromMailingList(\n      email: $email\n      stationId: $stationId\n    ){\n      status\n      message\n    }\n  }`\nexport const ADD_SHIFTS= gql`mutation addShifts($shifts:[ShiftInfoInput!]!, $stationId: String!){\n    addShifts(\n      shifts:$shifts\n      stationId: $stationId\n    ) {\n      id\n      name\n      startTime\n    }\n  }`\n\nexport const REMOVE_SHIFTS = gql` mutation removeShift( $id:String! ,$stationId: String!){\n    removeShift(\n      id:$id\n      stationId: $stationId\n    ){\n      status\n      message\n    }\n  }\n  `\n\nexport const CHANGE_STATION_KEY = gql`mutation changeStationKey(\n    $stationKey:String!\n    $stationId: String!\n  ){\n    changeStationKey(\n      stationKey: $stationKey\n      stationId: $stationId\n    ){\n     status\n      message\n    }\n  }\n\n  `\n\nexport const DELETE_STATION = gql`mutation deleteStation ( $stationId: String!){\n    deleteStation( stationId: $stationId){\n      status\n      message\n    }\n\n  }\n\n  `\n\nexport const ASSIGN_COSTUMERS = gql`mutation  assignCostumers( $stationId: String! $costumers:[String!]!){\n    assignCostumers(\n      stationId: $stationId,\n      costumers: $costumers\n    ){\n      id\n      costumers {\n        id\n        name\n        contract\n        aircrafts{\n        id\n      }\n    }\n    }\n  }\n\n \n`","import React, { useEffect } from 'react'\nimport { Message } from 'semantic-ui-react'\n\nconst Notification  = ({ dispatch , notification }) => {\n  useEffect(() => {\n    const timeout = setTimeout(() => {\n      dispatch({ type: 'REMOVE_NOTIFICATION' , payload: { id: notification.id } })\n    },5000)\n    return () => {\n      clearTimeout(timeout)}\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[])\n\n  return (\n    <Message\n      success = {notification.type === 'SUCCESS'}\n      error={notification.type === 'ERROR'}\n      attached\n      onDismiss = {() => dispatch({ type: 'REMOVE_NOTIFICATION' , payload: { id: notification.id } })}\n    >\n      {notification.content}\n    </Message>\n  )\n}\n\nexport default Notification","import React, { useContext } from 'react'\nimport { Segment } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport Notification from './Notification'\n\nconst Notifications = () => {\n  const [notifications,dispatch] = useContext(NotificationContext)\n  return (\n    <Segment basic  style={{\n      width: 'inherit',\n      position: 'fixed',\n      zIndex: 1000,\n      padding:0\n    }}>\n      {notifications.map(notification =>\n        <Notification key={notification.id} notification= {notification} dispatch= {dispatch} ></Notification>\n      )}\n    </Segment>\n\n  )\n}\n\nexport default Notifications","import React, { createContext, useReducer } from 'react'\nimport Notifications from '../components/Notifications'\n\nexport const NotificationContext = createContext()\n\nconst initialState = []\n\nexport const ADD_NOTIFICATION = 'ADD_NOTIFICATION'\nexport const REMOVE_NOTIFICATION = 'REMOVE_NOTIFICATION'\n\n\nexport const notificationReducer = (state ,action) => {\n  switch (action.type){\n  case ADD_NOTIFICATION:\n    return [\n      ...state, {\n        id: state.length +1,\n        content : action.payload.content,\n        type: action.payload.type\n      }\n    ]\n  case REMOVE_NOTIFICATION:\n\n    return state.filter (n => n.id !== action.payload.id)\n\n  default:\n    return state\n  }\n}\n\nexport const NotificationProvider = props => {\n  const notifications = useReducer (notificationReducer, initialState)\n  return (\n    <NotificationContext.Provider value = {notifications}>\n      <Notifications/>\n      {props.children}\n    </NotificationContext.Provider>\n  )\n}","import React, { useState,useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useQuery, useMutation } from '@apollo/client'\nimport { Button, Form, Radio, Grid, Header, Image, Segment, Divider } from 'semantic-ui-react'\nimport { ALL_STATION } from '../queries/stationQuery'\nimport { LOGIN_TO_STATION } from '../mutations/stationMutation'\nimport { NotificationContext } from '../contexts/NotificationContext'\n\n\nconst StationLoginPage = () => {\n  const[,dispatch] = useContext(NotificationContext)\n  const history = useHistory()\n  const [radioButton, setRadioButton] = useState({})\n  const [stationKey,setStationKey]= useState('')\n  const [remember, setRemember] = useState(false)\n  const { loading, data } =  useQuery(ALL_STATION,{ notifyOnNetworkStatusChange: true })\n\n  /**\n   * loginStation mutation hook\n   */\n  const [loginStation,loginToStationResult] = useMutation(LOGIN_TO_STATION,{\n    onError: (error) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, Cannot Login'}<br/> {error.message}</> ,type: 'ERROR' } })\n\n    }\n  })\n\n  /**\n   * side effect when the loginStation mutation is executed and loginToStationResult is set\n   */\n  useEffect(() => {\n    if ( loginToStationResult.data ) {\n      const station = loginToStationResult.data.loginToStation\n      setStationKey(station)\n      sessionStorage.setItem('stationKey',JSON.stringify(station))\n      //If remember button is checked store key in local storage\n      if(remember){\n        localStorage.setItem('stationKey',JSON.stringify(station))\n      }\n      history.push(`/shiftReport/station/${radioButton.value}`)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loginToStationResult.data])\n\n  /**\n   * function for station loginStation action\n   * @param {event} event submit button event\n   */\n  const loginToStation = async (event) => {\n    event.preventDefault()\n    loginStation({ variables:{ id:radioButton.value, password: stationKey } })\n\n  }\n\n  /**\n   * If stationKey is found on localStorage/sessionStorage skip the loginStation and browse shift report\n   */\n  let storedStationKey = JSON.parse(sessionStorage.getItem('stationKey'))\n  if(!storedStationKey){\n    const key = localStorage.getItem('stationKey')\n    storedStationKey = JSON.parse(key)\n    /**\n     * store the key to session storage*\n     */\n    sessionStorage.setItem('stationKey',JSON.stringify(key))\n  }\n  if(storedStationKey){\n    history.push(`/shiftReport/station/${storedStationKey.id}`)\n  }\n\n  /**\n   * remeber checkbox toggle action\n   */\n  const toggleRemember = () => {\n    if (remember) {\n      setRemember(false)\n    }else {\n      setRemember(true)\n    }\n  }\n\n  /**\n   * Renders station password input filed\n   * @param {radioButton DOM} radioButton\n   * @returns {Component} password input field\n   */\n\n  const renderPasswordInput = (radioButton) => {\n    return (\n      <>\n        <Form.Input\n          name= 'stationKey'\n          value={stationKey}\n          onChange= {({ target }) => setStationKey(target.value)}\n\n          label= {`Enter password for ${radioButton.label}`}\n          fluid\n          icon='lock'\n          iconPosition='left'\n          placeholder='Password'\n          type='password'\n\n\n        />\n        <Form.Checkbox name=\"rememberKey\" label='Remember on this computer' checked={remember} onClick = {toggleRemember}/>\n        <Button fluid size='large' color=\"blue\">Retrieve Shift Report</ Button>\n      </>)\n\n  }\n  /**\n   * Radiobutton change action\n   * @param {event} event\n   * @param {DOM {value, label}} value,label\n   *\n   */\n  const radioButtonChange = (event,{ value,label }) => {\n    setRadioButton({ value,label })\n  }\n\n  /**If Login mutation error\n  if (error) return `Error! ${error}` */\n\n\n  return (\n\n    <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as='h2' color='blue' textAlign='center'>\n          <Image src='/LogoMin.png' /> Please select a station\n        </Header>\n        <Form size='large' style={{ textAlign:'left' } } onSubmit={loginToStation}>\n          <Segment clearing stacked>\n            {  loading &&\n             <Segment loading basic>\n             </Segment>\n            }\n\n            {!loading && data.allStations && data.allStations.map(station =>  <Form.Field style={{ float: 'left', clear:'none',  marginRight:'10px' }} key={station.id}>\n              <Radio  label={station.location} value={station.id} checked={ radioButton.value === station.id} onChange={(event,value) => radioButtonChange(event,value)}>\n              </Radio>\n            </Form.Field>)}\n\n            <div style={{ clear:'both' }}></div>\n\n            {radioButton.value && renderPasswordInput(radioButton)\n            }\n\n\n          </Segment>\n        </Form>\n        <Divider horizontal>Or</Divider>\n        <Segment clearing stacked>\n          <Button content='Log in to personal page' icon='user'  size='large' color=\"teal\" fluid onClick = {() => history.push('/staffLogin')} />\n        </Segment>\n\n      </Grid.Column>\n\n    </Grid>\n\n\n  )\n\n\n}\n\nexport default StationLoginPage","import { gql } from '@apollo/client'\n\nexport const GET_SHIFT_REPORT = gql `\nquery fetchReport($id:String, $station: String, $flag: String){\n    getShiftReport(id: $id, station: $station, flag: $flag) {\n      endTime\n      id\n      shift\n      staffAndTime {\n        id\n        staff {\n          name\n        }\n        endTime\n        startTime\n      }\n      startTime\n      station {\n        location\n        id\n      }\n      tasks {\n        id\n        aircraft {\n          registration\n          id\n          costumer {\n            name\n          }\n        }\n        taskCategory\n        description\n        status\n        updates {\n          action\n          handoverId {\n            startTime\n            id\n            shift\n            station{\n              location\n            }\n          }\n          note\n        }\n        \n      }\n    } \n}\n\n`\n\nexport const GET_REPORTLIST = gql ` \n  query fetchReportList ( $stations: [String!]!, $filterBy: String!, $year:Int! , $number:Int!  ){\n    getReportList (stations: $stations, filterBy: $filterBy, year: $year , number:$number){\n      startTime,\n      endTime,\n      id,\n      shift\n      station{\n        location\n      }\n    }\n  }\n\n\n`\n\nexport const GET_SHIFTREPORT_ID = gql `\n  query fetchReportbyShift($station: String!, $shift: String!, $date: Date!){\n    getShiftReportByShift(station: $station, shift: $shift, date: $date) {\n      startTime,\n      endTime,\n      id,\n      shift,\n      station{\n        location\n      }\n    }\n  }\n`\n/** */","import React, { useState } from 'react'\nimport { Button, Confirm, Menu } from 'semantic-ui-react'\nimport { useHistory } from 'react-router-dom'\n\n\nconst MenuBar = ({ activeItem, setActiveItem }) => {\n  const history = useHistory()\n  const [confirmOpen,setConfirmOpen] = useState(false)\n\n  const [navigatingTo, setNavigatingTo] = useState('')\n\n  const CurrentDataLossWarning = () => {\n    return (\n      <Confirm\n        open = {confirmOpen}\n        cancelButton = 'I understand that all reporting will be lost, Continue'\n        confirmButton ='Cancel and Continue Reporting'\n        header='Are You sure?'\n        content= 'You are navigationg away from from the reporting page, doing so will result in losing all the inputs on the report page. Do you want to continue?'\n        onCancel = {() => {\n          setActiveItem(navigatingTo)\n          setConfirmOpen(false)\n        }}\n\n        onConfirm= {() => {\n          setConfirmOpen(false)\n        }}\n      >\n      </Confirm>\n\n    )\n\n  }\n  const handleMenuClick = (e, { name }) => {\n\n    if(activeItem === 'startNewReport'){\n      setNavigatingTo(name)\n      setConfirmOpen(true)\n      return\n    }\n\n    setActiveItem( name )\n    //history.push(activeItem)\n  }\n\n  const switchStation = () => {\n    localStorage.removeItem('stationKey')\n    sessionStorage.removeItem('stationKey')\n    history.push('/')\n  }\n\n  return (\n    <>\n      <Menu inverted color=\"blue\" stackable >\n        <Menu.Item header>  Shift Reporting System </Menu.Item>\n        <Menu.Item name= \"lastShiftReport\"\n          active = {activeItem === 'lastShiftReport'}\n          onClick = {handleMenuClick}>\n        </Menu.Item>\n\n        <Menu.Item name= \"browseAllReports\"\n          active = {activeItem === 'browseAllReports'}\n          onClick = {handleMenuClick}>\n        </Menu.Item>\n\n        <Menu.Item name= \"startNewReport\"\n          active = {activeItem === 'startNewReport'}\n          onClick = {handleMenuClick}>\n        </Menu.Item>\n\n        <Menu.Item name= \"stationInfo\"\n          active = {activeItem === 'stationInfo'}\n          onClick = {handleMenuClick}>\n        </Menu.Item>\n\n        { /* Will be implemented on future\n       <Menu.Item name= \"allOpenTasks\"\n          active = {activeItem === 'allOpenTasks'}\n          onClick = {handleMenuClick}>\n  </Menu.Item>*/}\n\n        <Menu.Menu position='right'>\n          <Button primary\n            name='Switch Station '\n            active={activeItem === 'logout'}\n            onClick={switchStation}\n          >Switch Station</Button>\n        </Menu.Menu>\n      </Menu>\n      <CurrentDataLossWarning/>\n    </>\n\n\n\n\n  )\n\n\n}\n\nexport default MenuBar","import React from 'react'\nimport { Header, Label, Modal, Segment } from 'semantic-ui-react'\n\nconst TaskModal = (props) => {\n  const task = props.task\n  return (\n    <Modal\n      open = {props.open }\n      onClose= {() => props.setOpen(false)}\n    >\n      <Modal.Header> Task Details </Modal.Header>\n      <Modal.Content>\n        { task.taskCategory ==='AIRCRAFT' &&\n          <Segment.Group horizontal>\n            <Segment basic attached='top'as ={Header}>Aircraft<Header.Subheader>{task.aircraft.registration}</Header.Subheader></Segment>\n            <Segment basic attached='bottom' as ={Header}>Costumer<Header.Subheader>{task.aircraft.costumer.name}</Header.Subheader></Segment>\n          </Segment.Group>\n        }\n\n        <Segment >\n          <Header as ='h3'>Status</Header>\n          <p>{task.status}</p>\n        </Segment>\n\n        <Segment >\n          <Header as ='h3'>Description</Header>\n          <p>{task.description}</p>\n        </Segment>\n\n\n        <Segment >\n          <Header as ='h3'>Action History</Header>\n          <Segment.Group>\n            {task.updates.map((update,i) =>\n              <Segment clearing key={i}\n                color={update.handoverId.id === props.viewingOnHanodover || (!props.viewingOnHanodover && task.updates.length-1 === i ) ?'green':'grey'}\n              >\n                <Header as='h5'>{update.action}<Header.Subheader>{update.handoverId.station.location} {update.handoverId.shift} shift {update.handoverId.startTime.split(' ')[0]}</Header.Subheader></Header>\n                {update.handoverId.id === props.viewingOnHanodover &&\n                <Label color='green' attached='top right'> Currently Viewing this Report</Label>}\n\n                {!props.viewingOnHanodover && task.updates.length-1 === i &&\n                 <Label color='green' attached='top right'> Last Action Performed</Label>\n                }\n\n                {update.note}\n              </Segment>\n\n\n            )}\n          </Segment.Group>\n\n\n        </Segment>\n        {/*NOT IMPLEMENTED ON THIS REVISION\n        <Segment basic floated='right'>\n          <Button primary >Add Notes </Button>\n          <Button positive>Close Task </Button>\n          <Button negative>Defer Task </Button>\n            </Segment>*/}\n      </Modal.Content>\n    </Modal>\n  )\n\n}\n\nexport default TaskModal","import React, { useState } from 'react'\nimport { Segment,Label,Icon } from 'semantic-ui-react'\nimport _ from 'lodash'\nimport TaskModal from './TaskModal'\n\nconst TaskInfo = ({ task , handoverId }) => {\n  const [openDetail, setOpenDetail] = useState(false)\n  const updateOnthisHandover = _.find(task.updates, ['handoverId',{ 'id':handoverId }] )\n  return (<>\n    <Segment >\n      {\n        !updateOnthisHandover.action.includes('TASK_CREATED') &&\n        <Label  size='mini' basic>Tasks from previous shifts</Label>\n      }\n      {/*\n        updateOnthisHandover.action.includes('TASK_CREATED') &&\n        <Label circular size='mini' color = 'teal' basic>New</Label>*/\n      }\n\n      {\n        (updateOnthisHandover.action ==='DEFERRED' ||  updateOnthisHandover.action ==='TASK_CREATED_DEFERRED')&&\n        <><Label size='mini' color='red' basic> Deferred </Label>\n          <Label color='red'size='mini' basic> Action Required </Label>\n        </>\n      }\n      {\n        /**If task is  not created on last report this task is older open task that was completed on last shift */\n        updateOnthisHandover.action ==='CLOSED' &&\n       <Label color='green' size='mini' basic> Completed </Label>\n      }\n      {\n        /**If open task and some action was performed on the last shift */\n        task.status ==='OPEN' && updateOnthisHandover &&\n        <>{\n          !updateOnthisHandover.action.includes('TASK_CREATED') &&\n          <Label size='mini' basic> {updateOnthisHandover.action} </Label>\n        }\n        <Label color='purple'size='mini' basic> Open </Label></>\n      }\n\n      { /** If task is not new then show toggle update history button */\n        !updateOnthisHandover.action.includes('TASK_CREATED') && task.updates.length > 1 &&\n      <Label as=\"a\" size='mini' onClick = {() => {\n        setOpenDetail(true)\n      }}> <Icon name =\"history\"/> Action History   </Label>\n      }\n\n      <Segment style= {{ 'paddingTop': 0,'paddingLeft': 0 }}basic compact>{task.description}   </Segment>\n\n\n    </Segment>\n    { openDetail &&\n      <TaskModal open= {openDetail} setOpen = {setOpenDetail} task= {task} viewingOnHanodover = {handoverId}> </TaskModal>\n    }\n  </>)\n}\n\nexport default TaskInfo","import React from 'react'\nimport { Segment, Header, SegmentGroup } from 'semantic-ui-react'\nimport TaskInfo from './TaskInfo'\nimport  _ from  'lodash'\n\nconst GenericTaskPanel = ({ genericTasks,handoverId }) => {\n  if(genericTasks.legth === 0){\n    return null\n  }\n  return (\n    <>\n      <Segment stacked>\n\n        <Header color = \"blue\" as=\"h4\" block> {genericTasks[0].taskCategory} </Header>\n\n        <SegmentGroup >\n          { _.map(genericTasks,task =>\n            <TaskInfo key={task.id} task ={task} handoverId = {handoverId}/>\n          )}\n\n        </SegmentGroup>\n      </Segment>\n\n\n    </>\n\n  )\n}\n\nexport default  GenericTaskPanel","import React from 'react'\nimport { Segment, Header, SegmentGroup ,Icon } from 'semantic-ui-react'\nimport TaskInfo from './TaskInfo'\nimport  _ from  'lodash'\n\nconst AircraftTaskPanel = ({ aircraftTasks ,handoverId }) => {\n  if(aircraftTasks.legth === 0){\n    return null\n  }\n  return (\n\n    <Segment stacked>\n      {_.map(aircraftTasks,(aircrafts,key_costumerName) =>\n        <SegmentGroup   key ={key_costumerName}>\n\n          <Header color = \"blue\" as=\"h4\" block  > <Icon name = 'plane'/> Work Performed for {key_costumerName}</Header>\n\n\n          { _.map(aircrafts,((tasks,key_aircraft) =>\n            <SegmentGroup key={key_aircraft}>\n              <Segment  >\n                {key_aircraft}\n              </Segment>\n              {_.map(tasks,task =>\n                <TaskInfo key={task.id} task ={task} handoverId={handoverId}/>\n              )}\n\n            </SegmentGroup>))\n          }\n\n        </SegmentGroup>\n\n\n\n      )\n      }</Segment>\n  )\n}\n\nexport default AircraftTaskPanel","import React from 'react'\nimport { Segment, Table } from 'semantic-ui-react'\n\nconst StaffWorkTime = ({ timesheets }) => {\n  return(\n    <Segment>\n      <Table celled >\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Staff</Table.HeaderCell>\n            <Table.HeaderCell>Start Time</Table.HeaderCell>\n            <Table.HeaderCell>End TIme</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {timesheets.map(timesheet =>\n            <Table.Row key={timesheet.id}>\n              <Table.Cell>{timesheet.staff.name}</Table.Cell>\n              <Table.Cell>{timesheet.startTime.substring(10)}</Table.Cell>\n              <Table.Cell>{timesheet.endTime.substring(10)}</Table.Cell>\n            </Table.Row>\n          )}\n        </Table.Body>\n\n      </Table>\n\n    </Segment>\n\n  )\n\n}\n\nexport default StaffWorkTime","import React from 'react'\nimport GenericTaskPanel from './GenericTasksPanel'\nimport AircraftTaskPanel from './AircraftTasksPanel'\nimport { SegmentGroup, Segment, Header } from 'semantic-ui-react'\nimport _ from 'lodash'\nimport StaffWorkTime from './StaffWorkTime'\n\n\nconst ShiftReport = ({ reportData }) => {\n\n  if(!reportData){\n    return<Segment>No reports found</Segment>\n  }\n  const tasksByCat = _.groupBy(reportData.tasks, task => task.taskCategory)\n  const tasks = _.mapValues(\n    tasksByCat,(cat,k) =>\n      k === 'AIRCRAFT'?\n        _.chain(tasksByCat.AIRCRAFT)\n          .groupBy(taskcat  =>  taskcat.aircraft.costumer.name)\n          .mapValues( costumer => {\n            return(_.groupBy(costumer, task => task.aircraft.registration))\n          })\n          .value()\n        :cat\n  )\n\n\n  return (\n    <SegmentGroup>\n      <Segment basic clearing>\n        <Header floated =\"left\"> Shift Report from {reportData.shift} shift <span><h5>({reportData.startTime.substring(10)} - {reportData.endTime.substring(10)})</h5></span></Header>\n        <Header floated =\"right\" as=\"h5\">  {reportData.startTime.substring(10,0)}<span><br/>{reportData.station.location}</span> </Header>\n      </Segment>\n\n      <StaffWorkTime timesheets = {reportData.staffAndTime} />\n\n      {_.map(tasks, (tasksByType,key_taskType) => {\n        if(key_taskType === 'AIRCRAFT') return (\n          <AircraftTaskPanel key={key_taskType} aircraftTasks={ tasksByType} handoverId= {reportData.id}/>\n\n        )\n\n        return (\n          <GenericTaskPanel key = {key_taskType} genericTasks= {tasksByType} handoverId= {reportData.id}/>\n        )\n      }\n      )}\n\n\n    </SegmentGroup>\n  )\n}\n\nexport default ShiftReport","import { createContext } from 'react'\n\nconst Context = createContext( {\n  lastShiftReport: [],\n  station: []\n})\n\nexport default Context","const reducer = (state,action) => {\n  switch(action.type) {\n  case 'ADD_LASTSHIFTREPORT':\n    return {\n      ...state, lastShiftReport: action.payload\n    }\n  case 'INIT_STATION':\n    return {\n      ...state, station: action.payload\n    }\n  default:\n    return state\n  }\n}\n\nexport default reducer","import React from 'react'\r\nimport { useField, useFormikContext } from 'formik'\r\nimport { DateTimeInput, TimeInput } from 'semantic-ui-calendar-react'\r\nimport { Form, Label, Segment, Checkbox, Input } from 'semantic-ui-react'\r\n\r\n\r\nexport const DateInputField = ({ label,...props }) => {\r\n  const { setFieldValue,setFieldTouched } = useFormikContext()\r\n  const [field, meta] = useField(props)\r\n\r\n  return (\r\n    <Form.Field width = '4' >\r\n      {label &&\r\n      <label>{label}</label>}\r\n\r\n      <DateTimeInput  error = {meta.touched && meta.error?true:false} popupPosition='right center'  {...field} {...props} dateTimeFormat= 'DD-MM-YYYY HH:mm' closable onBlur= {() => {\r\n        setFieldTouched(field.name,true)\r\n      }} onChange={(event,{ value }) => {\r\n        setFieldValue(field.name, value)\r\n      }}\r\n      preserveViewMode={false}/>\r\n\r\n      {meta.touched && meta.error ?\r\n        <Label pointing prompt>\r\n          {meta.error}\r\n        </Label>:''}\r\n    </Form.Field>\r\n  )\r\n\r\n}\r\n\r\nexport const TimeInputField = ({ label,...props }) => {\r\n  const { setFieldValue,setFieldTouched } = useFormikContext()\r\n  const [field, meta] = useField(props)\r\n\r\n  return (\r\n    <Form.Field width = '4' >\r\n      {label &&\r\n      <label>{label}</label>}\r\n\r\n      <TimeInput error = {meta.touched && meta.error?true:false} popupPosition='right center' {...field} {...props} closable onBlur= {() => {\r\n        setFieldTouched(field.name,true)\r\n      }} onChange={(event,{ value }) => {\r\n        setFieldValue(field.name, value)\r\n      }}\r\n      />\r\n\r\n      {meta.touched && meta.error ?\r\n        <Label pointing prompt>\r\n          {meta.error}\r\n        </Label>:''}\r\n    </Form.Field>\r\n  )\r\n\r\n}\r\n\r\n\r\nexport const InputField = ({ width,...props }) => {\r\n  const [field,meta] = useField(props)\r\n  return (\r\n    <>\r\n      <Form.Field error= { meta.touched && meta.error ? true: false} width={width} >\r\n        <label>{props.inputlabel?props.inputlabel:'' }</label>\r\n        <Input   {...field} {...props} />\r\n        { props.type !== 'hidden' && meta.touched && meta.error &&\r\n        <Label pointing prompt>\r\n          {meta.error}\r\n        </Label>\r\n        }\r\n\r\n      </Form.Field>\r\n\r\n    </>\r\n  )\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport const AircraftCheckBox = ({ label,children,checked,...props }) => {\r\n  return(\r\n    <Segment\r\n      style= {{ display:checked?'block':'inline-block'  }}>\r\n      <Checkbox checked={checked} {...props} toggle/>\r\n      <label style={{ display: 'inline-block' , marginLeft: '5px', verticalAlign: 'super' }}> {label.toUpperCase()} </label>\r\n      {children}\r\n    </Segment>\r\n  )}\r\n\r\nexport const TextAreaField = ({ label,...props }) => {\r\n  const [field,meta] = useField(props)\r\n  return (\r\n    <Form.TextArea  error = { meta.touched && meta.error} {...field} {...props}/>\r\n  )}\r\n","import { isNumber } from 'lodash'\n\n/**\n *\n * @param {int OR String } dateToFormat  supported string formats :YYYY-MM-DDTHH:MM:SS.Z\n * @returns Date format DD-MM-YYYY HH:MM\n */\nexport const formatDate = (dateToFormat) => {\n  if(!dateToFormat){\n    return null\n  }\n  if(isNaN(dateToFormat)){\n    const regexFormats = [\n      /^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/,\n    ]\n    const dateFormat = regexFormats.findIndex((regex) => {\n      if (dateToFormat.match(regex)){\n        return true\n      }\n      return false\n    })\n\n    switch (dateFormat)\n    {\n    case 0:\n    { const splitT = dateToFormat.split('T')\n      const date= splitT[0]\n      const time= splitT[1]\n\n      const dateSplit = date.split('-')\n      const timeSplit = time.split('.')[0].split(':')\n\n      return dateSplit[2]+'-'+dateSplit[1]+'-'+dateSplit[0]+ ' '+ timeSplit[0] +':'+ timeSplit[1]\n    }\n\n    default:\n      return null\n    }\n  }\n\n  const date = new Date(dateToFormat)\n  return (`${(date.getDate()).toString().padStart(2,0)}-${(date.getMonth()+1).toString().padStart(2,0)}-${date.getFullYear()} ${(date.getHours()).toString().padStart(2,0)}:${(date.getMinutes()).toString().padStart(2,0)}`)\n\n}\n\n/**\n *\n * @param {int or date format} date javascript date int or DD-MM-YYYY\n * @param {Double} duration duration to operate\n * @param {String} unit 'd for days, h for hours , m for minutes'\n * @param {String} operation 'add or sub'\n * @returns {string} Date format DD-MM-YYYY HH:MM\n */\nexport const operateDate = (date, duration, unit , operation) => {\n  if(!date){\n    return null\n  }\n  let ndate\n  if(!isNumber(date)){\n    const splitDateTime = date.split(' ')\n    const splitDate = splitDateTime[0].split('-')\n    const newDate =`${splitDate[2]}-${splitDate[1]}-${splitDate[0]} ${splitDateTime[1]}`\n\n    ndate = Date.parse(newDate)\n\n  }\n  else{\n    ndate = new Date(date)\n  }\n\n  switch (unit){\n  case 'd':\n    if(operation === 'add') return  formatDate((ndate + (duration * 24 * 60 * 60 * 1000)))\n    if(operation === 'sub') return  formatDate((ndate - (duration * 24 * 60 * 60 * 1000)))\n    break\n  case 'h':\n    if(operation === 'add') return formatDate((ndate + (duration * 60 * 60 * 1000)))\n    if(operation === 'sub') return  formatDate((ndate - (duration * 60 * 60 * 1000)))\n    break\n  case 'm':\n    if(operation === 'add') return formatDate((ndate + (duration * 60 * 1000)))\n    if(operation === 'sub') return  formatDate(ndate - (duration * 60 * 1000))\n    break\n  default:\n    return formatDate(ndate)\n  }\n}\n\n/**\n *\n * @param {String} stringDate format DD-MM-YYYY HH:MM\n * @returns {Int} Javascript date int\n */\nexport const toDate = (stringDate) => {\n  let ndate\n  if(!isNumber(stringDate)){\n    const splitDateTime = stringDate.split(' ')\n    const splitDate = splitDateTime[0].split('-')\n    const newDate =`${splitDate[2]}-${splitDate[1]}-${splitDate[0]} ${splitDateTime[1] || '00' }:${splitDateTime[2] | '00'}`\n\n    ndate = Date.parse(newDate)\n  }\n  else{\n    ndate = new Date(stringDate)\n  }\n\n  return ndate\n\n}\n\nexport const getWeekNumber= (dt) => {\n  var tdt = new Date(dt.valueOf())\n  var dayn = (dt.getDay() + 6) % 7\n  tdt.setDate(tdt.getDate() - dayn + 3)\n  var firstThursday = tdt.valueOf()\n  tdt.setMonth(0, 1)\n  if (tdt.getDay() !== 4)\n  {\n    tdt.setMonth(0, 1 + ((4 - tdt.getDay()) + 7) % 7)\n  }\n  return 1 + Math.ceil((firstThursday - tdt) / 604800000)\n}\n\n/**\n* Returns the week start date(Monday) for given year and weeknumber\n* @param {Int} w between 1-52/53\n* @param {Int} y year\n* @returns {Date}\n*/\nexport const getDatefromWeek = (w,y) => {\n  const simpleStartDate = new Date(Date.UTC(y,0,1 + (w-1) *7))\n  const dayOfWeek = simpleStartDate.getDay()\n\n  let IsoWeekStart = simpleStartDate\n  if(dayOfWeek <=4) {\n    IsoWeekStart.setDate(simpleStartDate.getDate() - simpleStartDate.getDay()+1)\n  }else {\n    IsoWeekStart.setDate(simpleStartDate.getDate()+8 - simpleStartDate.getDay())\n  }\n  return IsoWeekStart\n}\n\nexport const getMonthInt= (name) => {\n  const months = ['january','february','march','april','may','june','july','august','september','october','november','december']\n  const ind = months.findIndex((month) => {\n    return month === name.toLowerCase()\n  })\n  return ind\n}\n\n/**\n  * Positive prop gets month from  beginning of year\n  * Negative index gets month from end  of year\n  * @param  {Int} monthInt Month Number\n  */\nexport const getMonthName = (monthInt) => {\n  const months = new Proxy(['January','February','March','April','May','June','July','August','September','October','November','December'], {\n    get(target, prop) {\n      if (!isNaN(prop)) {\n        prop = parseInt(prop, 10)\n        if (prop < 0) {\n          prop += target.length\n        }\n      }\n      return target[prop]\n    }\n  })\n  return months[monthInt]\n}\n\n/**\n * Retrive months form given month duration including current month\n *\n *  */\nexport const getMonthOptions = (duration) => {\n  /**Default Duration is 4 months */\n  if(!duration ){\n    duration = 4\n  }\n\n  const today = new Date()\n  const currentMonth = today.getMonth()\n\n  const options = [...new Array(duration)].map((v,i) => {\n    return (\n      { key:i ,\n        text: getMonthName(currentMonth-i ) ,\n        value:  currentMonth -i < 0 ? 12 + currentMonth -i  : currentMonth -i }\n    ) })\n  return options\n}\n\n/**Retrieve all weeks that falls within given month duration including current month*/\nexport const getWeekOptions = (duration) => {\n  /**Default Duration is 4 months */\n  if(!duration ){\n    duration = 4\n  }\n  const today = new Date()\n  const currentMonth = today.getMonth()\n  let dYear = today.getFullYear()\n  const lastYearWeekNum = getWeekNumber( new Date(dYear-1,11,28))\n  const lastRetriveable  = getWeekNumber(new Date(dYear, currentMonth - duration ,1))\n  let currentWeek = getWeekNumber(today)\n  let options = []\n\n  let week = currentWeek\n  while ( week !== lastRetriveable-1  ){\n    const option = { key: week, text: week, value: week }\n    options.push (option )\n    week = week -1\n    if(week === 0) {\n      week = lastYearWeekNum\n    }\n  }\n  return options\n\n}\n\n/**\n *\n * @param {String} filterBy filter by week or month accepts string 'week' or 'month'\n * @param {Int} number week number or Javascript MonthNumber\n * @returns {Int} year\n */\n\nexport const getFilterYear = (filterBy, number) => {\n\n  let year\n  const today = new Date()\n\n  if(filterBy ==='week' ){\n    const currentWeek = getWeekNumber(today)\n    if( number > currentWeek){\n      year = today.getFullYear() -1\n    }\n    if(number <= currentWeek){\n      const weekStartDate = new Date((new Date()).setDate(today.getDate() - today.getDay()+1))\n      year = weekStartDate.getFullYear()\n    }\n\n    return year\n\n  }\n\n  if(filterBy ==='month' && number > today.getMonth() ){\n    year = today.getFullYear() -1\n    return year\n  }\n\n  year = today.getFullYear()\n  return year\n\n}\n\n","import { formatDate, toDate } from '../../../utils/DateHelper'\r\nimport _ from 'lodash'\r\n\r\n\r\nexport const validateStaffsField= (value) => {\r\n  let error\r\n  /**\r\n   * If np staff is set\r\n   */\r\n  if(!value ||  !value.length ){\r\n    error = 'Report must have staff information, please add staff'\r\n    return error\r\n  }\r\n  /**\r\n   * If at least one staff is set\r\n   */\r\n  if (value && value.length){\r\n    error = _.mapValues(value, staff => {\r\n      let errList = validateStaffInputField(staff)\r\n      /**\r\n       * If the staff input fields have error other than signOffKey\r\n       */\r\n      if(!_.isEmpty(errList)){\r\n        errList = { ...errList,  'signOffKey':'Please fix staff inputs' }\r\n        return errList\r\n      }\r\n\r\n      /**\r\n       * If staff is not signed off\r\n       */\r\n      if (!staff.signOffKey ){\r\n        errList = { ...errList,  'signOffKey':'Each staff must sign off' }\r\n      }\r\n\r\n\r\n      return errList\r\n\r\n    }) }\r\n\r\n  /**\r\n     * Removing the empty key value pairs from error\r\n     */\r\n  _.mapKeys(error,(v,k) => {\r\n    if(_.isEmpty(v)) {\r\n      delete error[k]\r\n    }\r\n  })\r\n\r\n  return error\r\n\r\n\r\n}\r\n\r\nexport const validateStaffInputField = (staff) => {\r\n\r\n  let error\r\n  if(!staff) {\r\n    return undefined\r\n  }\r\n  /**\r\n   * If staff name is not set\r\n   */\r\n  if(!staff.name ){\r\n    error = { ...error, 'name':'Staff name is required' }\r\n  }\r\n  /**\r\n   * Validating starttime and endtime\r\n   * */\r\n  error = { ...error,...validateStartEndTime(staff.startTime,staff.endTime) }\r\n\r\n  return error\r\n}\r\n\r\n\r\nexport const validateStartEndTime = (startTime,endTime,startDate)  => {\r\n\r\n  let error\r\n  /**\r\n   * If start time is not set\r\n   */\r\n  if(!startTime){\r\n    error = { ...error, 'startTime':'Start time is required' }\r\n  }\r\n  /**\r\n   * If end time is not set\r\n   */\r\n  if(!endTime){\r\n    error = { ...error,  'endTime':'End time is required' }\r\n  }\r\n\r\n  /**\r\n   * Id starttime is not correct format DD-MM-YYY HH:MM\r\n   */\r\n  if(!startTime.match(/^(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[0-2])-\\d\\d\\d\\d (0[0-9]|1[0-9]|2[0-3]):([0-9]|[0-5][0-9])$/)){\r\n    error = { ...error,  'startTime':'Start time should be on format DD-MM-YYYY HH:MM' }\r\n  }\r\n\r\n  /**\r\n   * Id starttime is not correct format DD-MM-YYY HH:MM\r\n   */\r\n  if(!endTime.match(/^(0[1-9]|[12][0-9]|3[01])-(0[1-9]|1[0-2])-\\d\\d\\d\\d (0[0-9]|1[0-9]|2[0-3]):([0-9]|[0-5][0-9])$/)){\r\n    error = { ...error,  'endTime':'End time should be on format DD-MM-YYYY HH:MM' }\r\n  }\r\n\r\n  /**\r\n   * If starttime is earlier than 24H\r\n   */\r\n  if( !startDate && toDate(startTime) + (24 *3600 * 1000) <= Date.now()){\r\n    error = { ...error,  'startTime':'Start time should be within last 24 hours' }\r\n  }\r\n\r\n  if(startDate && new Date(startDate).getDate() !== new Date(toDate(startTime)).getDate()){\r\n    error = { ...error,  'startTime':`Start time should be on ${formatDate(new Date(startDate)).split(' ')[0]}` }\r\n  }\r\n\r\n\r\n  /**\r\n   * If starttime isgreater than end time\r\n   */\r\n  if( toDate(startTime) >= toDate(endTime)){\r\n    error = { ...error,  'startTime':'Start time cannot be later than endtime' }\r\n  }\r\n\r\n  /**\r\n   * If starttime is set to end time\r\n   */\r\n\r\n  if( toDate(startTime) > Date.now()){\r\n    error = { ...error,  'startTime':'Start time cannot be on future' }\r\n  }\r\n  /**\r\n   * If endtime is set in future\r\n   */\r\n\r\n  if( toDate(endTime) > Date.now()){\r\n    error = { ...error,  'endTime':'End time cannot be on future' }\r\n  }\r\n\r\n  return error\r\n\r\n}\r\n\r\nexport const validateTasks = (tasks) => {\r\n  if(!tasks) return null\r\n  const error = _.mapValues(tasks,typedTasks => {\r\n    const taskErrors = _.mapValues( typedTasks,task => {\r\n      /**\r\n       * Validating individual tasks\r\n       */\r\n      const taskError = validateTaskField(task)\r\n      return taskError\r\n    })\r\n\r\n    /**\r\n     * Removing empty nested objects\r\n     */\r\n    return(_.pickBy(taskErrors,_.identity))\r\n\r\n\r\n\r\n  })\r\n\r\n\r\n  /**\r\n   * Removing empty key value pair\r\n   */\r\n  _.mapKeys(error,(v,k) => {\r\n    if(_.isEmpty(v)) {\r\n      delete error[k]\r\n    }\r\n    //console.log(k)\r\n  })\r\n\r\n  return error\r\n}\r\n\r\n\r\n\r\n\r\nconst validateTaskField = (task) => {\r\n  let error = null\r\n  /**\r\n   * If task status is open\r\n   */\r\n  if(task.status === 'DEFERRED') {\r\n    /**\r\n     * If there is no action on DEFERRED task\r\n     */\r\n    if(!task.action || task.action === 'NOTES_ADDED'){\r\n      //console.log(task)\r\n      error = { ...error, action:'Action was requested on this task. Please perform a action. ' }\r\n    }\r\n  }\r\n\r\n  if(!task.status && !task.action){\r\n    error = { ...error, action: 'Task must have one of the following status' }\r\n  }\r\n\r\n  /**\r\n   * If task description is empty or spaces\r\n   */\r\n  if((!task.description || task.description.trim() === '')){\r\n    error= { ...error,description:'Please add task description' }\r\n  }\r\n  return error\r\n\r\n\r\n}\r\n\r\nexport const validateEmail = (email) => {\r\n\r\n  if(!email) {\r\n    return 'Email is required'\r\n  }\r\n  if(!email.match(/^[\\w-.]+@([\\w-]+\\.)+[\\w-]{2,4}$/)){\r\n    return 'Incorrect email format'\r\n  }\r\n\r\n}\r\n\r\n\r\nexport const validateName = (name) => {\r\n\r\n  if(!name || name.trim === '') return 'Full name is required'\r\n  if(name.length < 4){\r\n    return 'Name must be at least 4 character long'\r\n  }\r\n\r\n\r\n}","import React from 'react'\r\nimport { Field, getIn } from 'formik'\r\nimport {  Label } from 'semantic-ui-react'\r\n\r\nconst ErrorMessage = ({ name,pointing }) => (\r\n  <Field\r\n    name={name}>\r\n    {({ form }) => {\r\n\r\n      const error = getIn(form.errors, name)\r\n      const touch = getIn(form.touched, name)\r\n      return touch && error && typeof error === 'string' ?\r\n        <Label pointing={pointing} style={{ height:'fit-content' }}color='red'  basic>{error}</Label> : null\r\n    }}\r\n  </Field>\r\n)\r\n\r\nexport default ErrorMessage","import { gql } from '@apollo/client'\nexport const SIGN_OFF_SHIFT = gql`\n  mutation signOff($startTime: String!, $break:Int, $endTime:String!, $username: String, $password:String, $idCardCode: String, $additionalAction: String, $id:String, $email: String, $name: String ){\n    signOffTimeSheet(\n      startTime: $startTime, \n      endTime:$endTime, \n      break: $break,\n      username: $username, \n      password: $password , \n      additionalAction: $additionalAction,\n      email: $email,\n      name: $name,\n      idCardCode: $idCardCode\n      id: $id\n      ) {\n        name,\n        value,\n        break,\n        startTime,\n        endTime,\n        id\n      }\n  }`\nexport const UPDATE_TIMESHEET = gql`\n mutation updateTimeSheet($id: String, $startTime: String , $endTime: String, $station: String, $shift : String, $break: Int, $staff: String, $remarks: [RemarkInput], $handover: String){\n  addToTimeSheet(\n      id: $id\n      startTime: $startTime , \n      endTime: $endTime,\n      station: $station, \n      shift: $shift,  \n      staff: $staff\n      break: $break,\n      remarks:$remarks,\n      handover:$handover,\n  )\n    {\n      id\n      startTime\n      status\n      date\n      endTime\n      break\n      remarks{\n        by\n        date\n        edit\n        text\n        title\n      }\n      staff{\n        id\n        name\n        reqHours\n      }\n      shiftReport {\n        shift\n        id\n        station {\n          id\n          location\n        }\n      }\n\n      shift\n      station{\n        id\n        location\n      }\n\n  } \n  \n\n }\n`\nexport const APPROVE_TIMESHEET = gql`\n mutation approveTimeSheet($id: String!, $status: String!){\n   approveTimeSheet(\n     id: $id,\n     status: $status\n   ){\n     id \n     status \n     remarks{\n      by\n      date\n      edit\n      text\n      title\n    }\n   }\n }\n`\nexport const DELETE_TIMESHEET = gql`\n mutation deleteTimeSheet($id: String!){\n   deleteTimeSheet(\n     id: $id,    \n   ){\n     status\n     message\n   }\n }\n`\nexport const REQUEST_CLARIFICATION = gql`\n mutation requestClarification($id: String!, $clearify: String){\n  requestClarification(\n     id: $id,\n     clearify:$clearify,    \n   ){\n    id\n    remarks{\n      by\n      date\n      edit\n      text\n      title\n    }\n   }\n }\n`","import React, { useState, useEffect } from 'react'\nimport { Modal,Grid,Header,Form ,Divider,Segment ,Icon,Button,Message, Dimmer,Loader } from 'semantic-ui-react'\nimport { DateInputField, InputField } from './FormFields'\nimport { operateDate, formatDate } from '../../../utils/DateHelper'\nimport { useFormikContext, Formik } from 'formik'\nimport { validateStartEndTime } from './validator'\nimport { SIGN_OFF_SHIFT } from '../../../mutations/timeSheetMutation'\nimport { useMutation } from '@apollo/client'\n\n\nconst  StaffEditModel = ({ setOpen,open, fieldName, removeClick ,removeStaff ,setRemoveStaff }) => {\n\n  const{ getFieldMeta,setFieldValue } = useFormikContext()\n\n  const [signOff,{ loading, error, data }] = useMutation(SIGN_OFF_SHIFT)\n\n  const shiftStartTime = getFieldMeta(`${fieldName}.startTime`).value\n  const shiftEndTime = getFieldMeta(`${fieldName}.endTime`).value\n  const ibreakt = getFieldMeta(`${fieldName}.break`).value\n  const [notifyResult,setNotifyResult] = useState('')\n  const [username,setUsername] = useState('')\n  const [password,setPassword] = useState('')\n  const [startTime,setStartTime] = useState(shiftStartTime)\n  const [endTime,setEndTime] = useState(shiftEndTime)\n  const [breakt,setBreakt] = useState(ibreakt)\n\n  useEffect(() => {\n    setStartTime(shiftStartTime)\n    setEndTime(shiftEndTime)\n  },[shiftEndTime, shiftStartTime])\n\n\n  useEffect (() => {\n    /**If the staff sign off is not sucessfull */\n    if(error){\n      setNotifyResult({ type: 'error', message:`Sorry, ${error.message}` })\n    }\n    /**\n     * If the staff signoff is successFull\n     */\n    if(data && data.signOffTimeSheet != null ){\n\n      if(removeStaff) {\n        removeClick()\n        setRemoveStaff(false)\n        setOpen(false)\n\n      }else {\n        setFieldValue(`${fieldName}.startTime`,data.signOffTimeSheet.startTime)\n        setFieldValue(`${fieldName}.endTime`,data.signOffTimeSheet.endTime)\n        setFieldValue(`${fieldName}.signOffKey`,data.signOffTimeSheet.value)\n        setOpen(false)\n\n      }\n\n\n\n\n\n    }\n\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[error, data])\n\n  const submit = async (values) => {\n    let signOffData\n    signOffData = { startTime:values.startTime ,endTime: values.endTime ,break: values.breakt, username: username, password: password, additionalAction: removeStaff?'remove':'update',id:getFieldMeta(`${fieldName}`).value.id }\n    await signOff({ variables:signOffData })\n  }\n\n  const renderAlert = () => {\n    if(!notifyResult) return null\n    return(\n      <Message\n        success = {notifyResult.type === 'success'}\n        error = {notifyResult.type === 'error'}\n        onDismiss = {() => setNotifyResult('')\n        }\n      > {notifyResult.message}\n      </Message>)\n\n\n  }\n\n  if(loading){\n    return<Dimmer active inverted>\n      <Loader active inverted>Verifying</Loader>\n    </Dimmer>\n  }\n\n  return (\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {open}\n      onClose= {() => {\n\n        setNotifyResult(false)\n        setOpen(false)}}\n      onOpen= {() => setOpen (true)}\n    >\n      <Modal.Header>{getFieldMeta(`${fieldName}.name`).value} </Modal.Header>\n      <Modal.Content>\n        {notifyResult &&\n         renderAlert()\n        }\n        <Formik\n          enableReinitialize\n          initialValues = {{\n            startTime: startTime,\n            endTime: endTime,\n            breakt: breakt,\n            username:'',\n            password:'',\n            email:'',\n            fullname:'',\n            resetEmail:''\n          }}\n\n          validate = {values => {\n            let errors = {}\n            errors = { ...errors,...validateStartEndTime(values.startTime,values.endTime)  }\n            return errors\n          } }\n\n          onSubmit = {(values) =>\n          {\n            submit(values)}\n          }\n\n\n        >\n\n\n          {({ handleSubmit }) =>\n\n            <Form size='large' onSubmit = { handleSubmit} >\n              <Form.Group >\n\n                < DateInputField\n                  label= 'Start Time'\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name ='startTime'\n                  maxDate = {operateDate(Date.now(),30,'m','sub')}\n                  minDate= {operateDate(Date.now(),20,'h','sub')}\n                  onChange = {(e,{ value }) => {\n                    setStartTime(value)}\n                  }\n                />\n\n\n                < DateInputField\n                  label = 'End Time'\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name='endTime'\n                  maxDate = {formatDate(Date.now())}\n                  minDate= {operateDate(startTime,20,'m','add')}\n                  onChange = {(e,{ value }) => {\n                    setEndTime(value)}\n                  }/>\n\n                <InputField\n                  inputlabel= 'Break'\n                  label = 'Minutes '\n                  labelPosition='right corner'\n                  name= 'breakt'\n                  type='number'\n                  min='0'\n                  onChange = {(e,{ value }) => {\n                    setBreakt(value)}\n                  }>\n                </InputField>\n\n\n\n              </Form.Group>\n\n              <Header as='h3' color='red' textAlign='center'>\n                {removeStaff?'Enter credentials to confirm remove.' : 'Enter credential to save changes'}\n\n              </Header>\n\n\n              <>\n                <Segment >\n\n                  <Grid columns={2} stackable >\n                    <Divider vertical>Or</Divider>\n                    <Grid.Row verticalAlign='middle'>\n                      <Grid.Column>\n                        <Grid.Row style={{ textAlign:'center' }}>\n                          <Header as ='h5' icon>\n                            <Icon name='sign in alternate' />\n                    Use Credentials\n                          </Header>\n                        </Grid.Row>\n                        <Grid.Row>\n                          <Form.Group>\n                            <Form.Input label='Username' onChange= {(e,{ value }) => setUsername(value)}></Form.Input>\n                            <Form.Input label= 'Password' type='password' onChange= {(e,{ value }) => setPassword(value)}></Form.Input>\n                          </Form.Group>\n                          <Form.Field style={{ textAlign:'center' }}>\n                            <Button type='submit' primary > Sign </Button>\n                          </Form.Field>\n                        </Grid.Row>\n                      </Grid.Column>\n\n                      <Grid.Column textAlign='center'>\n                        <Grid.Row >\n                          <Header icon>\n                            <Icon name='barcode' size='massive' />\n                  Use IdCard\n                          </Header>\n                        </Grid.Row>\n                        <Grid.Row><Button primary>Scan</Button></Grid.Row>\n\n                      </Grid.Column>\n                    </Grid.Row>\n                  </Grid>\n\n                </Segment>\n\n              </>\n            </Form>}\n        </Formik>\n      </Modal.Content>\n\n    </Modal>\n\n\n  )\n}\n\nexport default StaffEditModel","import React, { useState } from 'react'\nimport { Label, Form, Button, Segment } from 'semantic-ui-react'\nimport { InputField, DateInputField } from './FormFields'\nimport { Field } from 'formik'\nimport { formatDate, operateDate } from '../../../utils/DateHelper'\nimport StaffEditModel from './StaffEditModel'\n\nconst StaffForm = ({ staff,fieldName,values,index,remove }) => {\n  const [open, setOpen] = useState(false)\n  const [removeStaff, setRemoveStaff] = useState(false)\n\n  if(!staff) return null\n  return(\n    <Segment >\n      {staff.signOffKey &&\n      <Label attached='top left' size='mini' basic color=\"grey\" >Signed Off </Label> }\n      <Form.Group  >\n        <InputField  width= {4} readOnly = {staff.signOffKey } name={`${fieldName}.name`}></InputField>\n        < DateInputField\n          readOnly = {(staff.signOffKey && !staff.changing) }\n          maxDate = {operateDate(Date.now(),30,'m','sub')}\n          minDate= {operateDate(Date.now(),20,'h','sub')}\n          name = {`${fieldName}.startTime`}/>\n\n        < DateInputField\n          readOnly= {(staff.signOffKey  && !staff.changing) }\n          maxDate = {formatDate(Date.now())}\n          minDate= {operateDate(values.startTime,20,'m','add')}\n          name = {`${fieldName}.endTime`}/>\n\n        <Field type='hidden' value=\"\" name={`${fieldName}.signOffKey`}></Field>\n        <Field type='hidden' value=\"\" name={`${fieldName}.break`}></Field>\n\n        <Button\n          style={{ height:'fit-content' }}\n          type='button'\n          circular\n          icon='cancel'\n          basic\n          onClick = {() => {\n            setRemoveStaff(true)\n            setOpen(true)\n          }}\n        />\n\n\n        <>\n          <Button\n            style={{ height:'fit-content' }}\n            type='button'\n            inverted\n            color='red'\n            size=\"small\"\n            onClick = {() => {\n              setOpen(true)\n            }\n            }> Change</Button>\n        </>\n\n      </Form.Group>\n\n      <StaffEditModel\n        setOpen={setOpen}\n        open={open}\n        startTime ={values.staffs[index].startTime}\n        endTime ={values.staffs[index].endTime}\n        breakt = {values.staffs[index].break}\n        fieldName = {fieldName}\n        removeStaff = {removeStaff}\n        setRemoveStaff= {setRemoveStaff}\n        removeClick = {() => remove(index)}\n      />\n\n    </Segment>\n  )}\n\nexport default StaffForm","import React, { Fragment } from 'react'\nimport { FieldArray } from 'formik'\nimport ErrorMessage from './ErrorMessage'\nimport { Segment, Button,Icon,Header } from 'semantic-ui-react'\nimport StaffForm from './StaffForm'\n\nconst StaffForms = ({ values ,addStaffOpen }) => {\n\n  return (\n    <>\n      <FieldArray name=\"staffs\">\n        {({ remove, push, replace }) => (\n          <Fragment >\n            <Header as=\"h3\">Staffs</Header>\n            <Segment.Group >\n              { values.staffs.length >0 && values.staffs.map((staff,index) =>\n                <StaffForm\n                  key={index}\n                  index ={index}\n                  staff={staff}\n                  fieldName={`staffs.${index}`}\n                  values= {values}\n                  remove= {remove}\n                ></StaffForm>\n              )\n              }\n            </Segment.Group>\n            <Button type='button' icon\n              primary onClick={ () =>\n                addStaffOpen(true)\n                /*push({ name:'',startTime:'',endTime:'' ,signOffKey:'' })*/}>< Icon name=\"plus circle\"/> Add </Button>  <ErrorMessage name='staffs' pointing='left'/>\n          </Fragment>\n        )}\n\n      </FieldArray>\n\n    </>\n\n  )\n}\n\nexport default StaffForms","import React, { useState } from 'react'\nimport { useFormikContext } from 'formik'\nimport { Label, Icon, Divider,Form,Button } from 'semantic-ui-react'\nimport ErrorMessage from './ErrorMessage'\nimport { TextAreaField } from './FormFields'\nimport TaskModal from '../../ShiftReport/TaskModal'\n\n\nexport const TaskForm = ({ label,onRemove,disabled,children,name,task }) => {\n  const { setFieldValue,getFieldProps,setFieldTouched, getFieldMeta } = useFormikContext()\n  const [openDetail, setOpenDetail] = useState(false)\n  const removeButtonClick = ( e ) => {\n    e.preventDefault()\n    onRemove()\n  }\n\n  const [noteFieldVisibile, setNoteFieldVisibile] = useState(false)\n\n  const taskAction = getFieldProps(`${name}.action`).value\n  const taskStatus = getFieldProps(`${name}.status`).value\n  const taskNotes =  getFieldProps(`${name}.newNote`).value\n\n  const actionButtonClick = (e,value) => {\n    e.preventDefault()\n    setFieldValue(`${name}.action`,value)\n    if(noteFieldVisibile && !taskNotes){\n      toggleNotes()\n    }\n  }\n\n  const actionOpenCheckBoxClick = (e,checked) => {\n    setFieldTouched(`${name}.description`,true)\n    if(!getFieldMeta(`${name}.description`).error){\n\n      if(checked){\n\n        setFieldValue(`${name}.action`,'OPEN')\n\n      }else{\n        setFieldValue(`${name}.action`,'')\n      }\n    }\n    else{\n      setFieldTouched(`${name}.description`)\n    }\n  }\n\n  const actionCloseCheckBoxClick = (e,checked) => {\n    setFieldTouched(`${name}.description`,true)\n    if(!getFieldMeta(`${name}.description`).error){\n      if(checked){\n        setFieldValue(`${name}.action`,'CLOSED')\n      }else{\n        setFieldValue(`${name}.action`,'')\n      }\n    }\n    else{\n      setFieldTouched(`${name}.description`)\n    }\n\n  }\n\n  const actionDeferCheckBoxClick = (e,checked) => {\n    setFieldTouched(`${name}.description`,true)\n    if(!getFieldMeta(`${name}.description`).error){\n      if(checked){\n        setFieldValue(`${name}.action`,'DEFERRED')\n      }else{\n        setFieldValue(`${name}.action`,'OPEN')\n      }\n    }\n    else{\n      setFieldTouched(`${name}.description`)\n    }\n\n\n  }\n\n  const undoButtonClick = () => {\n    setFieldValue(`${name}.action`,'')\n    if(taskNotes) {\n      setNoteFieldVisibile(true)\n    }\n  }\n\n  const toggleNotes = () => {\n    if(noteFieldVisibile){\n      const notes= taskNotes.trim()\n      setNoteFieldVisibile(false)\n      setFieldValue(`${name}.newNote`,notes)\n    }else{\n      setNoteFieldVisibile(true)\n    }\n\n  }\n\n  const TaskStatusBar = () => {\n    const prevShiftLabel = <Label  size='mini' basic >Task from previous shifts </Label>\n    const notesLabel = taskNotes && taskNotes.trim()?\n      <Label size='mini' basic color=\"blue\" as='a' onClick = {() => {\n        if(taskAction && taskAction !== 'NOTES_ADDED'){\n          toggleNotes()}\n      }\n      }>Notes Added </Label>:''\n\n\n    return (\n      <div style={{ padding:'0.3125em 1.5em' }}>\n        {prevShiftLabel}\n        {notesLabel}\n        {disabled && taskStatus === 'DEFERRED' && !taskAction &&\n              <Label size='mini' basic color=\"red\" >Action Required </Label>}\n        {taskAction &&\n       <>\n         <Label size='mini' basic color=\"green\" >{taskAction} </Label>\n         <Label as=\"a\" size='mini' basic color='yellow'\n           onClick = {(e) => undoButtonClick(e)}> <Icon name='undo'/> Undo Action\n         </Label>\n       </>\n        }\n\n\n      </div>)\n  }\n\n  return(\n    <>\n      <Divider></Divider>\n      {disabled &&\n       <TaskStatusBar></TaskStatusBar>\n      }\n\n      <Form.Group style={{ marginBottom:'0px' }}>\n\n\n        <label style={{ display: 'inline-block', padding: '0.9375em 0px 0px 0.3125em', width:'1.5625em' }}>{label+1}</label>\n\n        <TextAreaField  name= {`${name}.description`} readOnly={disabled} rows ='1' width='16'></TextAreaField>\n\n        <Button\n          type='button'\n          circular\n          icon='cancel'\n          style= {{ visibility: disabled?'hidden':'',height:'fit-content' }}\n          basic\n          onClick = {(e) => removeButtonClick(e)}/>\n\n\n\n      </Form.Group>\n\n      {!disabled &&\n      <div style={{ padding:'0.5em 1.5em' }}>\n        <ErrorMessage name = {`${name}.action`} pointing='below' ></ErrorMessage>\n        <Form.Group>\n          <Form.Checkbox\n            checked ={ taskAction === 'CLOSED' }\n            label=\"closed\" onChange = {(e,{ checked }) => actionCloseCheckBoxClick(e,checked)}/>\n          <Form.Checkbox\n            checked ={ taskAction === 'DEFERRED'  || taskAction === 'OPEN'}\n            label=\"Is Open Task\" onChange = {(e,{ checked }) => actionOpenCheckBoxClick(e,checked)}/>\n          <Form.Checkbox\n            label=\"Action Required\"\n            checked= {taskAction === 'DEFERRED' }\n            onChange = {(e,{ checked }) => actionDeferCheckBoxClick (e,checked) }/>\n        </Form.Group>\n\n      </div> }\n\n      {disabled &&  taskAction !== 'CLOSED' && taskAction !== 'DEFERRED' &&\n\n\n      <div style={{ margin:'0px 3.125em 0.625em 1.5em' }}>\n        <Label style={{ backgroundColor:'transparent',color:'#2185d0' }} as=\"a\" size='medium'  onClick = {() => {\n          setOpenDetail(true)\n        }}> View Action History   <Icon  link name =\"history\"/> </Label>\n\n        {\n          openDetail &&\n          <TaskModal open= {openDetail} setOpen = {setOpenDetail} task= {task}> </TaskModal>\n        }\n\n        <ErrorMessage name = {`${name}.action`} pointing='below' ></ErrorMessage>\n        <div>\n          <Button size='mini'\n            type='button'\n            onClick = {(e) => toggleNotes(e)}> {noteFieldVisibile?'Hide Notes' : taskNotes?'Show Notes':'Add Notes'}</Button>\n          <Button.Group size='mini'>\n            <Button type='button'\n              size='mini' positive\n              value= 'CLOSED'\n              onClick = {(e,{ value }) => actionButtonClick(e,value)}>Close Task</Button>\n\n            <Button.Or size='mini' />\n            <Button  type='button'\n              size='mini' negative\n              value= 'DEFERRED'\n              onClick = {(e,{ value }) => actionButtonClick(e,value)}> Defer Task to next Shift</Button>\n          </Button.Group>\n        </div>\n      </div>\n\n\n      }\n      <TextAreaField rows='1'\n        readOnly = {taskAction && taskAction !== 'NOTES_ADDED' ? true:false}\n        hidden= {!noteFieldVisibile}\n        style= {{ paddingBotton:'0.3125em',margin:'0px 3.125em 0.625em 1.5em'  }}\n        name={`${name}.newNote`  }\n        width='14'\n        onChange= {(e,{ value }) => {\n          if(value.trim() !== ''){\n            setFieldValue(`${name}.newNote`,value)\n            if (!taskAction){\n              setFieldValue(`${name}.action`,'NOTES_ADDED')\n            }\n\n          }else{\n            setFieldValue(`${name}.newNote`,'')\n            if (taskAction  === 'NOTES_ADDED'){\n              setFieldValue(`${name}.action`,'')\n\n            }\n\n          }\n\n        }}/>\n\n\n    </>\n  )\n\n}\n\nexport default TaskForm","import React from 'react'\nimport { FieldArray } from 'formik'\nimport TaskForm from './TaskForm'\nimport { Button, Icon } from 'semantic-ui-react'\n\n\nconst TaskForms = ({ tasksIdentifier,tasks,taskCategory,onRemove,aircraftId }) => {\n\n  const newTaskField = () => {\n    const newTaskField = { description:'',status:'',action:'',taskCategory: tasksIdentifier }\n    if(taskCategory && taskCategory === 'AIRCRAFT'){\n      newTaskField.aircraft = aircraftId\n      newTaskField.taskCategory = taskCategory\n    }\n\n    return newTaskField\n\n  }\n\n  return  <FieldArray name={`tasks.${tasksIdentifier}`}>\n    {({ push,remove }) => (<>\n      {tasks && tasks.map((task,index) =>\n        <TaskForm key={index}\n          label= {index}\n          task = {task}\n          name={`tasks.${tasksIdentifier}.${index}`}\n          //The input Field is disabled if the task is open or deferred from previous shifts implied by task.id field\n          disabled = {task.id && (task.status === 'DEFERRED' || task.status==='OPEN')}\n          onRemove = {\n            () => {\n              if(onRemove) onRemove()\n              remove(index)\n            }\n          }\n        >\n        </TaskForm>\n      )}\n\n      {/**\n       * Add new row button\n       */}\n      <Button\n        type='button'\n        icon\n        style={{ marginLeft:'10px' }}\n        primary\n        onClick={ (e) => push (newTaskField())\n        }>\n        <Icon name=\"plus circle\"/> Add\n      </Button>\n    </>)}\n  </FieldArray>}\n\nexport default TaskForms","import React, { Fragment, useState } from 'react'\nimport { Header, Confirm } from 'semantic-ui-react'\nimport { AircraftCheckBox } from './FormFields'\nimport { useFormikContext } from 'formik'\nimport TaskForms from './TaskForms'\n\nconst AircraftSelectionForm = ({ costumers,setCheckedAircrafts,checkedAircrafts,values }) => {\n  const { setFieldValue } = useFormikContext()\n  const [confirmOpen,setConfirmOpen] = useState ({ open:false,aircraft:'',event:'' })\n\n  return (<>\n    {costumers && costumers.map(costumer =>\n      <Fragment key= {costumer.name }>\n        <Header as=\"h3\">Work Performed for {costumer.name}</Header>\n\n\n        {costumer.aircrafts.map(aircraft =>\n\n          <Fragment key={aircraft.id}>\n            <AircraftCheckBox\n              label = {aircraft.registration}\n\n              // If the aircaft registration is on the checked list the checkbox should be checked\n              checked = {checkedAircrafts[aircraft.registration]&& checkedAircrafts[aircraft.registration]['checked']}\n\n              //If the aircraft reistration is on the checked list and is disabled the checkbox is disabled\n              disabled = {checkedAircrafts[aircraft.registration]&& checkedAircrafts[aircraft.registration]['disbleCheck']}\n\n              onChange={\n                (e,{ checked }) =>  {\n                  e.preventDefault()\n                  //if the aircraft is checked by user it should initalize with a taskarea input\n                  if(checked && (!values.tasks[aircraft.registration] || values.tasks[aircraft.registration].length === 0) ){\n                    setCheckedAircrafts({ ...checkedAircrafts,[aircraft.registration]:{ 'checked':checked } })\n                    setFieldValue(`tasks.${aircraft.registration}`,[{ description:'',status:'' ,action:'',taskCategory:'AIRCRAFT' ,aircraft: aircraft.id }])\n                  }\n                  if(!checked) {\n                    if(values.tasks[aircraft.registration].length >0 ){\n                      setConfirmOpen({ open:true, aircraft:aircraft.registration })\n                    }\n                  }\n                }\n\n              }>\n\n\n              {/**\n              * If Unchecked diaplay all task will be erased warning\n              */}\n              <Confirm\n                open = {confirmOpen.open}\n                header = {`Uncheck Aircraft ${confirmOpen.aircraft}`}\n                content= {'Are you sure you want to uncheck this aircraft? Doing so will remove all the entered tasks for this Aircraft'}\n                onCancel = { () => {\n                  setConfirmOpen({ open:false })\n                }}\n                onConfirm = { () => {\n                  setFieldValue(`tasks.${confirmOpen.aircraft}`,null)\n                  setCheckedAircrafts({ ...checkedAircrafts,[confirmOpen.aircraft]:{ 'checked':false } })\n                  setConfirmOpen({ open:false })\n                }}\n              />\n\n              {checkedAircrafts[aircraft.registration]&& checkedAircrafts[aircraft.registration]['checked'] &&\n              <TaskForms\n                tasksIdentifier={aircraft.registration}\n                tasks={values.tasks[aircraft.registration]}\n                taskCategory= 'AIRCRAFT'\n                aircraftId = {aircraft.id}\n                onRemove = {\n                  () => {\n                    /**\n                     * If the last remaining task is removed then the aircraft chekbox should uncheck\n                     */\n                    if(values.tasks[aircraft.registration].length===1){\n                      setCheckedAircrafts({ ...checkedAircrafts,[aircraft.registration]:{ 'checked':false } })\n                    }\n\n                  }}\n              ></TaskForms>\n              }\n            </AircraftCheckBox>\n\n          </Fragment>\n        )}\n\n\n      </Fragment>)}\n  </>\n\n  )\n}\n\nexport default AircraftSelectionForm","import React, { useState, useEffect } from 'react'\nimport { Modal,Grid,Header,Form ,Divider,Segment ,Icon,Button,Message, FormGroup, FormField, Dimmer,Loader } from 'semantic-ui-react'\nimport { DateInputField, InputField } from './FormFields'\nimport { operateDate, formatDate } from '../../../utils/DateHelper'\nimport { useFormikContext, Formik } from 'formik'\nimport { validateEmail, validateName, validateStartEndTime } from './validator'\nimport { SIGN_OFF_SHIFT } from '../../../mutations/timeSheetMutation'\nimport { useMutation } from '@apollo/client'\nimport _ from 'lodash'\n\n\nconst  StaffAddModel = ({ setOpen,open ,e }) => {\n\n  const{ getFieldMeta,setFieldValue } = useFormikContext()\n\n  const [signOff,{ loading, error, data }] = useMutation(SIGN_OFF_SHIFT)\n\n  const shiftStartTime = getFieldMeta('startTime').value\n  const shiftEndTime = getFieldMeta('endTime').value\n  const [notifyResult,setNotifyResult] = useState('')\n  const [username,setUsername] = useState('')\n  const [password,setPassword] = useState('')\n  const [startTime,setStartTime] = useState(shiftStartTime)\n  const [endTime,setEndTime] = useState(shiftEndTime)\n  const [breakt,setBreakt] = useState('30')\n  const [registerUserOpen,setRegisterUserOpen]= useState(false)\n  const [forgotPasswordOpen,setForgotPasswordOpen] = useState(false)\n\n  useEffect(() => {\n    setStartTime(shiftStartTime)\n    setEndTime(shiftEndTime)\n  },[shiftEndTime, shiftStartTime])\n\n\n  useEffect (() => {\n    /**If the staff sign off is not sucessfull */\n    if(error){\n      if(registerUserOpen){\n        setNotifyResult({ type: 'error', message:`Failed to register user. ${error.message}` })\n      }if(forgotPasswordOpen){\n        setNotifyResult({ type: 'error', message:`Failed to reset password. ${error.message}` })\n      }\n      else{\n        setNotifyResult({ type: 'error', message:`Failed to add user. ${error.message}` })\n      }\n    }\n    /**\n     * If the staff signoff is successFull\n     */\n    if(data && data.signOffTimeSheet != null ){\n      /**\n       * Check if the staff is alrady added if so notify user to remove old entry\n       */\n      const staffs= getFieldMeta('staffs').value\n      if(_.find(staffs,{ id:data.signOffTimeSheet.id })){\n\n        setNotifyResult({ type: 'error', message: `${data.signOffTimeSheet.name} is already exist on report` } )\n\n      }else {\n        const addedStaff = [...staffs,{ name:data.signOffTimeSheet.name, startTime:data.signOffTimeSheet.startTime, endTime: data.signOffTimeSheet.endTime ,signOffKey:data.signOffTimeSheet.value ,id: data.signOffTimeSheet.id, break: data.signOffTimeSheet.break }]\n        setFieldValue('staffs', addedStaff)\n\n        if(registerUserOpen){\n\n          setNotifyResult({ type: 'success', message:`${data.signOffTimeSheet.name} is added to report.<br/> Further registration instruction sent to email. Please complete registration within 48 hours` })\n          setRegisterUserOpen(false)\n\n        }if(forgotPasswordOpen){\n          setNotifyResult({ type: 'success', message:`${data.signOffTimeSheet.name} is added to report <br/> Password reset link sent to email.`  })\n          setForgotPasswordOpen(false)\n        }\n        else{\n          setNotifyResult({ type: 'success', message: `${data.signOffTimeSheet.name} is added to report` } )\n        }\n      }\n\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[error, data])\n\n\n\n\n\n  const submit = async (values) => {\n\n    let signOffData\n\n    if(registerUserOpen){\n      signOffData = {  startTime:values.startTime ,endTime:values.endTime , break:parseInt(breakt), email: values.email, name: values.fullname ,additionalAction:'register' }\n    }\n    else if(forgotPasswordOpen){\n      signOffData = { startTime:values.startTime ,endTime:values.endTime ,break:parseInt(breakt), email:values.resetEmail,additionalAction:'reset' }\n    }else {\n      signOffData = { startTime:values.startTime ,endTime: values.endTime ,break:parseInt(breakt), username: username, password: password }\n    }\n    await signOff({ variables:signOffData })\n  }\n\n  const renderAlert = () => {\n    if(!notifyResult) return null\n    return(\n      <Message\n        success = {notifyResult.type === 'success'}\n        error = {notifyResult.type === 'error'}\n        onDismiss = {() => setNotifyResult('')\n        }\n      > {notifyResult.message}\n      </Message>)\n\n\n  }\n  const renderNewUserInput = (values) => {\n\n    return(\n\n      <Segment basic>\n        <Message positive>\n          <Message.Header>Register info</Message.Header>\n\n            Please enter following information to add yourself to shift . Registraion instruction will be forwarded to you on the provided email.\n            It is important that you register as soon as possible.\n        </Message>\n\n        <Message warning visible>\n          <Message.Header>Attention!!</Message.Header>\n        Your info will be added to report automatically after this step, make sure you enter your name and work time correctly\n        </Message>\n        <Form.Group>\n          <InputField width= '12' name ='fullname' label='Full Name' />\n          <InputField width= '12' name = 'email' label = 'Email Address'/>\n        </Form.Group>\n        <FormGroup>\n          <Button  positive >Register</Button>\n          <Button type='button' negative onClick ={() => setRegisterUserOpen(false)}>Cancel</Button>\n        </FormGroup>\n\n\n      </Segment>\n    )\n  }\n\n  const renderForgotPassword = (values) => {\n    return(\n      <Segment basic>\n        <Message warning visible>\n          <Message.Header>Reset Password</Message.Header>\n            Please enter your email address used while creating account.\n        </Message>\n\n        <Message warning visible>\n          <Message.Header>Attention!!</Message.Header>\n        Your info will be added to report automatically after this step, make sure you <strong>Enter your work time correctly</strong>\n        </Message>\n\n        <InputField width= '12' name = 'resetEmail'label = 'Email Address'/>\n        <FormGroup>\n          <Button  primary >Reset</Button>\n          <Button  negative onClick ={() => setForgotPasswordOpen(false)}>Cancel</Button>\n        </FormGroup>\n      </Segment>\n    )\n  }\n\n\n  if(loading){\n    return<Dimmer active inverted>\n      <Loader active inverted>Veryfing User</Loader>\n    </Dimmer>\n  }\n\n  return (\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {open}\n      onClose= {() => {\n        setForgotPasswordOpen(false)\n        setRegisterUserOpen(false)\n        setNotifyResult(false)\n        setOpen(false)}}\n      onOpen= {() => setOpen (true)}\n    >\n      <Modal.Header>Add User to Shift </Modal.Header>\n      <Modal.Content>\n\n        {notifyResult &&\n         renderAlert()\n        }\n\n        <Formik\n          enableReinitialize\n          initialValues = {{\n            startTime: startTime,\n            endTime: endTime,\n            breakt:breakt,\n            username:'',\n            password:'',\n            email:'',\n            fullname:'',\n            resetEmail:''\n          }}\n\n          validate = {values => {\n            let errors = {}\n            errors = { ...errors,...validateStartEndTime(values.startTime,values.endTime) }\n\n            if(forgotPasswordOpen){\n              let emailError = validateEmail(values.resetEmail)\n              if(emailError) errors.resetEmail = emailError\n            }\n            if(registerUserOpen){\n              let emailError = validateEmail(values.email)\n              if(emailError) errors.email = emailError\n\n              let usernameError = validateName(values.fullname)\n              if(usernameError) errors.fullname = usernameError\n\n            }\n            return errors\n          } }\n\n          onSubmit = {(values) =>\n          {\n            submit(values)}\n          }\n\n\n        >\n\n\n          {({ values,handleSubmit,errors,touched }) =>\n\n            <Form size='large' onSubmit = { handleSubmit} >\n              <Form.Group >\n\n                < DateInputField\n                  label= 'Start Time'\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name ='startTime'\n                  maxDate = {operateDate(Date.now(),30,'m','sub')}\n                  minDate= {operateDate(Date.now(),20,'h','sub')}\n                  onChange = {(e,{ value }) => {\n                    setStartTime(value)}\n                  }\n                />\n\n\n                < DateInputField\n                  label = 'End Time'\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name='endTime'\n                  maxDate = {formatDate(Date.now())}\n                  minDate= {operateDate(startTime,20,'m','add')}\n                  onChange = {(e,{ value }) => {\n                    setEndTime(value)}\n                  }/>\n\n                <InputField\n                  inputlabel= 'Break'\n                  label = 'Minutes '\n                  labelPosition='right corner'\n                  name= 'breakt'\n                  type='number'\n                  min='0'\n                  onChange = {(e,{ value }) => {\n                    setBreakt(value)}\n                  }>\n                </InputField>\n\n\n\n              </Form.Group>\n\n              <Header as='h5' color='blue' textAlign='center'>\n\n              </Header>\n\n              {!registerUserOpen && !forgotPasswordOpen &&\n\n\n            <>\n              <Segment >\n\n                <Grid columns={2} stackable >\n                  <Divider vertical>Or</Divider>\n                  <Grid.Row verticalAlign='middle'>\n                    <Grid.Column>\n                      <Grid.Row style={{ textAlign:'center' }}>\n                        <Header as ='h5' icon>\n                          <Icon name='sign in alternate' />\n                    Use Credentials\n                        </Header>\n                      </Grid.Row>\n                      <Grid.Row>\n                        <Form.Group>\n                          <Form.Input label='Username' onChange= {(e,{ value }) => setUsername(value)}></Form.Input>\n                          <Form.Input label= 'Password' type='password' onChange= {(e,{ value }) => setPassword(value)}></Form.Input>\n                        </Form.Group>\n                        <Form.Field style={{ textAlign:'center' }}>\n                          <Button type='submit' primary > Sign </Button>\n                        </Form.Field>\n                        <Form.Field style={{ textAlign:'center' }}>\n                          <Button size='tiny' onClick={() => setForgotPasswordOpen(true)}>Forgot Password</Button>\n                        </Form.Field>\n                      </Grid.Row>\n                    </Grid.Column>\n\n                    <Grid.Column textAlign='center'>\n                      <Grid.Row >\n                        <Header icon>\n                          <Icon name='barcode' size='massive' />\n                  Use IdCard\n                        </Header>\n                      </Grid.Row>\n                      <Grid.Row><Button primary>Scan</Button></Grid.Row>\n\n                    </Grid.Column>\n                  </Grid.Row>\n                </Grid>\n\n              </Segment>\n              <FormField style={{ textAlign:'center' }}>\n                <label> If you do not have a account yet, contact your supervisor or click below.</label>\n                <Button type='button' onClick={() => setRegisterUserOpen(true)}> New User </Button>\n              </FormField>\n            </>\n              }\n\n\n              {registerUserOpen && renderNewUserInput( values)}\n              {forgotPasswordOpen && renderForgotPassword(values)}\n            </Form>}\n        </Formik>\n      </Modal.Content>\n\n    </Modal>\n\n\n  )\n}\n\nexport default StaffAddModel","import { gql } from '@apollo/client'\nexport const SUBMIT_REPORT = gql`\n  mutation submitReport($station: String!, $shift:String! , $startTime: String! ,$endTime: String!, $tasks: [ShiftReportTask]! , $staffs: [ShiftReportStaffs!]! ) { \n  submitShiftReport(\n    station:$station\n    shift:$shift\n    startTime: $startTime\n    endTime: $endTime\n    tasks:$tasks\n    staffs: $staffs\n  ){\n    endTime\n    id\n    shift\n    staffAndTime {\n      id\n      staff {\n        name\n      }\n      endTime\n      startTime\n    }\n    startTime\n    station {\n      location\n      id\n    }\n    tasks {\n      aircraft {\n        registration\n        id\n        costumer {\n          name\n        }\n      }\n      taskCategory\n      description\n      id\n      status\n      updates {\n        action\n        handoverId {\n          id\n          shift\n        }\n        note\n      }\n      \n    }\n  } \n}\n`","import React, { useState, useContext, useEffect } from 'react'\r\nimport { Formik } from 'formik'\r\nimport Context from '../Context'\r\nimport { Form, Header, Button, Dimmer, Segment, Loader, Message } from 'semantic-ui-react'\r\nimport { DateInputField } from './FormFields'\r\nimport { validateStaffsField, validateStartEndTime, validateTasks } from './validator'\r\nimport { formatDate, operateDate, toDate } from '../../../utils/DateHelper'\r\nimport _ from 'lodash'\r\nimport StaffForms from './StaffForms'\r\nimport AircraftSelectionForm from './AircraftSelectionForm'\r\nimport TaskForms from './TaskForms'\r\nimport StaffAddModel from './StaffAddModel'\r\nimport { useMutation } from '@apollo/client'\r\nimport { SUBMIT_REPORT } from '../../../mutations/submitShiftReport'\r\nimport { GET_SHIFT_REPORT } from '../../../queries/shiftReportQuery'\r\nimport { NotificationContext } from '../../../contexts/NotificationContext'\r\n\r\nconst NewReportForm = ({ setActiveItem }) => {\r\n  const context = useContext(Context)\r\n  const[,dispatch] = useContext(NotificationContext)\r\n  const station = context.state.station\r\n  const reportData = context.state.lastShiftReport\r\n\r\n  const [openAddStaffModel,setOpenAddStaffModel] = useState (false)\r\n\r\n  // costumers assigned to this station\r\n  const [costumers,setCostumers] = useState(station.costumers)\r\n\r\n  const [checkedAircrafts, setCheckedAircrafts] = useState({})\r\n  const init = {\r\n    startTime:'', //default shift starttime\r\n    endTime:'',\r\n    staffs:[],\r\n    tasks:{}\r\n  }\r\n  const [initialFields,setInitialFields] = useState(init)\r\n\r\n  const [submitReport,{ loading }] = useMutation(SUBMIT_REPORT,{\r\n    update(store,result) {\r\n\r\n      const data = { getShiftReport: result.data.submitShiftReport }\r\n      store.writeQuery(\r\n        { query: GET_SHIFT_REPORT ,\r\n          variables:{\r\n            station: station.id,\r\n            flag:'MOST_RECENTLY_COMPLETED'\r\n          },\r\n          data\r\n        }\r\n      )\r\n    },\r\n\r\n    onCompleted: () => {\r\n      setActiveItem('lastShiftReport')\r\n    },\r\n\r\n    onError: (error) => {\r\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: error.message ,type: 'ERROR' } })\r\n    }\r\n  })\r\n  const getShiftName = (startTime) => {\r\n    const sdt = new Date(toDate(startTime))\r\n    const shiftName = station.shifts.reduce((p,c) => {\r\n      /**Setting the shiftTime to given startTime for comparision  */\r\n      const splitSt = c.startTime.split(':')\r\n      const st = new Date(sdt)\r\n      st.setHours(splitSt[0])\r\n      st.setMinutes(splitSt[1])\r\n      /** Diffence between given startTIme and shift startttime */\r\n      const diff = (sdt-st)/(60*60*1000)\r\n      /**return the lowest positive diffence if exist or highest negative differnce*/\r\n      if((diff > p.diff && p.diff < 0) ){\r\n        return { name: c.name ,diff: diff }\r\n      }\r\n      if(diff > 0 && diff< p.diff){\r\n        return { name: c.name ,diff: diff }\r\n      }\r\n      return p\r\n    },{ name:'',diff:-24 })\r\n    return shiftName.name\r\n  }\r\n\r\n  useEffect (() => {\r\n    //initial aircraft list from last shift report\r\n    let list = {}\r\n    //initial task list from last shift report\r\n    let taskList = {}\r\n    let costumerList = []\r\n\r\n    // eslint-disable-next-line array-callback-return\r\n    reportData && reportData.tasks && reportData.tasks.map(task =>  {\r\n      if( (task.status==='DEFERRED' || task.status==='OPEN') ){\r\n        // Initial field for deferred or open tasks\r\n        const simplifiedTask = { id:task.id, aircraft:task.aircraft, description:task.description, status:task.status ,updates: task.updates ,action:'', newNote:'',taskCategory:task.taskCategory }\r\n\r\n        //From the last shift report if the task is aircraft tasks aircraft has open tasks it is checked by default and cannot be disabled\r\n        if(task.aircraft) {\r\n          list[task.aircraft.registration] = { checked:true,disbleCheck:true }\r\n        }\r\n\r\n        //arranging tasks based on aircraft registration\r\n        if(task.aircraft && taskList[task.aircraft.registration]){\r\n          taskList[task.aircraft.registration].push( { ...simplifiedTask })\r\n\r\n        }else if (task.aircraft){\r\n          taskList[task.aircraft.registration] = [ { ...simplifiedTask }]\r\n\r\n        }else{\r\n          if(taskList[task.taskCategory]){\r\n            taskList[task.taskCategory].push(simplifiedTask)\r\n          }else{\r\n            taskList[task.taskCategory] = [simplifiedTask]\r\n          }\r\n\r\n\r\n        }\r\n\r\n        //if there is a task from a costumer who is not assigned to this station we add that arcraft & costumer to list\r\n        if(task.aircraft){\r\n          if(! _.find( station.costumers,_.matchesProperty('name',task.aircraft.costumer.name))){\r\n\r\n            if( ! _.find( costumerList,_.matchesProperty('name',task.aircraft.costumer.name))){\r\n              costumerList.push({ name:task.aircraft.costumer.name,aircrafts:[{ registration:task.aircraft.registration,id: task.aircraft.id }] })\r\n            }else{\r\n              costumerList.aircrafts.push({ registration:task.aircraft.registration , id: task.aircraft.id })\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    )\r\n\r\n    setCostumers([...costumers,...costumerList])\r\n\r\n    //Set initail form values based on shiftreport\r\n    setInitialFields({ ...initialFields,tasks:taskList })\r\n    setCheckedAircrafts(list)\r\n\r\n  }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  ,[])\r\n\r\n  /**Format submit data  before submit*/\r\n  const beforeSubmit = (formdata) => {\r\n    let submitData = { station: station.id , staffs: formdata.staffs, startTime:formdata.startTime, endTime: formdata.endTime, tasks:{} }\r\n\r\n    /**Reduce the tasks to be only array of tasks */\r\n    const updatedTasks =  _.reduce(formdata.tasks, (tasks,tasksByIdentifier,identifier) => {\r\n      let taskList = _.map(tasksByIdentifier, (task,index) => {\r\n        let initialTask\r\n        /**Compare the task with the initial tasks, reduce to only include the changes */\r\n        if(initialFields.tasks[identifier] && initialFields.tasks[identifier][index]){\r\n          initialTask = initialFields.tasks[identifier] && initialFields.tasks[identifier][index]\r\n          const difference = Object.keys(initialTask).filter(k => initialTask[k] !== task[k])\r\n\r\n          /**If no changes return null */\r\n          if(!difference) return null\r\n          const reducedTask = difference.reduce((p,c) => p[c] = { ...p,[c]:task[c] },{})\r\n          task = { id: task.id, ...reducedTask }\r\n        }\r\n\r\n        return task\r\n      })\r\n\r\n      /**remove null tasks */\r\n      taskList = taskList.filter(task => task !== null)\r\n\r\n      return [...tasks,...taskList]\r\n    },[])\r\n\r\n\r\n    /**Only include staff signoff Key and name */\r\n    const staffs = formdata.staffs.map((staff) => {return { signOffKey: staff.signOffKey, name:staff.name }})\r\n\r\n    submitData = { ...submitData,tasks: updatedTasks, staffs: staffs ,shift: getShiftName(formdata.startTime) }\r\n\r\n    return submitData\r\n\r\n  }\r\n\r\n  if(loading) {\r\n    return(\r\n      <Segment style={{ height:'10rem' }} basic size='huge'>\r\n        <Dimmer active inverted>\r\n          <Loader inverted>Submitting Data</Loader>\r\n        </Dimmer>\r\n      </Segment>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Formik\r\n        enableReinitialize\r\n        initialValues = {initialFields}\r\n        validate = { values => {\r\n          let errors = {}\r\n          errors = { ...errors,...validateStartEndTime(values.startTime,values.endTime) }\r\n          const staffErrors = validateStaffsField(values.staffs)\r\n          const taskErrors = validateTasks(values.tasks)\r\n\r\n          if(!_.isEmpty(taskErrors) ) errors.tasks = taskErrors\r\n          if(!_.isEmpty(staffErrors) ) errors.staffs = staffErrors\r\n\r\n          return errors\r\n\r\n        }}\r\n        onSubmit={(values) => {\r\n          const submitData = beforeSubmit(values)\r\n          submitReport({ variables: submitData })\r\n\r\n        }}\r\n      >\r\n\r\n        {({ values,handleSubmit,errors,touched,submitCount }) =>\r\n          <>\r\n            <Form onSubmit = {handleSubmit}>\r\n              {/*Shift start end times*/}\r\n              <Form.Group >\r\n                <DateInputField\r\n                  label = \"Shift Start Time\"\r\n                  name='startTime'\r\n                  maxDate = {operateDate(Date.now(),30,'m','sub')}\r\n                  minDate= {operateDate(Date.now(),20,'h','sub')}/>\r\n\r\n                <DateInputField\r\n                  label = \"Shift End Time\"\r\n                  name='endTime'\r\n                  maxDate = {formatDate(Date.now())}\r\n                  minDate= {operateDate(values.startTime,20,'m','add')}/>\r\n              </Form.Group>\r\n\r\n              {/*Dynamic Input fields for staff Information*/}\r\n              <StaffForms values={values} touched={touched} errors={errors} addStaffOpen =  {setOpenAddStaffModel}/>\r\n\r\n              {/*Dynamic Input fields for Aircraft Tasks*/}\r\n              <AircraftSelectionForm costumers ={costumers} checkedAircrafts={checkedAircrafts} setCheckedAircrafts= {setCheckedAircrafts} values={values} />\r\n\r\n              {/*Dynamic Input fields for Other Tasks*/}\r\n              <Header as=\"h3\">Other Tasks</Header>\r\n              <TaskForms tasksIdentifier = 'OTHER' tasks = {values.tasks.OTHER}> </TaskForms>\r\n\r\n              {/*Dynamic Input fields for Other Tasks*/}\r\n              <Header as=\"h3\">Logistics Task</Header>\r\n              <TaskForms tasksIdentifier = 'LOGISTICS' tasks = {values.tasks.LOGISTICS}> </TaskForms>\r\n\r\n              <Message\r\n                error\r\n                content={\r\n                  <Header as='h5'>There are some errors on the report <Header.Subheader>Please fix the errors before trying again</Header.Subheader></Header>\r\n                }\r\n                visible ={(!_.isEmpty(errors) && submitCount > 0 ) === true}\r\n              />\r\n\r\n              <Message\r\n                success\r\n                content={\r\n                  <Header as='h5'>Great! Everything seems to be fixed <Header.Subheader>Please, proceed to submit whenever ready</Header.Subheader></Header>\r\n                }\r\n                visible ={(_.isEmpty(errors) && submitCount > 0 ) === true}\r\n              />\r\n\r\n              <Segment disabled = {!_.isEmpty(errors) && submitCount > 0} color='blue' inverted tertiary clearing>\r\n                <Button floated='right' type=\"submit\" primary> Submit Report </Button> </Segment>\r\n            </Form>\r\n            <StaffAddModel setOpen= {setOpenAddStaffModel} open= {openAddStaffModel} shiftStartTime = {values.startTime} shiftEndTime={values.endTime}></StaffAddModel></>}\r\n\r\n\r\n      </Formik>\r\n\r\n    </>\r\n\r\n  )\r\n}\r\n\r\nexport default NewReportForm","import { gql } from '@apollo/client'\n\nexport const ADD_COSTUMER = gql`\nmutation addnewCostumer( $name: String! $stations: [String], $keyContacts: [ContactInput], $contract: String! ,$aircrafts: [String]){\n  addCostumer(\n    name: $name\n    stations: $stations\n    keyContacts: $keyContacts\n    aircrafts: $aircrafts\n    contract: $contract){\n      name\n      id\n      contract\n      aircrafts{\n        id\n        registration\n      }\n      stations{\n        id\n      }\n    }\n}`\n\nexport const ADD_AIRCRFAT = gql`\nmutation addAircrafttoCostumer( $registration: [String!]! $costumer: String!){\n  addAircrafts(\n    registration: $registration\n    costumer: $costumer\n    ){\n      id\n      registration\n    }\n}`\n\nexport const ADD_CONTACT = gql`\nmutation addContactCostumer( $keyContacts: [ContactInput!]! , $costumer: String!){\n  addContact(\n    keyContacts: $keyContacts\n    costumer: $costumer\n    ){      \n        id\n        description\n        email\n        phone   \n    }\n}`\n\nexport const ADD_STATION_TO_COSTUMER = gql`\nmutation addStationCostumer( $stations: [String!]! , $costumer: String){\n  addStationsToCostumer(\n    stations: $stations\n    costumer: $costumer\n    ){\n      id\n      stations{\n        id\n        location\n      }\n    }\n}`\n\nexport const REMOVE_AIRCRFAT = gql`\nmutation removeAircraft( $id: String!){\n  removeAircraft(\n    id: $id\n    ){\n      status\n      message\n    }\n}`\n\nexport const REMOVE_CONTACT = gql`\nmutation removeContactCostumer( $id: String! , $costumer: String){\n  removeContact(\n    id: $id\n    costumer: $costumer\n    ){\n      status\n      message\n    }\n}`\n\nexport const REMOVE_COSTUMER_FROM_STATION = gql`\nmutation removeStationCostumer( $station: String! , $costumer: String){\n  removeCostumerStation(\n    station: $station\n    costumer: $costumer\n    ){\n      status\n      message\n    }\n}`\n\nexport const DELETE_COSTUMER = gql`\nmutation deleteCostumer( $costumer: String){\n  deleteCostumer(\n    costumer: $costumer\n    ){\n      status\n      message\n    }\n}`","import { gql } from '@apollo/client'\nexport const ALL_COSTUMERS = gql`\nquery fetchAllCostumers ($detailed: Boolean = false) {\n    allCostumers {\n      name\n      id\n      stations  @include(if: $detailed) {\n        id\n        location\n      }\n      contract @include(if: $detailed)\n      aircrafts @include(if: $detailed) {\n        id\n        registration\n      }\n    }\n  }\n`\n\nexport const VERIFY_REGISTRATION = gql`\nquery verifyReg ($registrations:String!){\n  verifyAircraftRegistration(registrations: $registrations)\n}\n`\n\nexport const GET_COSTUMER = gql ` \nquery getCostumerId ($id:String){\n  getCostumer(\n    id:$id\n  ){\n    name\n    id \n    stations{\n      id\n      location\n      address{\n        street\n        postcode\n        city\n        country\n      }\n    }\n    aircrafts{\n      id\n      registration\n    }\n    contract\n    keyContacts{\n      id\n      phone\n      description\n      email\n    }\n\n\n  }\n}\n\n`","import React from 'react'\nimport { Button, Modal } from 'semantic-ui-react'\n\nconst ConfirmModal = ({ confirm , setOpen , open }) => {\n  return(\n    <Modal\n      open= {open}\n      closeOnEscape= {false}\n      closeOnDimmerClick={false}\n    >\n      <Modal.Header >Confirm</Modal.Header>\n      <Modal.Content>{confirm.title}</Modal.Content>\n      <Modal.Actions>\n        <Button positive onClick= {() => {\n          confirm.fn()\n          setOpen(false)\n        }\n        }>Confirm </Button>\n        <Button negative  onClick= {() => setOpen(false)}>Cancel </Button>\n      </Modal.Actions>\n    </Modal>\n  )\n\n}\n\nexport default ConfirmModal","import { gql, useLazyQuery, useMutation } from '@apollo/client'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { ADD_AIRCRFAT } from '../../mutations/costumerMutation'\nimport { forEach } from 'lodash'\nimport { Button, Form, Modal } from 'semantic-ui-react'\nimport { Formik } from 'formik'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { VERIFY_REGISTRATION } from '../../queries/costumerQuey'\n\nconst AddAircraftModal = ({ open ,setOpen ,costumer }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const [checkAircraftRegistration,{ loading,data }] = useLazyQuery(VERIFY_REGISTRATION)\n  const [duplicateError,setDuplicateError] = useState([])\n  useEffect(() => {\n    if(data){\n      setDuplicateError(data.verifyAircraftRegistration)\n    }\n  }, [data])\n\n  const [addAircrafts] = useMutation (ADD_AIRCRFAT,{\n    update:(store,{ data: { addAircrafts } }) => {\n\n      store.modify({\n        id: `Costumer:${costumer.id}`,\n        fields:{\n          aircrafts(existingAircraftRefs, { readField }) {\n\n            let newAircraftRefs =[]\n\n            forEach(addAircrafts,( aircrafts,i) => {\n              if(existingAircraftRefs.some(ref => readField('id',ref) !== aircrafts.id)){\n                newAircraftRefs.push(store.writeFragment({\n                  data: addAircrafts[i],\n                  fragment: gql`\n                fragment NewAircraft on Aircraft {\n                  id\n                  registration\n                }\n              `\n                }))\n              }\n            })\n            return [...existingAircraftRefs, ...newAircraftRefs]\n          }\n        }\n      })\n    },\n    onCompleted: ({ addAircrafts }) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, aircrafts ${addAircrafts.reduce((p,c) => p+c.registration+ ', ','')}  added` ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to add aircrafts'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n  })\n\n\n  return(\n\n    <Formik\n      initialValues= {{\n        aircrafts: []\n      }}\n\n      validate = { (values) => {\n\n        const errors = {}\n        if( values.aircrafts.length ){\n          if(!values.aircrafts.match(/^[a-zA-Z, ]+$/)){\n            errors.aircrafts = 'Invalid character detected, check again'\n          }\n\n          const errAircraft =[]\n          forEach(values.aircrafts.split(','), aircraft => {\n            if(aircraft.trim().length < 3) errAircraft.push(aircraft.trim().toUpperCase())\n          })\n          if (errAircraft.length ){\n            errors.aircrafts = `${errAircraft.toString()} invalid Aircraft Registration, should at least 3 characters`\n          }\n\n          /**If no any error then check if the registration is unique */\n          if(!errors.aircrafts){\n            checkAircraftRegistration({ variables:{ registrations: values.aircrafts } })\n            if(duplicateError.length){\n              errors.aircrafts = `Registration ${duplicateError.toString()} already exists.`\n            }\n          }\n\n        }else{\n          errors.aircrafts = 'Enter at least one Aircraft'\n        }\n\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n        const aircrafts = values.aircrafts.toUpperCase().split(',')\n        addAircrafts({ variables:{  registration: aircrafts, costumer: costumer.id } })\n      }}>\n\n      {({ handleSubmit }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select Stations to Add</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <InputField name='aircrafts' label='Aircrafts' type='text' width='8' placeholder='Aircrfat Registrations separeted by comma \",\"'/>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' loading={loading} disabled={loading} positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AddAircraftModal","import { gql, useMutation } from '@apollo/client'\nimport React, { Fragment, useContext } from 'react'\nimport { ADD_CONTACT } from '../../mutations/costumerMutation'\nimport { forEach } from 'lodash'\nimport { Button, Form, Icon, Modal } from 'semantic-ui-react'\nimport { FieldArray, Formik } from 'formik'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { validateEmail } from '../StationReportPage/NewReportForm/validator'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\nconst AddContactModal = ({ open ,setOpen ,costumer }) => {\n  const[,dispatch] = useContext(NotificationContext)\n  const [addContacts] = useMutation (ADD_CONTACT,{\n    update:(store,{ data: { addContact } }) => {\n\n      store.modify({\n        id: `Costumer:${costumer.id}`,\n        fields:{\n          keyContacts(existingContactsRefs, { readField }) {\n\n            let newContactRefs =[]\n\n            forEach(addContact,( contact) => {\n              if(existingContactsRefs.some(ref => readField('id',ref) !== contact.id)){\n                newContactRefs.push(store.writeFragment({\n                  data:contact,\n                  fragment: gql`\n                fragment NewContact on Contact {\n                  id\n                  email\n                  phone\n                  description\n                }\n              `\n                }))\n              }\n            })\n            return [...existingContactsRefs, ...newContactRefs]\n          }\n        }\n      })\n    },\n    onCompleted: ({ addContact }) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, contacts added' ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to add contacts'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n\n  })\n\n  return(\n\n    <Formik\n      initialValues= {{\n        keyContacts: [{ description:'',phone:'' ,email:'' }]\n      }}\n\n      validate = { (values) => {\n\n        const errors = {}\n        if(values.keyContacts.length){\n          forEach(values.keyContacts, (contact,index) => {\n            if(!contact.description){\n              if (!errors.keyContacts) errors.keyContacts=[]\n              if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n              errors.keyContacts[index].description = 'Please provide contact description'\n            }\n\n            if(!contact.phone && !contact.email){\n              if (!errors.keyContacts) errors.keyContacts=[]\n              if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n\n              errors.keyContacts[index].phone = 'At least a phone or a email is required'\n              errors.keyContacts[index].email = 'At least a phone or a email is required'\n            }\n\n            if(contact.email){\n              if(validateEmail(contact.email)){\n                if (!errors.keyContacts) errors.keyContacts=[]\n                if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n                errors.keyContacts[index].email = 'Invalid Email'\n              }\n            }\n\n          }\n          )\n        }\n\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n\n        addContacts({ variables:{ ...values, costumer: costumer.id } })\n      }}>\n\n      {({ handleSubmit ,values }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select Stations to Add</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <FieldArray  name={'keyContacts'}>\n                {({ push,remove }) => (<>\n                  { values.keyContacts.length > 0 && values.keyContacts.map((contact,index) => <Fragment key ={index}>\n                    <Form.Group style={{ margin:0 }} widths='13' ><InputField name={`keyContacts[${index}].description`} label='Description' /><InputField name={`keyContacts[${index}].phone`} label='Phone' /><InputField name={`keyContacts[${index}].email`} label='Email' />\n                      {index !== 0 &&\n                     <Icon\n                       link\n                       name =\"cancel\"\n                       color='red'\n                       onClick={ () => remove(index)\n                       }/>}\n                    </Form.Group>\n                  </Fragment>\n                  )}\n                  <Button\n                    style= {{ marginTop:'1rem' }}\n                    type='button'\n                    circular\n                    icon\n                    size ='mini'\n                    primary\n                    onClick={ () => push ({ description:'',phone:'' ,email:'' })\n                    }>\n                    <Icon name=\"plus\"/>\n                  </Button>\n                </>)}\n              </FieldArray>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AddContactModal","import React from 'react'\nimport { Form, Input, Dropdown, Segment, Header, List, Label } from 'semantic-ui-react'\nimport { TextAreaField } from '../StationReportPage/NewReportForm/FormFields'\nimport { useField, useFormikContext } from 'formik'\nimport _ from 'lodash'\n\nexport const InputField = ({ ...props }) => {\n  const [field, meta] = useField(props)\n  return (\n    <Form.Field>\n      <label>{props.inputlabel }</label>\n      <Input  {...field} {...props}  error= {meta.touched && meta.error} />\n    </Form.Field>\n  )\n\n}\n\n\nexport const RemarkField = ({ name }) => {\n  const { getFieldProps } = useFormikContext()\n  const remarkTitle = getFieldProps(`${name}.title`).value\n  const remarkDate = getFieldProps(`${name}.date`).value\n  const remarkBy = getFieldProps(`${name}.by`).value\n  const remarkText = getFieldProps(`${name}.text`).value\n  const remarkEdit = getFieldProps(`${name}.edit`).value\n\n  if (!remarkTitle || remarkTitle === 'Add Clearification')\n  {\n    return (\n      <Segment basic>\n        {remarkTitle &&\n        <Header as ='h5'>\n          {remarkTitle === 'Add Clearification'&& 'Clearification Added' }\n          <Header.Subheader>by {remarkBy} on {remarkDate}</Header.Subheader>\n        </Header>\n        }\n        <TextAreaField name={`${name}.text`}></TextAreaField>\n      </Segment>\n    )\n  }\n\n  return (\n    <Segment>\n      <Header as ='h5'>\n        {remarkTitle}\n        <Header.Subheader>by {remarkBy} on {remarkDate}</Header.Subheader>\n      </Header>\n      {remarkTitle && <p>{remarkText}</p>}\n      {remarkEdit && <List>\n        {_.map(remarkEdit,(val,k) =>\n          <List.Item key={k}>\n            {k[0].toUpperCase() + k.substring(1).replace(/([a-z])([A-Z])/g, '$1 $2')}:\n            <span style={{ color:'red',fontStyle: 'italic', textDecoration: 'line-through' }}> {val.split('to')[0]} </span>\n            to\n            <span style={{ color:'green' }}> {val.split('to')[1]} </span>\n          </List.Item> )}\n\n      </List> }\n\n    </Segment>\n  )\n\n}\n\nexport const DropDownField = ({ label,...props }) => {\n  const{ setFieldValue }= useFormikContext()\n  const [field,meta] = useField(props)\n  return (\n    <Form.Field error= { meta.touched && meta.error?true:false}>\n      {!props.labeled && <label>{label }</label>}\n      <Input\n        label= {props.labeled? label :false}\n        input = {<Dropdown {...field} {...props}\n          style= {\n            props.labeled? { margin: 0,\n              borderTopLeftRadius: 0,\n              borderBottomLeftRadius: 0 }:{}\n          }\n          onChange = {props.onChange? props.onChange: (e,{ value }) => {\n            setFieldValue(props.name,value)\n          }}\n        ></Dropdown>}></Input>\n      {meta.touched && meta.error &&\n      <Label pointing prompt>\n        {meta.error}\n      </Label>}\n    </Form.Field>\n  )\n\n}","import { useLazyQuery, useMutation } from '@apollo/client'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { ADD_STATION_TO_COSTUMER } from '../../mutations/costumerMutation'\nimport { forEach } from 'lodash'\nimport { Button, Form, Modal } from 'semantic-ui-react'\nimport { Formik } from 'formik'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\nconst AddStationModal = ({ open ,setOpen ,costumer }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const[stationOptions,setStationOptions] = useState([])\n  const [loadStations, { loading:stationLoading, data: stationData }] = useLazyQuery(ALL_STATION)\n\n  useEffect(() => {\n    if(stationData && stationData.allStations){\n\n      const existingStationIds = costumer.stations.map(station => station.id)\n      let options = []\n      /**Set station options, do not display if the station already exists for costumer */\n      stationData.allStations.reduce((p,c,i) => {\n        if(c.id && !existingStationIds.includes(c.id)){\n          options.push( { key:i, value: c.id, text:c.location })\n        }\n        return options\n      },[])\n\n\n      setStationOptions(options)\n    }\n\n  },[costumer.stations, stationData])\n\n  const [addStation] = useMutation (ADD_STATION_TO_COSTUMER,{\n    update: (store,{ data:{ addStationsToCostumer } }) => {\n      /**Add costumer information to each station on cache */\n      forEach(addStationsToCostumer.stations, station => {\n        store.modify({\n          id: `Station:${station.id}`,\n          fields:{\n            costumers(existingCostumerRefs, { readField }) {\n              if(existingCostumerRefs.some(ref => readField('id',ref) === addStationsToCostumer.id)){\n                return existingCostumerRefs\n              }\n              return [...existingCostumerRefs, { '__ref':`Costumer:${addStationsToCostumer.id}` }]\n            }\n          }\n        })\n      })\n    },\n    onCompleted: ({ addStationsToCostumer }) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, stations added' ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to add stations'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n  })\n\n  return(\n\n    <Formik\n      initialValues= {{\n        stations: []\n      }}\n\n      validate = { (values) => {\n        const errors = {}\n        if(!values.stations.length){\n          errors.stations = 'Please select at least one station'\n        }\n\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n        addStation({ variables:{ ...values, costumer: costumer.id } })\n      }}>\n\n      {({ handleSubmit,setFieldValue,dirty }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select Stations to Add</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <DropDownField name='stations' labeled label='Station'\n                placeholder='Select Stations'\n                search\n                loading={stationLoading}\n                selection\n                multiple\n                width='8'\n                options= {stationOptions}\n                onFocus = {() => loadStations()}\n                onChange = {  (e,{ value }) => {\n                  setFieldValue('stations',value)\n                }}\n              >\n              </DropDownField>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n\n\n\n\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AddStationModal","import { useMutation, useQuery } from '@apollo/client'\n\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Button, Flag, Grid, Header, Icon, Label, Loader, Segment, Table } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport {  DELETE_COSTUMER, REMOVE_AIRCRFAT, REMOVE_CONTACT, REMOVE_COSTUMER_FROM_STATION } from '../../mutations/costumerMutation'\nimport { GET_COSTUMER } from '../../queries/costumerQuey'\nimport ConfirmModal from '../ConfirmModal'\nimport AddAircraftModal from './AddAircraftModal'\nimport AddContactModal from './AddContactModal'\nimport AddStationModal from './AddStationModal'\n\nconst CostumerInfo = ({ costumerData ,costumerId }) => {\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const [,dispatch]= useContext(NotificationContext)\n  const [data,setData] = useState('')\n  const [addStationModalOpen,setAddStationModalOpen] = useState(false)\n  const [addAircraftModalOpen,setAddAircraftModalOpen] = useState(false)\n  const [addContactModalOpen,setAddContactModalOpen] = useState(false)\n\n  const params = useParams()\n\n  const history = useHistory()\n  const { loading: costumerLoading ,error: costumerError, data: fetchedData } = useQuery(GET_COSTUMER,{ variables:{ id: params.costumerId ||costumerId }, skip: costumerData })\n\n  const [removeFromStation] = useMutation(REMOVE_COSTUMER_FROM_STATION )\n  const [deleteCostumer] = useMutation(DELETE_COSTUMER, {\n    update: (store) => {\n      store.evict({ //Remove costumer from all datas\n        id: `Costumer:${data.id}`\n      })\n    },\n    onCompleted: () => {\n      history.goBack()\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, costumer ${data.name} deleted` ,type: 'SUCCESS' } })\n\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, failed to delete  costumer ${data.name}`}<br/> {err.message}</> ,type: 'ERROR' } })\n\n    }\n  })\n  const [removeContact] = useMutation( REMOVE_CONTACT )\n  const [removeAircraftMut] = useMutation( REMOVE_AIRCRFAT )\n\n\n  const removeContactFromStation = ({ id, description }) => {\n    removeContact({\n      variables:{ id,costumer: data.id },\n      update: (store) => {\n\n        store.evict({\n          id: `Contact:${id}`\n        })\n      }\n    }).then(\n      res =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, Contact ${description} removed` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot remove Contact ${description}`}<br/> {err.message}</> ,type: 'ERROR' } }),\n    )\n  }\n\n  const removeAircraft = ({ id, registration }) => {\n    removeAircraftMut({\n      variables:{ id },\n      update: (store) => {\n        store.evict({\n          id: `Aircraft:${id}`\n        })\n      }\n    }).then(\n      res =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, Aircraft ${registration} removed` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot remove Aircrfat ${registration}`}<br/> {err.message}</> ,type: 'ERROR' } }),\n    )\n  }\n\n  const removeCostumerFromStation = ({ variables ,location  }) => {\n    removeFromStation({\n      variables: variables,\n      update: (store) => {\n        store.modify({\n          id: `Station:${variables.station}`,\n          fields: { // Remove costumer from station\n            costumers(existingCostumerRefs, { readField }) {\n              return existingCostumerRefs.filter(\n                costumersRef =>  data.id !== readField('id', costumersRef)\n              )\n            }\n          },\n        },\n        )\n\n        store.modify(\n          {\n            id: `Costumer:${data.id}`,\n            fields: { // Remove station from costumer\n              stations(existingStationRefs, { readField }) {\n\n                return existingStationRefs.filter(\n                  stationsRef => {\n\n                    return variables.station !== readField('id', stationsRef)}\n                )\n              }\n            },\n\n          }\n        )\n      } }).then(\n      res =>   {\n        dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, Station ${location? location:''} deassigned for costumer ${data.name}` ,type: 'SUCCESS' } })\n        history.goBack()\n      },\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot deassign costumer ${data.name} ${location?'and '+location : ''}`}<br/> {err.message}</> ,type: 'ERROR' } }),\n    )\n  }\n\n\n\n\n\n  const [confirm,setConfirm] = useState({ title:'',fn: () => {} })\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false)\n\n  useEffect(() => {\n    if(costumerData){\n      setData(costumerData)\n    }\n    if(fetchedData){\n      setData(fetchedData.getCostumer)\n    }\n\n  },[costumerData, fetchedData, setData])\n\n  if(!data){\n    return null\n  }\n\n  if(costumerLoading){\n    return <Segment basic ><Loader active> Adding New Costumer</Loader></Segment>\n  }\n\n  if(costumerError){\n    return <Header as='h4'>Something went wrong</Header>\n  }\n\n  return (\n    <>\n      <Header as='h3'>{data.name}</Header>\n      <Grid padded>\n        <Grid.Row columns='3'>\n          <Grid.Column>\n            <Header as= 'h5'> Aircrafts </Header>\n            <Segment>\n\n              {data.aircrafts && data.aircrafts.map((aircraft,index) =>\n                <Segment key={index} compact style={{ display:'inline-flex', margin:'0.1rem' , width:'4.3rem' }}>\n                  {  staff && staff.permission.admin  &&\n                  <Label floating  size='tiny' style={{ backgroundColor:'transparent' }}>\n                    <Icon link  name='cancel' onClick = {() => {\n                      setConfirm({ title: `Are you sure you want to  deassign Aircraft ${aircraft.registration} from this Costumer ?`, fn: () => {\n                        removeAircraft({ id:aircraft.id, registration: aircraft.registration })\n                      } })\n                      setConfirmModalOpen(true)\n\n                    }}></Icon>\n                  </Label>}\n                  {aircraft.registration}\n                </Segment>)}\n\n              {\n                staff && staff.permission.admin  &&\n                <Button style={{ marginTop:'1rem', display:'block' }}circular icon primary size='small' onClick= {() => setAddAircraftModalOpen(true)}><Icon name='add'/></Button>\n              }\n            </Segment>\n\n\n          </Grid.Column>\n\n          <Grid.Column>\n            <Header as= 'h5'> Key Contacts </Header>\n            <Table>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell> Description </Table.HeaderCell>\n                  <Table.HeaderCell> Phone </Table.HeaderCell>\n                  <Table.HeaderCell> Email </Table.HeaderCell>\n                  <Table.HeaderCell> </Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {\n                  data.keyContacts && data.keyContacts.length > 0 && data.keyContacts.map((contact,index) =>\n                    <Table.Row key={index}>\n                      <Table.Cell>\n                        {contact.description}\n                      </Table.Cell>\n                      <Table.Cell>\n                        {contact.phone}\n                      </Table.Cell>\n                      <Table.Cell>\n                        {contact.email}\n                      </Table.Cell>\n                      { staff && (staff.permission.admin || staff.permission.station.edit.includes (params.stationId)) &&\n                          <Table.Cell>\n                            <Icon link name='cancel' onClick ={() => {\n                              setConfirm({ title: `Are you sure you want to  remove contact ${contact.description} from this Costumer ?`, fn: () => {\n                                removeContactFromStation({ id: contact.id ,description: contact.description })\n                              } })\n                              setConfirmModalOpen(true)\n\n                            }}></Icon>\n                          </Table.Cell>\n                      }\n                    </Table.Row>)\n                }\n              </Table.Body>\n              { staff && (staff.permission.admin || staff.permission.station.edit.includes (params.stationId)) &&\n              <Table.Footer>\n                <Table.Row>\n                  <Table.Cell>\n                    <Button circular icon primary size='small'  onClick= {() => setAddContactModalOpen(true)} ><Icon name='add'/></Button>\n                  </Table.Cell>\n                </Table.Row>\n              </Table.Footer>\n              }\n            </Table>\n\n\n          </Grid.Column>\n\n\n          <Grid.Column >\n            <Header as= 'h5'> Stations </Header>\n            <Table padded>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell> Station </Table.HeaderCell>\n                  <Table.HeaderCell></Table.HeaderCell>\n                  <Table.HeaderCell></Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {\n                  data.stations && data.stations.length > 0 && data.stations.map((station,index) =>\n                    <Table.Row key={index}>\n                      <Table.Cell>\n                        {station.location}\n                      </Table.Cell>\n                      <Table.Cell>\n                        {`${station.address.city} , ${station.address.country}`} <Flag name={station.address.country && station.address.country.toLowerCase()}></Flag>\n                      </Table.Cell>\n                      {staff && (staff.permission.admin || staff.permission.station.edit.includes (params.stationId)) &&\n                        <Table.Cell>\n                          { params.stationId !== station.id &&\n                          <Icon link   name='cancel' onClick={() => {\n                            setConfirm({ title: `Are you sure you want to  remove station ${station.location} from this Costumer ?`, fn: () => {\n                              removeCostumerFromStation({ variables:{ station: station.id, costumer: data.id }, location: station.location })\n                            } })\n                            setConfirmModalOpen(true)\n                          }}/>}\n                        </Table.Cell>}\n                    </Table.Row>)\n                }\n              </Table.Body>\n              { (staff && (staff.permission.admin || staff.permission.station.edit.includes (params.stationId))) &&\n             <Table.Footer>\n               <Table.Row>\n                 <Table.Cell>\n                   <Button circular icon primary size='small' onClick= {() => setAddStationModalOpen(true)}><Icon name='add'/></Button>\n                 </Table.Cell>\n               </Table.Row>\n             </Table.Footer>}\n            </Table>\n\n          </Grid.Column>\n\n        </Grid.Row>\n\n        <Grid.Row>\n          {params.stationId && (staff && (staff.permission.admin || staff.permission.station.edit.map(station => station._id).includes (params.stationId))) &&\n          <Button negative\n            onClick={() => {\n              setConfirm({ title: `Are you sure you want to  remove costumer ${data.name} from this station ?`, fn: () => {\n                removeCostumerFromStation({ variables:{ station: params.stationId, costumer: data.id } })\n              } })\n              setConfirmModalOpen(true)\n            }}> Remove from Station </Button>\n          }\n\n          {!params.stationId && staff && staff.permission.admin &&\n          <Button icon negative\n            onClick={() => {\n              setConfirm({ title: `Are you sure you want to  delete costumer ${data.name} ?` , fn: () => {\n                deleteCostumer({ variables:{ costumer: data.id } })\n\n              } })\n              setConfirmModalOpen(true)\n            }}> <Icon name='trash'/> Delete Costumer </Button>}\n        </Grid.Row>\n      </Grid>\n\n\n      {confirmModalOpen &&\n        <ConfirmModal open= {confirmModalOpen} confirm= {confirm} setOpen= {setConfirmModalOpen} ></ConfirmModal>\n      }\n\n\n      {\n        addStationModalOpen &&\n      <AddStationModal open={addStationModalOpen} setOpen = {setAddStationModalOpen} costumer= {data}></AddStationModal>\n      }\n\n      {\n        addAircraftModalOpen &&\n      <AddAircraftModal open={addAircraftModalOpen} setOpen = {setAddAircraftModalOpen} costumer= {data}></AddAircraftModal>\n      }\n\n      {\n        addContactModalOpen &&\n        <AddContactModal open={ addContactModalOpen} setOpen = {setAddContactModalOpen} costumer= {data}></AddContactModal>\n      }\n\n    </>\n\n\n\n  )\n\n}\n\nexport default CostumerInfo\n\n","import { useLazyQuery, useMutation } from '@apollo/client'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { forEach } from 'lodash'\nimport { Button, Form, Modal } from 'semantic-ui-react'\nimport { Formik } from 'formik'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { ALL_COSTUMERS } from '../../queries/costumerQuey'\nimport { ASSIGN_COSTUMERS } from '../../mutations/stationMutation'\n\nconst AssignCostumersModal = ({ open ,setOpen ,station }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const [costumerList,setCostumerList] = useState([])\n\n  const[loadCostumers, { loading: costumerLoading ,data:costumerData }] = useLazyQuery(ALL_COSTUMERS)\n\n  useEffect(() => {\n    if(costumerData && costumerData.allCostumers){\n\n      const currentCostumers = station.costumers.map(costumer => costumer.id)\n\n      const costumerOptions =costumerData.allCostumers.map((costumer,index) => {\n        return { key:index, value: costumer.id, text: costumer.name }\n      } )\n      setCostumerList(costumerOptions.filter( option => !currentCostumers.includes( option.value)))\n    }\n\n\n  },[costumerData, station.costumers])\n\n  const [addCostumers] = useMutation (ASSIGN_COSTUMERS,{\n    update: (store,{ data:{ assignCostumers } }) => {\n      /**Add station information to each selected costumer on cache */\n      forEach(assignCostumers.costumers, costumer => {\n        store.modify({\n          id: `Costumer:${costumer.id}`,\n          fields:{\n            stations(existingStationsRefs, { readField }) {\n              if(existingStationsRefs.some(ref => readField('id',ref) === station.id)){\n                return existingStationsRefs\n              }\n              return [...existingStationsRefs, { '__ref':`Sation:${station.id}` }]\n            }\n          }\n        })\n      },\n      )\n    },\n    onCompleted: ( response) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, costumers assigned to station' ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to assign costumers'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n  })\n\n  return(\n\n    <Formik\n      initialValues= {{\n        costumers: []\n      }}\n\n      validate = { (values) => {\n        const errors = {}\n        if(!values.costumers.length){\n          errors.costumers = 'Please select at least one costumer'\n        }\n\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n        addCostumers({ variables:{ ...values, stationId: station.id } })\n      }}>\n\n      {({ handleSubmit,setFieldValue }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select costumers to Assign</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <DropDownField name='costumers' labeled label='Costumers'\n                placeholder='Select Costumers'\n                search\n                loading={costumerLoading}\n                selection\n                multiple\n                width='8'\n                options= {costumerList}\n                onFocus = {() => loadCostumers()}\n                onChange = {  (e,{ value }) => {\n                  setFieldValue('costumers',value)\n                }}\n              >\n              </DropDownField>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AssignCostumersModal","import { useMutation } from '@apollo/client'\nimport React, { useContext, useState } from 'react'\n\nimport { forEach } from 'lodash'\nimport { Button, Form, Modal } from 'semantic-ui-react'\nimport { Formik } from 'formik'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { ADD_TO_MAILINGLIST } from '../../mutations/stationMutation'\nimport { validateEmail } from '../StationReportPage/NewReportForm/validator'\n\nconst AddMailingListModal = ({ open ,setOpen ,station }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const [emails,setEmails] = useState([])\n  const [addAircrafts] = useMutation (ADD_TO_MAILINGLIST,{\n    update:(store) => {\n      store.modify({\n        id: `Station:${station.id}`,\n        fields:{\n          mailingList(existingAddresses) {\n\n\n            let newEmails =[]\n\n            forEach(emails, email => {\n              if(!existingAddresses.some(ref => {return ref === email})){\n                newEmails.push(email)\n              }\n            })\n            return [...existingAddresses, ...newEmails]\n          }\n        }\n      })\n    },\n    onCompleted: ({ addAircrafts }) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, emails ${emails.toString()}  added` ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to add emails'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n  })\n\n  return(\n\n    <Formik\n      initialValues= {{\n        emails: ''\n      }}\n\n      validate = { (values) => {\n\n        const errors = {}\n        if(values.emails.length ){\n          const errEmail =[]\n          forEach(values.emails.split(','), email => {\n            if(validateEmail(email.trim())) errEmail.push(email)\n          })\n\n          if (errEmail.length ){\n            errors.emails = `${errEmail.toString()} Invalid emails`\n          }\n        }else{\n          errors.emails = 'Enter at least one Email'\n        }\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n        setEmails(values.emails.split(','))\n        addAircrafts({ variables:{  emails: values.emails.split(','), stationId: station.id } })\n      }}>\n\n      {({ handleSubmit }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select Stations to Add</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <InputField name='emails' label='Emails' type='text' width='8' placeholder='Emails separeted by comma \",\"'/>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AddMailingListModal","import { gql, useMutation } from '@apollo/client'\nimport React, { Fragment, useContext } from 'react'\nimport { forEach } from 'lodash'\nimport { Button, Form, Icon, Modal } from 'semantic-ui-react'\nimport { FieldArray, Formik } from 'formik'\nimport { InputField, TimeInputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { ADD_SHIFTS } from '../../mutations/stationMutation'\n\nconst AddShiftsModal = ({ open ,setOpen ,station }) => {\n  const[,dispatch] = useContext(NotificationContext)\n  const [addShifts] = useMutation (ADD_SHIFTS,{\n    update:(store,{ data: { addShifts } }) => {\n      store.modify({\n        id: `Station:${station.id}`,\n        fields:{\n          shifts(existingShiftsRefs, { readField }) {\n            let newShiftRefs =[]\n\n            forEach(addShifts,(shift) => {\n              if(!existingShiftsRefs.some(ref => readField('id',ref) === shift.id)){\n                newShiftRefs.push(store.writeFragment({\n                  data:shift,\n                  fragment: gql`\n                fragment NewShift on ShiftInfo {\n                  id\n                  name\n                  startTime\n                }\n              `\n                }))\n              }\n            })\n            return [...existingShiftsRefs, ...newShiftRefs]\n          }\n        }\n      })\n    },\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, shifts added' ,type: 'SUCCESS' } })\n      setOpen(false)\n    },\n\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to add shifts'}<br/> {err.message}</> ,type: 'ERROR' } })\n      setOpen(false)\n    }\n\n  })\n\n  return(\n\n    <Formik\n      initialValues= {{\n        shifts: [{ name:'',startTime:'' }]\n      }}\n\n      validate = { (values) => {\n\n        const errors = {}\n        if(values.shifts.length){\n          forEach(values.shifts, (shift,index) => {\n            if(!shift.name){\n              if (!errors.shifts) errors.shifts=[]\n              if (!errors.shifts[index] ) errors.shifts[index] = {}\n              errors.shifts[index].name = 'Please provide shift name'\n            }\n\n            if(!shift.startTime){\n              if (!errors.shifts) errors.shifts=[]\n              if (!errors.shifts[index] ) errors.shifts[index] = {}\n\n              errors.shifts[index].startTime = 'Shift start time is required'\n            }\n\n            if(shift.startTime){\n              if(!shift.startTime.match(/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)){\n                if (!errors.shifts) errors.shifts=[]\n                if (!errors.shifts[index] ) errors.shifts[index] = {}\n\n                errors.shifts[index].startTime = 'Shift start should be on format HH:mm'\n              }\n            }\n\n          }\n          )\n        }\n\n        return errors\n      }\n      }\n      onSubmit= {(values) => {\n\n        addShifts({ variables:{ ...values, stationId: station.id } })\n      }}>\n\n      {({ handleSubmit ,values }) =>\n\n        <Modal\n          open= {open}\n          closeOnEscape= {false}\n          closeOnDimmerClick={false}\n        >\n          <Modal.Header>Select Stations to Add</Modal.Header>\n          <Modal.Content>\n            <Form>\n              <FieldArray  name={'shifts'}>\n                {({ push,remove }) => (<>\n                  { values.shifts.length > 0 && values.shifts.map((shift,index) =>\n                    <Fragment key ={index}>\n                      <Form.Group style={{ margin:0 }} widths='13' >\n                        <InputField name={`shifts[${index}].name`} placeholder='Shift Name' />\n                        <TimeInputField name={`shifts[${index}].startTime`} label placeholder='Start Time'></TimeInputField>\n\n                        {index !== 0 &&\n                     <Icon\n                       link\n                       name =\"cancel\"\n                       color='red'\n                       onClick={ () => remove(index)\n                       }/>}\n                      </Form.Group>\n                    </Fragment>\n                  )}\n                  <Button\n                    style= {{ marginTop:'1rem' }}\n                    type='button'\n                    circular\n                    icon\n                    size ='mini'\n                    primary\n                    onClick={ () => push ({ name:'',startTime:'' })\n                    }>\n                    <Icon name=\"plus\"/>\n                  </Button>\n                </>)}\n              </FieldArray>\n            </Form>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button type='submit' positive onClick= { (e) => {\n              e.preventDefault()\n              handleSubmit()\n            }\n            }> Add </Button>\n            <Button type='button' negative onClick = {() => setOpen(false)}> Cancel </Button>\n          </Modal.Actions>\n        </Modal>}\n\n    </Formik>\n\n\n\n\n  )\n\n\n}\n\nexport default AddShiftsModal","import { useMutation } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext } from 'react'\nimport { Button, Dimmer, Form, Grid, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { CHANGE_STATION_KEY } from '../../mutations/stationMutation'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nconst ResetStationKeyModal = (props) => {\n\n  const [,dispatch] = useContext(NotificationContext)\n  const [changekey,{ loading }] = useMutation(CHANGE_STATION_KEY,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, key reset ' ,type: 'SUCCESS' } })\n      props.setOpen(false)\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to change key'}<br/> {err.message}</> ,type: 'ERROR' } })\n      props.setOpen(false)\n    }\n  })\n\n\n  const initVal = {\n    newKey:'',\n    confirmKey:''\n  }\n\n  return(\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {props.open}\n      onClose= {() =>  props.setOpen(false)}\n      onOpen= {() => props.setOpen (true)}\n    >\n      <ModalHeader>StationKey Reset</ModalHeader>\n      <ModalContent>\n\n        {loading &&\n            <Dimmer active>\n              Updating key\n              <Loader />\n            </Dimmer>\n        }\n\n        <Formik\n          initialValues = { initVal }\n          validate= {(values) =>\n          {\n            const errors = {}\n\n\n            if(!values.newKey ){\n              errors.newKey = 'New key cannot be empty'\n            }\n\n            if(values.newKey !== values.confirmKey){\n              errors.confirmKey = 'New key and confirm key must match'\n            }\n\n            return errors\n          }\n\n          }\n          onSubmit= {(values) => {\n            changekey({ variables:{ stationId:props.station.id, stationKey: values.newKey } })\n\n          }}\n        >\n          {({ handleSubmit,dirty ,errors }) => <Form style={{ marginBottom:'5rem' }} onSubmit= {handleSubmit}>\n            <Grid>\n              <Grid.Row>\n                <InputField name='newKey' label='New key' type='password'/>\n              </Grid.Row>\n              <Grid.Row>\n                <InputField  name='confirmKey' label='Confirm key' type='password'/>\n              </Grid.Row>\n            </Grid>\n            {dirty && _.isEmpty(errors) &&\n            <Button type='submit' style={{ marginTop: '1rem' }} positive>Change key</Button>}\n\n          </Form>\n          }\n        </Formik></ModalContent>\n    </Modal>\n\n  )\n}\n\nexport default ResetStationKeyModal","import { useMutation, useQuery } from '@apollo/client'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Button, Form, Grid, Header, Icon, Segment, Table } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { DELETE_STATION, REMOVE_FROM_MAILINGLIST, REMOVE_SHIFTS } from '../../mutations/stationMutation'\nimport { GET_STATION } from '../../queries/stationQuery'\nimport ConfirmModal from '../ConfirmModal'\nimport AddMailingListModal from './AddMailingListModal'\nimport AddShiftsModal from './AddShiftsModal'\nimport ResetStationKeyModal from './ResetStationKeyModal'\n\nconst Settings = (props) => {\n  const loggedInStaff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const [,dispatch] = useContext(NotificationContext)\n  const[confirmModalOpen, setConfirmModalOpen] = useState(false)\n  const[addShiftsModalOpen,setAddShiftsModalOpen] = useState(false)\n  const[addMailingListModalOpen,setAddMailingListModalOpen] = useState(false)\n  const[resetStationKeyModalOpen,setResetStationKeyModalOpen] = useState(false)\n\n  const [confirm,setConfirm] = useState({ title:'',fn:() => {} })\n  const [stationData,setStationData ] = useState(props.data)\n  const history = useHistory()\n  let stationId = useParams().stationId\n\n  const { data } = useQuery(GET_STATION,{\n    variables:{ id:stationId },\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, could not retrive Station'}<br/> {err.message}</> ,type: 'ERROR' } })\n    } })\n\n  useEffect(() => {\n    if(data && data.getStation){\n      setStationData(data.getStation)\n    }\n  }, [data])\n\n  /**Delate Station Mutation */\n  const [deleteStation] = useMutation(DELETE_STATION,{\n    variables:{ stationId: stationId },\n    update: (store) => {\n      store.evict({\n        id: `Station:${stationId}`\n      })\n    },\n    onCompleted: ({ addContact }) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Station Deleted' ,type: 'SUCCESS' } })\n      history.push('/Manage/AllStations')\n    },\n    onerror: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to delete Station'}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n\n  /**Delete from mailinglist mutaiton */\n\n  const [deleteFromMailingList] = useMutation(REMOVE_FROM_MAILINGLIST)\n  const deleteFromMailingMutation = (email) => {\n    deleteFromMailingList({\n      variables:{ email: email, stationId: stationId },\n      update:(store) => {\n        store.modify({\n          id: `Station:${stationId}`,\n          fields:{\n            mailingList(existingEmails){\n              return [...existingEmails.filter(item => item !== email )]\n            }\n          }\n        })\n      }\n\n    }).then(\n      res => dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, ${email} removed from mailing list `  ,type: 'SUCCESS' } }),\n      err => dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Error, coluld not remove email' ,type: 'ERROR' } })\n\n    )\n  }\n\n  /**Delete shift mutaiton */\n\n  const [deleteShift] = useMutation(REMOVE_SHIFTS)\n  const removeShift = (id,shiftName) => {\n    deleteShift({\n      variables:{ id: id, stationId: stationId },\n      update:(store) => {\n        store.evict({\n          id: `ShiftInfo:${id}`\n        })\n      }\n    }).then(\n      res => dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, ${shiftName} shift removed from station `  ,type: 'SUCCESS' } }),\n      err => dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Error, coluld not remove shift' ,type: 'ERROR' } })\n\n    )\n  }\n\n  return (\n    <>\n      <Grid padded>\n        <Grid.Row>\n          <Segment basic attached>\n            <Header as ='h5'>Mailing List\n              <Header.Subheader>Below emails will receive the shift reports on submit.</Header.Subheader></Header>\n            <Table attached  compact collapsing padded>\n              <Table.Body>\n                {stationData && stationData.mailingList.map((email,i) =>\n                  <Table.Row key={i}>\n                    <Table.Cell>{email}</Table.Cell>\n                    <Table.Cell><Icon link name='trash'\n                      onClick={\n                        () => {\n                          setConfirmModalOpen(true)\n                          setConfirm({ title:' Are you sure you want to delete this email' , fn :() => deleteFromMailingMutation(email) }) }}\n                    ></Icon></Table.Cell>\n                  </Table.Row>\n                )}\n              </Table.Body>\n            </Table>\n            <Form.Button style={{ marginTop:'0.5rem' }}primary size='tiny' onClick={() => setAddMailingListModalOpen(true)}> Add More </Form.Button>\n          </Segment>\n          <Segment basic attached>\n            <Header as ='h5'>Shifts\n              <Header.Subheader>Below are the working shifts for this station. </Header.Subheader></Header>\n            <Table attached  compact collapsing padded>\n              <Table.Body>\n                {stationData && stationData.shifts.map((shift,i) =>\n                  <Table.Row key={i}>\n                    <Table.Cell>{shift.name } <strong>starts at</strong> {shift.startTime}</Table.Cell>\n                    <Table.Cell><Icon link name='trash'\n                      onClick={\n                        () => {\n                          setConfirmModalOpen(true)\n                          setConfirm({ title:' Are you sure you want to remove this shift' , fn :() => removeShift(shift.id, shift.name) }) }}></Icon></Table.Cell>\n                  </Table.Row>\n                )}\n              </Table.Body>\n            </Table>\n            <Form.Button style={{ marginTop:'0.5rem' }}primary size='tiny' onClick= {() => setAddShiftsModalOpen(true)}> Add More </Form.Button>\n          </Segment>\n          <Segment attached>\n            <Header as ='h5'>Staff signing mehtods\n              <Header.Subheader>Staff can sign and report working hours using following Methods </Header.Subheader></Header>\n            <p>This feature is not Implmented yet. By default, user should sign with his credentials.</p>\n          </Segment>\n          <Segment attached>\n            <Button\n              primary\n              onClick={\n                () => {\n                  setResetStationKeyModalOpen(true)}}> Reset station key </Button>\n          </Segment>\n\n        </Grid.Row>\n\n      </Grid>\n      {\n        loggedInStaff.permission.admin && <Button\n          negative\n          onClick={\n            () => {\n              setConfirmModalOpen(true)\n              setConfirm({ title:' Are you sure you want to delete this station' , fn :() => deleteStation() }) }}> DELETE STATION </Button>}\n      {confirmModalOpen &&\n        <ConfirmModal open= {confirmModalOpen} confirm= {confirm} setOpen= {setConfirmModalOpen} ></ConfirmModal>\n      }\n\n      {addShiftsModalOpen &&\n        <AddShiftsModal station= {stationData} open= {addShiftsModalOpen} setOpen= {setAddShiftsModalOpen}></AddShiftsModal>\n      }\n\n      {addMailingListModalOpen &&\n        <AddMailingListModal station= {stationData} open= {addMailingListModalOpen} setOpen= {setAddMailingListModalOpen}></AddMailingListModal>\n      }\n\n      {resetStationKeyModalOpen &&\n        <ResetStationKeyModal station= {stationData} open= {resetStationKeyModalOpen} setOpen= {setResetStationKeyModalOpen}></ResetStationKeyModal>\n      }\n    </>\n  )\n\n\n}\nexport default Settings","import React from 'react'\nimport { useHistory, useLocation } from 'react-router-dom'\nimport { Menu } from 'semantic-ui-react'\n\nconst StationMenu = ({ station ,activeItem, setActiveItem ,setActiveCostumer }) => {\n  const history = useHistory()\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const location = useLocation()\n\n  const navigatePath = (page) => {\n    const aar = location.pathname.split('/').filter(path => path !== '')\n\n    const navPath = aar.reduce((p,c,i) => {\n      if(c === activeItem || aar.length- 1 === i){ //If the current item on iteration is current page exit reduce\n        aar.splice(1)\n        return p\n      }\n      return p+'/'+c\n    },'')\n\n    return navPath+'/'+page\n  }\n\n  const handleMenuClick = (e, { name }) => {\n    setActiveItem(name)\n    /**Reset the costumer page back to list mode */\n    setActiveCostumer('')\n    /**If the stationInfo is being viewed from shiftRporting page then url navigation is disabled so we don't push aciveitem*/\n    if(activeItem !== name && staff){\n      history.push(navigatePath(name))\n    }\n\n  }\n  return (\n    <Menu pointing secondary >\n      <Menu.Item header>{station.location}</Menu.Item>\n      <Menu.Item\n        position='right'\n        name='BasicInfo'\n        active = {activeItem === 'BasicInfo'}\n        onClick={handleMenuClick}\n      />\n\n      <Menu.Item\n        name='Procedures'\n        active = {activeItem === 'Procedures'}\n        onClick={handleMenuClick}\n      />\n\n      <Menu.Item\n        name='Costumers'\n        active = {activeItem === 'Costumers'}\n        onClick={handleMenuClick}\n      />\n\n      {staff && (staff.permission.admin || staff.permission.station.edit.map(station => station._id).includes(station.id) ) &&\n      <Menu.Item\n        name='Settings'\n        active = {activeItem === 'Settings'}\n        onClick={handleMenuClick}\n      />}\n    </Menu>\n\n  )}\n\nexport default StationMenu","import { useQuery } from '@apollo/client'\nimport React, { Fragment, useEffect, useState } from 'react'\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom'\nimport { Breadcrumb, BreadcrumbDivider, BreadcrumbSection, Button, Card, Flag, Grid, Header, Icon, Loader, Segment, Table } from 'semantic-ui-react'\nimport { GET_STATION } from '../../queries/stationQuery'\nimport { formatDate } from '../../utils/DateHelper'\nimport CostumerInfo from '../CostumerInfo'\nimport AssignCostumersModal from './AssignCostumersModal'\nimport Settings from './Settings'\nimport StationMenu from './stationMenu'\n\nconst StationInfo = (props) => {\n  const [stationData, setStationData] = useState('')\n  const [activeItem,setActiveItem] = useState('BasicInfo')\n  const [activeCostumer,setActiveCostumer] = useState('')\n  const [assignCostumerModalOpen, setAssignCostumerModalOpen] = useState(false)\n  const history = useHistory()\n  const location = useLocation()\n  const locationPaths = location.pathname && location.pathname.split('/').filter(path => path)\n\n  const params = useParams()\n\n  useEffect(() => {\n    if(params.page){\n      setActiveItem(params.page)\n    }\n  },[params])\n\n  let stationId = useParams().stationId\n\n  /** If stationId is passed as props then passed stationId should have precedence over params */\n  if(props.stationId){\n    stationId = props.stationId\n  }\n\n  const loggedInStaff = JSON.parse( sessionStorage.getItem('staffKey'))\n\n  const { loading,data } = useQuery(GET_STATION, {\n    variables: { id: stationId },\n    skip: !stationId,\n  })\n\n  useEffect (() => {\n    if(data) {\n      setStationData(data.getStation)\n    }\n  },[data])\n\n  /**Gets bredcrumb item link\n   * @param {Int} index - indexNumber of current item on fullpath\n   */\n  const getBreadCrumbLink = (index) => {\n    const arr = [...locationPaths]\n    const link = arr.reduce((p,c,i) => {\n      if(i > index){ // stop at current page\n        arr.splice(1)\n        return p\n      }\n      return p+'/'+c\n    },'')\n\n    return link\n\n  }\n\n  if(!stationId || !stationData || loading ){\n    return(\n      <Segment basic>\n        <Loader active>Loading Station</Loader>\n      </Segment>\n    )\n\n  }\n\n  return (\n    <>\n      { loggedInStaff &&\n        <Breadcrumb>\n          {locationPaths.map((path,index) => {\n            if(index === 0) { //Skip for base page\n              return ''\n            }\n            return (\n              <Fragment key={index}>\n                <BreadcrumbSection\n                  active= {index === locationPaths.length-1  }\n                  as={index < locationPaths.length-1?Link:''} //as Link previous Page\n                  to ={ getBreadCrumbLink(index)}\n                >\n                  {index===2 && stationData.location}\n                  {index===4 && locationPaths[index-1].toLowerCase() === 'costumers' && //If the path is costumerId then display costumer name else it must be procedure, display procdure id\n                 stationData.costumers.filter(costumer => costumer.id === path)[0] && stationData.costumers.filter(costumer => costumer.id === path)[0].name\n                  }\n                  {\n                    index !== 2 && index !== 4 &&\n                  path\n                  }\n\n                </BreadcrumbSection>\n                { index < locationPaths.length-1 &&\n              <BreadcrumbDivider></BreadcrumbDivider>}\n              </Fragment>\n            )\n          })}\n        </Breadcrumb>\n      }\n\n      <StationMenu station= {stationData} activeItem ={activeItem} setActiveItem= {setActiveItem} setActiveCostumer ={setActiveCostumer}> </StationMenu>\n      {activeItem === 'BasicInfo' &&\n        <Grid padded>\n          <Grid.Row columns='4'>\n            <Grid.Column >\n              <Header as ='h4' >Address:\n                <Header.Subheader>{stationData.address.street }<br/>\n                  {stationData.address.postcode }{stationData.address.city}<br/>\n                  {stationData.address.country} <Flag name={stationData.address.country.toLowerCase()}></Flag></Header.Subheader>\n              </Header>\n            </Grid.Column>\n            <Grid.Column>\n              <Header as ='h4' >Contact:\n                <Header.Subheader><strong>Email: </strong> {stationData.email}<br/>\n                  <strong>Phone: </strong>\n                  {stationData.phone.reduce((p,c) => p + ' / ' + c)}</Header.Subheader>\n              </Header>\n            </Grid.Column>\n            <Grid.Column>\n              <Header as ='h4' >Shifts:\n                {stationData.shifts.map((shift,i) => <Header.Subheader key={i}> {shift.name} <strong> Starts at: </strong> {shift.startTime}<br/></Header.Subheader> )}\n              </Header>\n            </Grid.Column>\n          </Grid.Row>\n          <Grid.Row>\n            <Grid.Column>\n              <Header as ='h4'>Current Staffs:</Header>\n              <Table collapsing>\n                <Table.Header>\n                  <Table.Row>\n                    <Table.HeaderCell > Name </Table.HeaderCell>\n                    <Table.HeaderCell> Last Active At:  </Table.HeaderCell>\n                  </Table.Row>\n                </Table.Header>\n                <Table.Body>\n                  {stationData.staffList.length > 0 && stationData.staffList.map((staff,i ) => <Table.Row key={i}>\n                    <Table.Cell>\n                      {\n                        loggedInStaff && loggedInStaff.permission.staff.view?\n                          <Link to={`/Manage/AllStaffs/${staff.id}/Profile`}>{staff.name}</Link>: staff.name\n                      }\n                    </Table.Cell>\n                    <Table.Cell>{formatDate(staff.lastActive.activeAt)}</Table.Cell>\n                  </Table.Row>\n                  )}\n                </Table.Body>\n              </Table>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      }\n\n      {activeItem === 'Procedures' &&\n      <Header as='h5'> This Station Procedure feature is not Implemented yet, will be implemanted soon ...\n        <Header.Subheader>\n          After this implemetation, one will be able to add/ view / search all the station related procedure such as 'Garbage Disposal , Hanger Booking , Supplies Delivery ...' on this section\n        </Header.Subheader>\n      </Header>}\n\n      {activeItem === 'Costumers' && ! (params.costumerId || activeCostumer) &&\n      <>\n        <Card.Group>\n          {stationData.costumers && stationData.costumers.map(costumer =>\n            <Card key={costumer.id} link raised\n              onClick = {() => {\n                if(loggedInStaff){\n                  history.push(`${location.pathname}/${costumer.id}`)\n                }else{\n                  setActiveCostumer(costumer.id)\n                }\n\n              }}>\n              <Card.Content textAlign='center' header = {costumer.name} />\n              <Card.Content textAlign='center' >{costumer.contract? costumer.contract + ' Contract':''}</Card.Content>\n              <Card.Content textAlign='center' extra>\n                <Header as ='h5'> <Icon name='plane'/> Total Aircrafts: {costumer.aircrafts.length}</Header>\n              </Card.Content>\n            </Card>)}\n        </Card.Group>\n        {loggedInStaff && (loggedInStaff.permission.admin || loggedInStaff.permission.station.edit.map(station => station._id).includes(stationId)) &&\n        <Segment basic compact>\n          <Button primary icon onClick = {() => setAssignCostumerModalOpen(true)}>\n            <Icon name='add circle' /> Add More\n          </Button>\n          {assignCostumerModalOpen &&\n          <AssignCostumersModal open={assignCostumerModalOpen} setOpen={setAssignCostumerModalOpen} station={stationData}></AssignCostumersModal>\n          }\n\n\n        </Segment>}\n      </>\n\n      }\n\n      {activeItem === 'Costumers' && (params.costumerId || activeCostumer) &&\n       <CostumerInfo costumerId = {activeCostumer}></CostumerInfo>\n      }\n\n      {activeItem === 'Settings' &&\n      <Settings data={stationData}></Settings>\n      /**<Header as='h5'> This Station Settings feature is not Implemented yet, will be implemanted soon ...\n        <Header.Subheader>\n          After this implemetation, one will be able to change station settings such as 'SignIn/Off Work Methods', 'Add Remove Shifts', 'Number of active reporting', 'Change Station Key'\n        </Header.Subheader>\n      </Header>*/}\n    </>\n  )\n\n\n}\nexport default StationInfo","import {  useQuery } from '@apollo/client'\nimport React from 'react'\nimport { useEffect } from 'react'\nimport { useState } from 'react'\nimport { Dropdown,Form } from 'semantic-ui-react'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { getMonthOptions, getWeekNumber, getWeekOptions } from '../../utils/DateHelper'\n\nconst ShiftReportFilter = ({ setFilter }) => {\n  const today = new  Date()\n  const loggedInStaff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const loggedInStation = JSON.parse(sessionStorage.getItem('stationKey'))\n  const[filterBy,setFilterBy] = useState('week')\n  const[number,setNumber] = useState(getWeekNumber(today))\n  const [stations,setStations] = useState(loggedInStation?[loggedInStation.id]: [])\n  const [stationOptions,setStationOptions] = useState(loggedInStaff && loggedInStaff.permission.station.edit.map((station,index ) => {\n    return { key: index, value:station._id, text: station.location }})\n  ) //Setting the permitted station list\n\n  /**If staff has admin rights then all station should be displayed in options */\n  const { loading: stationLoading, data: stationData  } = useQuery(ALL_STATION,{ skip: !(loggedInStaff && loggedInStaff.permission.admin) })\n\n\n  useEffect(() => {\n    if(stationData && stationData.allStations){\n      const stOpt=  stationData.allStations.map((station,i) => {\n        return { key: i, value:station.id, text: station.location }\n      })\n      setStationOptions(stOpt)\n    }\n  }, [stationData])\n\n  useEffect(() => {\n    setFilter({ stations, filterBy, number })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[filterBy, number, stations])\n\n\n  return(\n    <Form>\n\n\n      <Form.Group>\n        { /**Sttion options isonly visible if staff has peemission to edit that station or is admin  */\n          loggedInStaff && (loggedInStaff.permission.station.edit.length || loggedInStaff.permission.admin ) &&\n          <Form.Field>\n            <Dropdown\n              loading= {stationLoading}\n              selection\n              multiple\n              options = { stationOptions}\n              onChange ={(e,{ value }) => {\n                setStations(value)\n              }}\n              placeholder= 'Select Station'\n              value = {stations}/>\n          </Form.Field>\n        }\n\n\n        <Form.Field>\n          <Dropdown\n            selection\n            options = {[ { key:1 ,text: 'Month' , value: 'month' }, { key:2 ,text: 'Week' , value: 'week' }]}\n            onChange = {(e,{ value }) => {\n              setFilterBy(value)\n              if(value==='month') {\n                setNumber (today.getMonth())\n              }else {\n                setNumber (getWeekNumber(today))\n              }\n\n            }\n            }\n            value = {filterBy}/>\n        </Form.Field>\n        <Form.Field>\n          <Dropdown\n            compact = { filterBy === 'month'? false:true }\n            selection\n            options = { filterBy === 'month'?getMonthOptions(4):getWeekOptions(4)}\n            onChange ={(e,{ value }) => {\n              setNumber(value)\n            }}\n            value = {number}/>\n        </Form.Field>\n      </Form.Group>\n    </Form>\n\n  )\n\n\n}\nexport default ShiftReportFilter","import { useLazyQuery } from '@apollo/client'\nimport React ,{  } from 'react'\nimport { Loader, Header, Modal } from 'semantic-ui-react'\nimport { GET_SHIFT_REPORT } from '../../queries/shiftReportQuery'\n\nimport ShiftReport from '.'\n\n\nconst ReportViewModal = ({ openReport,setOpenReport }) => {\n  const [getReport,{ error,loading,data }] = useLazyQuery(GET_SHIFT_REPORT)\n\n  const onMount = () => {\n    if(openReport.id) {\n      getReport({ variables:{ id: openReport.id } })\n    } else{\n      setOpenReport({ ...openReport,id:'', open: false })\n    }\n\n\n  }\n\n  return (\n    <Modal\n      onClose={() => setOpenReport({ id:'',open:false })}\n      onMount={() => onMount()}\n      open= {openReport.open}\n    >\n      { error &&\n      <>\n        <Modal.Content> <Header as ='h5'>Oouch...Something Went Wrong, Please try again</Header> </Modal.Content>\n      </>\n      }\n      { loading &&\n      <Loader active>Retriving Report</Loader>\n\n      }\n\n      {data && data.getShiftReport &&\n      <>\n        <Modal.Header>Shift Report: {data.getShiftReport.startTime.split(' ')[0]} {data.getShiftReport.station.location} {data.getShiftReport.shift} shift</Modal.Header>\n        <Modal.Content>\n          <ShiftReport reportData = {data.getShiftReport}> </ShiftReport>\n        </Modal.Content></>\n      }\n    </Modal>\n  )\n\n}\n\nexport default ReportViewModal","import React ,{ Fragment, useEffect, useState } from 'react'\nimport { Table,Loader, List, Header, Message } from 'semantic-ui-react'\nimport _ from 'lodash'\n\nimport ReportViewModal from '../ShiftReport/ReportViewModal'\nimport { useQuery } from '@apollo/client'\nimport { GET_REPORTLIST } from '../../queries/shiftReportQuery'\nimport { getFilterYear } from '../../utils/DateHelper'\n\n\nconst ReportsTable = ({ filter }) => {\n\n  const [transformedData, setTransformedData ] = useState()\n  const [openReport,setOpenReport]= useState({ id:'', open: false })\n\n\n  const variables = { ...filter }\n\n  variables.year = getFilterYear(filter.filterBy, filter.number)\n  const { error,data, loading } = useQuery(GET_REPORTLIST, { variables: variables, skip : !(variables.stations.length && variables.year && !isNaN(variables.number)) })\n\n  useEffect(() => {\n    if(data) {\n      let transformingData\n      transformingData = { ...data.getReportList }\n      transformingData = _.groupBy(transformingData, report => report.startTime.split(' ')[0] )\n      transformingData = _.mapValues(transformingData, date => _.groupBy(date,report => report.station.location))\n      setTransformedData(transformingData)\n    }\n\n  }, [data])\n\n  if (error) {\n    return (\n      <Message error>\n        <Header as ='h5'>Something Went Wrong, Please try again</Header>\n      </Message>\n    )\n  }\n  if (loading ) {\n    return (\n      <Loader active>Fetching Reports</Loader>\n    )\n  }\n\n  if(data && !data.getReportList.length){\n    return <Header as='h5'> No reports found</Header>\n  }\n\n  if(!variables.stations.length){\n    return <Message ><Header textAlign='center' as='h5'> No station selected. Please select a station</Header></Message>\n  }\n\n\n  return (\n\n    <>\n      { transformedData &&\n       <Table  compact celled striped structured>\n         <Table.Header>\n           <Table.Row><Table.HeaderCell> Date </Table.HeaderCell><Table.HeaderCell textAlign='center'> Station </Table.HeaderCell><Table.HeaderCell> Shift </Table.HeaderCell></Table.Row>\n         </Table.Header>\n         <Table.Body>\n           {transformedData && _.map(transformedData,(stations,date) =>\n             <Fragment key = {date}>\n               {Object.entries(stations).map(([station,reports],index) =>\n                 <Table.Row  key = {station}>\n                   {index === 0 && <Table.Cell collapsing rowSpan={Object.keys(transformedData[date]).length}>{date}</Table.Cell>}\n                   <Table.Cell textAlign='center' >{station}</Table.Cell>\n                   <Table.Cell>\n                     <List horizontal>\n                       {_.map(reports, report =>\n                         <List.Item as = 'a' key={report.id}\n                           onClick = {() => {\n                             setOpenReport({ id: report.id,open:true })\n                           }}>{report.shift}\n                         </List.Item>)}\n                     </List>\n                   </Table.Cell>\n                 </Table.Row>\n               )\n               }</Fragment>\n           )\n           }\n         </Table.Body>\n       </Table>}\n      <ReportViewModal setOpenReport= {setOpenReport} openReport={openReport}></ReportViewModal>\n    </>\n  )\n}\n\nexport default ReportsTable","import React ,{ useState } from 'react'\nimport ShiftReportFilter from './ShiftReportFilter'\nimport ReportsTable from './ReportsTable'\n\nconst ShiftReportsList = () => {\n\n  const [filter,setFilter] = useState({\n    slectBy:'',\n    number:'',\n    stations:[],\n  })\n\n\n  return (\n    <>\n      <ShiftReportFilter setFilter={setFilter}></ShiftReportFilter>\n      <ReportsTable filter={filter}></ReportsTable>\n    </>\n  )\n}\n\nexport default ShiftReportsList","import React,{ useState, useContext, useReducer, useEffect } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { GET_SHIFT_REPORT } from '../../queries/shiftReportQuery'\nimport { useParams, useHistory } from 'react-router-dom'\nimport { Loader,Image,Segment, Header } from 'semantic-ui-react'\nimport MenuBar from './MenuBar'\nimport ShiftReport from '../ShiftReport'\nimport Context from './Context'\nimport reducer from './stationReducer'\nimport { GET_STATION } from '../../queries/stationQuery'\nimport NewReportForm from './NewReportForm'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport StationInfo from '../StationInfo/Index'\nimport ShiftReportsList from '../ShiftReportsList'\n\n\nconst StationReportPage = () => {\n  const history = useHistory()\n\n  const initialState = useContext(Context)\n  const [state,dispatch] = useReducer(reducer, initialState)\n\n  const [,notificationDispatch] = useContext(NotificationContext)\n\n  if(!JSON.parse( sessionStorage.getItem('stationKey'))){\n    history.push('/')\n  }\n\n  const params = useParams()\n  const id =params.id\n  const station = params.station\n\n  const [activeItem, setActiveItem] = useState('lastShiftReport')\n\n  let queryParams\n\n  if (station && id ){\n    queryParams = {\n      station: id,\n      flag:'MOST_RECENTLY_COMPLETED'\n    }\n  }\n\n  const useMultipleQuery = () => {\n    const res1 = useQuery(GET_SHIFT_REPORT,{\n      variables:queryParams, skip : activeItem !== 'lastShiftReport',\n      onError: () => notificationDispatch({ type:'ADD_NOTIFICATION',  payload:{ content: errorReport.message ,type: 'ERROR' } }) })\n    const res2 = useQuery(GET_STATION,{ variables:{ id: id } })\n    return [res1, res2]\n  }\n\n  const [\n    { loading:loadingReport, error:errorReport, data: dataReport },\n    {  data: dataStation }\n  ] = useMultipleQuery()\n\n  useEffect(() => {\n    if(dataStation) dispatch({ type:'INIT_STATION',payload:dataStation.getStation })\n  },[dataStation])\n\n  useEffect(() => {\n    if(dataReport) dispatch({ type:'ADD_LASTSHIFTREPORT',payload:dataReport.getShiftReport })\n  },[dataReport])\n\n  //const { loading:loadingReport, error:errorReport, data: dataReport } = useQuery(GET_SHIFT_REPORT,{ variables:queryParams })\n\n\n\n  if (loadingReport) {\n    return (\n      <Loader active>Fetching Data</Loader>\n    )\n  }\n\n  return (\n    <>\n      <Context.Provider value={{ state, dispatch }}>\n        <Segment  basic>\n          <Header textAlign =\"right\" color =\"blue\" floated=\"right\">Shift Reporting System <br/><span><h5> Station: {dataStation && dataStation.getStation.location} </h5></span></Header>\n          <Image src='\\LogoBig.png' size=\"medium\" />\n        </Segment>\n\n        <MenuBar activeItem= {activeItem} setActiveItem={setActiveItem}/>\n\n        { activeItem === 'lastShiftReport' &&\n          <ShiftReport reportData= {dataReport && dataReport.getShiftReport}  />\n        }\n        { activeItem === 'browseAllReports' &&\n          <ShiftReportsList  />\n        }\n\n        {activeItem === 'startNewReport'&&\n          //<NewReportShiftSelectModel  stationId={id} ></NewReportShiftSelectModel>\n          <NewReportForm  setActiveItem={setActiveItem}></NewReportForm>\n        }\n\n        {activeItem === 'stationInfo'&&\n          //<NewReportShiftSelectModel  stationId={id} ></NewReportShiftSelectModel>\n          <StationInfo stationId={id}></StationInfo>\n        }\n      </Context.Provider>\n    </>\n  )\n}\n\nexport default StationReportPage\n\n","import { gql } from '@apollo/client'\nexport const LOGIN_STAFF = gql`\n  mutation staffLogin($username: String!, $password:String!){\n    staffLogin(username: $username, password: $password) \n  }\n`\n\nexport const RESET_PASSWORD = gql`\nmutation resetPassword ($resetCode: String!, $password: String!){\n  resetPassword(\n    password: $password,\n    resetCode: $resetCode\n  ){\n    status\n    message\n  }\n}`\n\nexport const RESET_REGISTER_CODE = gql`\nmutation resetRegisterCode ($id: String!){\n  resetRegisterCode(\n    id: $id,\n  ){\n    status\n    message\n  }\n}`\n\nexport const RESET_PASSWORD_REQ = gql`\nmutation resetPasswordReq ($id: String!){\n  resetPasswordReq(\n    id: $id,\n  ){\n    status\n    message\n  }\n}`\n\nexport const CHANGE_PASSWORD = gql`\nmutation changePassword ( $id: String!, $password: String!, $newPassword: String! ){\n  changePassword ( \n    id: $id,\n    password: $password,\n    newPassword: $newPassword\n    ){\n      status\n      message\n    }\n}`\n\nexport const STAFF_EDIT = gql`\nmutation staffEdit($id:String! $email:String, $phone: String , $contractType: String , $reqHours: Float , $position :String){\n  staffEdit(\n    id: $id,\n    email:$email,\n    phone:$phone,\n    contractType: $contractType,\n    reqHours: $reqHours,\n    position: $position\n  ){\n    id\n    email\n    phone\n    contractType\n    reqHours\n    position\n  }\n}`\n\nexport const STAFF_ADD = gql`\n  mutation addStaff( $name: String!, $email: String!, $contractType: String! , $ contractHours: Int!, $position: String, $idCardCode: String){\n    addStaff(\n      name: $name,\n      email:$email,\n      contractType: $contractType,\n      contractHours: $contractHours,\n      position: $position\n      idCardCode: $idCardCode\n    ){\n      id,\n      name,\n      email,\n      phone\n    }\n  }\n`\n\nexport const SET_STAFF_STATUS= gql`\n  mutation toggleleStaffStatus( $id: String!, $disabled: Boolean! ){\n    setStaffStatus(\n      id: $id,\n      disabled: $disabled\n      )\n      {\n      status\n      message\n    }\n  }\n`\n\nexport const DELETE_STAFF= gql`\n  mutation deleteStaff( $id: String!){\n    staffDelete(\n      id: $id,\n    ){\n      status\n      message\n    }\n  }\n`\n\nexport const COMPLETE_REGISTRATION = gql`\n  mutation registerStaff( $registerCode:String!, $username: String!, $password: String!){\n    registerStaff(\n      registerCode: $registerCode\n      username: $username,\n      password:$password,\n    ){\n      status,\n      message\n    }\n  }`\n","import React, { useState,useEffect, useContext } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { useMutation } from '@apollo/client'\nimport { Button, Form, Grid, Header, Image, Segment, Divider } from 'semantic-ui-react'\nimport { LOGIN_STAFF } from '../mutations/staffMutation'\nimport { NotificationContext } from '../contexts/NotificationContext'\n\n\nconst StaffLoginPage = () => {\n  const [,dispatch] = useContext(NotificationContext)\n  const history = useHistory()\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n\n  /**\n   * staff Login mutation hook\n   */\n  const [login,{ data }] = useMutation(LOGIN_STAFF,{\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, Cannot Login'}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n\n  /**\n   * side effect when the staff login mutation is executed and loginToStationResult is set\n   */\n  useEffect(() => {\n    if ( data ) {\n      const staff = data.staffLogin\n      sessionStorage.setItem('staffKey',JSON.stringify(staff))\n      history.push(`/staff/${staff.id}`)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data])\n\n  /**\n   * function for station loginStation action\n   * @param {event} event submit button event\n   */\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    login({ variables:{ username:username, password: password } })\n\n  }\n\n  /**\n   * If stationKey is found on localStorage/sessionStorage skip the loginStation and browse shift report\n   */\n  let storedStaffKey = JSON.parse(sessionStorage.getItem('staffKey'))\n  if(storedStaffKey){\n    history.push(`/staff/${storedStaffKey.id}`)\n  }\n\n  return (\n\n    <Grid textAlign='center' style={{ height: '100vh' }} verticalAlign='middle'>\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as='h2' color='blue' textAlign='center'>\n          <Image src='/LogoMin.png' />  Log-in to your account\n        </Header>\n        <Form size='large' style={{ textAlign:'left' } } onSubmit={handleLogin}>\n          <Segment stacked>\n            <Form.Input fluid icon='user' iconPosition='left' placeholder='username' onChange = {(e,{ value }) => setUsername(value) }/>\n            <Form.Input\n              fluid\n              icon='lock'\n              iconPosition='left'\n              placeholder='Password'\n              type='password'\n              onChange = {(e,{ value }) => setPassword(value) }\n            />\n            <Button type = 'submit' color='blue' fluid size='large' >\n            Login\n            </Button>\n\n          </Segment>\n        </Form>\n        <Divider horizontal>Or</Divider>\n        <Segment  stacked>\n          <Button type = 'button' content='Log in to station'size='large' color=\"teal\" fluid\n            onClick = {() => history.push('/stationLogin')}/>\n        </Segment>\n\n      </Grid.Column>\n\n    </Grid>\n\n\n  )\n\n\n}\n\nexport default StaffLoginPage","import { gql } from '@apollo/client'\r\nexport const GET_TIMESHEETS =\r\ngql `query getTimesheetByUser($staff: String!, $filterDuration: String! ,$number: Int!, $year: Int!){\r\n  getTimeSheetByUser(\r\n    staff: $staff,\r\n     filterDuration: $filterDuration, \r\n     number: $number, \r\n     year: $year\r\n    ) {\r\n      id\r\n      startTime\r\n      status\r\n      date\r\n      endTime\r\n      break\r\n      remarks{\r\n        by\r\n        date\r\n        edit\r\n        text\r\n        title\r\n      }\r\n      staff{\r\n        id\r\n        name\r\n        reqHours\r\n        contractType\r\n      }\r\n      shiftReport {\r\n        shift\r\n        id\r\n        station {\r\n          id\r\n          location\r\n        }\r\n      }\r\n\r\n      shift\r\n      station{\r\n        id\r\n        location\r\n      }\r\n\r\n  },\r\n\r\n  getStaffName(\r\n    id: $staff\r\n    )\r\n\r\n}`\r\n\r\nexport const GET_ALL_TIMESHEETS = gql`\r\nquery getAllTimeSheets(\r\n  $staffId: String, $staff: [String] ,$period: String, $from: String , $to: String, $number: Int, $groupBy: String , $year: Int, $stations: [String], $filterStatus: String\r\n){\r\n  getAllTimeSheets(\r\n    staff:$staff,\r\n    period:$period,\r\n    from: $from,\r\n    to:$to ,\r\n    number:$number ,\r\n    groupBy:$groupBy,\r\n    year:$year ,\r\n    stations:$stations\r\n    filterStatus: $filterStatus\r\n    )\r\n  getStaffName(\r\n      id: $staffId\r\n      )\r\n   \r\n}`","import React, { useContext, useEffect, useState } from 'react'\nimport { Modal,Form, Button, Message, Segment, Header, Icon, Dimmer, Loader } from 'semantic-ui-react'\nimport { DateInputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { operateDate, formatDate, toDate } from '../../utils/DateHelper'\nimport { FieldArray, Formik } from 'formik'\nimport { validateStartEndTime } from '../StationReportPage/NewReportForm/validator'\nimport _ from 'lodash'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { GET_SHIFTREPORT_ID } from '../../queries/shiftReportQuery'\nimport { UPDATE_TIMESHEET } from '../../mutations/timeSheetMutation'\nimport { useLazyQuery, useMutation, useQuery } from '@apollo/client'\nimport { DropDownField, InputField, RemarkField } from './TimeSheetEditFields'\nimport { useParams } from 'react-router-dom'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\nconst  TimeSheetEditModel = (props) => {\n  const[,dispatch] = useContext(NotificationContext)\n  const params= useParams()\n  const self=  JSON.parse( sessionStorage.getItem('staffKey'))\n  const { loading,data } = useQuery(ALL_STATION,{ skip: props.add === false  }) //Station list is required only when adding new record\n  const [getShiftReport,{ loading:shiftReportLoading, data:shiftReportData }] = useLazyQuery(GET_SHIFTREPORT_ID)\n  const [updateTimeSheet,{ loading: updateTimeSheetLoading }] = useMutation(UPDATE_TIMESHEET,{\n    onError: (error) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Failed to ${props.add?'Add':'Update' } timesheet record `}<br/>{error.message}</> ,type: 'ERROR' } })\n      closeModel()\n    }\n  })\n\n  const [stationOptions, setStationOptions] = useState([])\n  const [newRemarkField,setNewRemarkField] = useState(false)\n\n\n  const selfHasPermissionToAddEdit  = (station) => {\n    if(self.permission.admin ||\n      self.permission.timesheet.sign.map(station => station._id).includes(station && station.id) ||\n      self.id === props.staffId){ // If viewing own timesheet or station is on timeshitsignpermission list or user is admin\n      return true\n    }\n\n    return false\n  }\n\n\n  useEffect(() => {\n    if(data && data.allStations){\n      const stations = data.allStations\n      const permittedStations =  stations.filter ( station => selfHasPermissionToAddEdit (station))\n      const stationOptions = permittedStations.map((station,index) => {\n        return { key:index, value: station.id, text: station.location }\n      })\n\n      setStationOptions(stationOptions)\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  },[data])\n\n\n  const getShiftList= (stationId) => {\n    if(data){\n      const station = data.allStations.filter(station => station.id === stationId)\n\n      if(station && station[0].shifts) {\n\n        const shiftList = station[0].shifts.map((shift,index) => {\n\n          return{ key:index, value: shift.name, text: shift.name }\n        })\n\n        return shiftList\n\n      }\n    }\n  }\n\n  /**returns approprite shift selection value to appropite shift based on starttime for choosen station  */\n  const getRecomendedShiftOption = (startTime,stationId) => {\n    if(data){\n      const station = data.allStations.filter(station => station.id === stationId)\n      if(station && station[0].shifts) {\n        const sdt = new Date(toDate(startTime))\n        const shiftName = station[0].shifts.reduce((p,c) => {\n          /**Setting the shiftTime to given startTime for comparision  */\n          const splitSt = c.startTime.split(':')\n          const st = new Date(sdt)\n          st.setHours(splitSt[0])\n          st.setMinutes(splitSt[1])\n          /** Diffence between given startTIme and shift startttime */\n          const diff = (sdt-st)/(60*60*1000)\n\n          /**return the lowest positive diffence if exist or highest negative differnce*/\n          if((diff > p.diff && p.diff < 0) ){\n            return { name: c.name ,diff: diff }\n          }\n          if(diff > 0 && diff< p.diff){\n            return { name: c.name ,diff: diff }\n          }\n          return p\n        },{ name:'',diff:-24 })\n        return shiftName.name\n\n      }\n    }\n\n\n  }\n\n  const handleShiftChange = (startTime,shift,station) => {\n    const st = new Date(toDate(startTime))\n    const ISODate = new Date ( Date.UTC(st.getFullYear() , st.getMonth() , st.getDate())).toISOString()\n    const vars = { date:ISODate ,shift: shift, station:station }\n    getShiftReport({ variables: vars })\n  }\n\n  const submit = async (values) => {\n    const vars = { ...values,break: parseInt(values.break) }\n    if(shiftReportData && shiftReportData.getShiftReportByShift &&  shiftReportData.getShiftReportByShift.id){\n      vars.handover = shiftReportData.getShiftReportByShift.id\n    }\n\n    if(!props.add){\n      vars.id = props.id\n    }\n\n    /**If new remarks is added only update added remarks */\n    if(values.remarks.length >= props.remarks.length){\n      vars.remarks.splice(0,props.remarks.length)\n    }\n    updateTimeSheet(\n      {\n        variables: vars,\n        update:(store,response) => {\n        /** Need to update cache only if add , graphql auto updates timesheet on update */\n          if(props.add){\n            store.modify ({\n              fields:{\n                getTimeSheetByUser(existingTimeSheetRefs , { readField }){\n                  const newTimeSheet = response.data.addToTimeSheet\n\n                  if(existingTimeSheetRefs.some(ref => readField('id',ref) === newTimeSheet.id)){\n                    return existingTimeSheetRefs\n                  }\n\n                  return [...existingTimeSheetRefs,newTimeSheet]\n\n                },\n\n                getAllTimeSheets(existingTimeSheetRefs){\n                  const period = params.period\n                  if(!period){\n                    return existingTimeSheetRefs\n                  }\n                  const newTimeSheet = response.data.addToTimeSheet\n                  const modify = _.cloneDeep(existingTimeSheetRefs)\n\n                  const totHours = (((toDate(newTimeSheet.endTime) - toDate(newTimeSheet.startTime) )/ (60*1000*60)) - (newTimeSheet.break || 0)/60).toFixed(1)\n                  if(!modify[period]){\n                    modify[period] = {}\n                  }\n\n                  if(!modify[period][newTimeSheet.staff.name]){\n                    modify[period][newTimeSheet.staff.name]= {}\n                    modify[period][newTimeSheet.staff.name].station = { [newTimeSheet.station.location]:1 }\n                    modify[period][newTimeSheet.staff.name].itemsPending = 1\n                    modify[period][newTimeSheet.staff.name].totHours = totHours\n\n                    return modify\n                  }\n\n                  const stations = modify[period][newTimeSheet.staff.name].station\n                  modify[period][newTimeSheet.staff.name] = {\n                    ...modify[period][newTimeSheet.staff.name],\n                    itemsPending:modify[period][newTimeSheet.staff.name].itemsPending+1,\n                    totHours: (parseFloat(modify[period][newTimeSheet.staff.name].totHours) + parseFloat(totHours)).toFixed(1),\n                    station:  { ...stations,[newTimeSheet.station.location]: stations[newTimeSheet.station.location]+1 }\n                  }\n\n                  return modify\n\n                }\n              },\n              broadcast: false\n            })\n          }\n          dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Success, ${props.add?'Added':'Updated' } timesheet record for ${vars.startTime.split(' ')[0]}`}</> ,type: 'SUCCESS' } })\n          closeModel()\n        }\n      })\n  }\n\n  const closeModel = () => {\n    props.setOpen(false)\n    setNewRemarkField(false)\n\n  }\n\n  const getInitValues = () => {\n    const init = {\n      startTime: props.startTime ,\n      endTime: props.endTime ,\n      break: props.break || 30,\n      remarks: props.remarks || [],\n\n    }\n\n    if(props.add){\n      init.staff = props.staffId\n      init.startTime = formatDate((new Date(props.date).setHours(0)))\n      init.endTime= (new Date(props.date).setHours(8)) > Date.now() ? formatDate(toDate(Date.now())) : formatDate((new Date(props.date).setHours(8)))\n      init.station = ''\n      init.shift = ''\n      init.remarks = [{ title:'Manually Entered to TimeSheet' , date: formatDate(Date.now()), by: self.name }]\n\n    }\n    /**/\n    return init\n  }\n\n  /**Function to auto generate remarks field based on user actions */\n  const autoAddRemarks = (values) => {\n    /**If the user is not making a new entry */\n    if (!props.add) {\n      const insertAt = props.remarks.length === 0 ? 0 : props.remarks.length\n      let newRemarks = [...values.remarks]\n      /**If start time and end time is modified from the original  */\n      if((values.startTime !== props.startTime || values.endTime !== props.endTime)){\n        /**Adding Filed Edited remarks to the last index of original remarks field, user entered remark should appear after this if there is any */\n        if(!newRemarks[insertAt] || (newRemarks[insertAt] && newRemarks[insertAt].title!== 'Edited')){\n          newRemarks.splice(insertAt,0,{ title:'Edited',date: formatDate(Date.now()),by:self.name, edit:{} })\n        }\n\n        if(values.startTime !== props.startTime){\n          newRemarks[insertAt].edit.startTime = `${props.startTime} to  ${values.startTime}`\n        }\n        if(values.endTime !== props.endTime){\n          newRemarks[insertAt].edit.endTime= `${props.endTime} to  ${values.endTime}`\n        }\n        values.remarks= newRemarks\n      }\n      /**If startTime is not modified or restored to original Value */\n      if(values.startTime === props.startTime){\n\n        if(newRemarks[insertAt] && values.remarks[insertAt].edit){\n          delete newRemarks[insertAt].edit.startTime\n        }\n      }\n      /**If startTime is not modified or restored to original Value */\n      if(values.endTime === props.endTime){\n        if(newRemarks[insertAt] && values.remarks[insertAt].edit){\n          delete newRemarks[insertAt].edit.endTime\n        }\n      }\n      /*If everything was restored to original value then remove the edited remarks */\n      if(newRemarks[insertAt] && newRemarks[insertAt].edit && _.isEmpty(newRemarks[insertAt].edit)){\n        newRemarks.splice(insertAt,1)\n      }\n      values.remarks= newRemarks\n    }\n  }\n\n  const modalHeader = props.add? `Adding Work Time Record to Date ${formatDate (Date.parse(props.date)).split(' ')[0]}`: `Editing Work Time Record to Date ${formatDate (Date.parse(props.date)).split(' ')[0]}`\n  return (\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {props.open}\n      onClose= {() => closeModel()}\n      onOpen= {() => props.setOpen (true)}\n    >\n      <Modal.Header>{modalHeader} </Modal.Header>\n      <Modal.Content>\n\n\n\n        {updateTimeSheetLoading &&\n            <Dimmer active>\n              <Loader />\n            </Dimmer>\n        }\n        <Formik\n\n          initialValues = {getInitValues()}\n          validate = {values => {\n\n            let errors = {}\n            errors = { ...errors,...validateStartEndTime(values.startTime,values.endTime,props.date) }\n            if(_.isEmpty(errors)){\n              autoAddRemarks(values)\n            }\n\n            return errors\n\n\n          } }\n\n          onSubmit = {(values) =>\n          {\n            /**If last added remark is empty remark then remove from values\n             * Retrived Remarks from database will have a title, new remark will always be at the end of array and may not have either title or text\n             */\n            if(values.remarks.length &&  !values.remarks[values.remarks.length-1].title  &&  !values.remarks[values.remarks.length-1].text ){\n\n              const newRemarks = [...values.remarks]\n              newRemarks.splice(values.remarks.length-1,1)\n              values.remarks = newRemarks\n            }\n            /**If last added remark has text but no title then set title */\n            if(values.remarks.length &&  ! values.remarks[values.remarks.length-1].title &&  values.remarks[values.remarks.length-1].text){\n              values.remarks[values.remarks.length-1].title = 'Remark Added'\n            }\n\n            submit(values)}\n          }\n\n\n        >\n\n\n          {({ values,handleSubmit,setFieldValue,dirty }) =>\n\n            <Form size='large' style={{ marginBottom:'5rem' }} onSubmit = { handleSubmit} >\n\n              <Form.Group >\n\n                < DateInputField\n                  label= 'Start Time'\n                  readOnly = {!props.add && (props.status === 'APPROVED' || !selfHasPermissionToAddEdit(props.station))}\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name ='startTime'\n                  maxDate = {operateDate(Date.now(),30,'m','sub')}\n                  minDate= {formatDate (Date.parse(props.date))}\n\n                />\n\n\n                < DateInputField\n                  label = 'End Time'\n                  readOnly = {!props.add && !(props.status === 'APPROVED' || !selfHasPermissionToAddEdit(props.station))}\n                  dateTimeFormat = 'DD-MM-YYYY HH:mm'\n                  name='endTime'\n                  maxDate = {\n                    Date.now() < toDate(values.endTime)? formatDate(Date.now()) : operateDate(values.startTime,20,'h','add')\n                  }\n                  minDate= {operateDate(values.startTime,20,'m','add')}\n\n                />\n\n                <InputField\n                  inputlabel= 'Break'\n                  readOnly = {!props.add && (props.status === 'APPROVED' || !selfHasPermissionToAddEdit(props.station))}\n                  label = 'Minutes '\n                  labelPosition='right corner'\n                  name= 'break'\n                  type='number'\n                  min='0'>\n                </InputField>\n\n              </Form.Group>\n\n\n              {\n                /** If the user is inserting new timesheet  */\n                props.add &&\n                <Form.Group>\n\n                  <DropDownField\n                    label =' Select Station'\n                    loading= {loading}\n                    name = 'station'\n                    placholder= 'Select Station'\n                    search\n                    selection\n                    options= {stationOptions}\n                    onChange = {  (e,{ value }) => {\n                      setFieldValue('station',value)\n                      const shift = getRecomendedShiftOption(values.startTime,value)\n                      setFieldValue('shift',shift)\n                      handleShiftChange(values.startTime,shift,value)\n\n                    }}\n                  ></DropDownField>\n\n                  <DropDownField\n                    label =' Select Shift'\n\n                    disabled = {!values.station}\n                    name = 'shift'\n                    placholder= 'Select Shift'\n                    search\n                    selection\n                    options= {values.station? getShiftList(values.station):[]}\n                    onChange = {(e,{ value } ) => {\n                      setFieldValue('shift',value)\n                      handleShiftChange(values.startTime,value,values.station)\n                    }}\n                  ></DropDownField>\n\n\n                </Form.Group>\n              }\n\n              { /**While Loading Data */\n                shiftReportLoading &&\n                  <Segment secondary loading>\n                    Verifying {values.shift} Shift\n                  </Segment>\n              }\n\n              { /**If the shift is set and shift report exist for the corresponding shift */\n                values.shift && shiftReportData && shiftReportData.getShiftReportByShift &&\n                  <Segment clearing secondary>\n                    <Header as='h3'><Icon name='check circle' color='green'></Icon> Verified</Header>\n                    <Header floated='left' as='h5'>{shiftReportData.getShiftReportByShift.station.location} {values.shift} Shift {shiftReportData.getShiftReportByShift.startTime.split(' ')[0]}\n                      <Header.Subheader><strong> Shift Start : </strong> {shiftReportData.getShiftReportByShift.startTime}<strong> Shift End : </strong> {shiftReportData.getShiftReportByShift.endTime} </Header.Subheader>\n                    </Header>\n                    <Button type='button'floated='right' onClick={() => props.openReport({ id: shiftReportData.getShiftReportByShift.id, open:true })} > View Shift Report</Button>\n\n                  </Segment>\n              }\n\n              {\n                /**If the shift is set and the shift report doesnot exist for corresponding shift */\n                values.shift && shiftReportData && !shiftReportData.getShiftReportByShift &&\n                <Message warning visible\n                  header='Selected shift is not reported'\n                  content='Adding to record to unreported shift will not be reflected on any shift reports thus cannot be verified. This may result on work time not being approved'\n                />\n              }\n\n              <label ><strong>Remarks</strong></label>\n              <FieldArray name='remarks'>\n                {({ push,remove }) => <>\n\n                  {values.remarks && values.remarks.length > 0 && values.remarks.map((remark,index) =>\n                    <RemarkField key= {index} name={`remarks.${index}`} value={remark}></RemarkField>\n                  )}\n\n                  { /**If TImesheet is approved or user doesnot have permission , it cannot be modified */\n                    props.status !== 'APPROVED' && (props.add || selfHasPermissionToAddEdit (props.station) )  &&\n                    <Form.Button type='button'\n                      onClick= {(e) => {\n                        e.preventDefault()\n                        if(newRemarkField){\n                          remove(values.remarks.length-1)\n                          setNewRemarkField(false)\n                        } else{\n                          if(values.remarks.length > 0 && values.remarks[values.remarks.length-1].title === 'Clearification Requested'){\n                            push({ title:'Add Clearification',date: formatDate(Date.now()),by:self.name,text:'' })\n                          } else {\n                            push({ title:'',date: formatDate(Date.now()),by:self.name,text:'' })\n                          }\n                          setNewRemarkField(true)\n                        }\n                      }}>\n                      {!newRemarkField && values.remarks.length > 0 && values.remarks[values.remarks.length-1].title === 'Clearification Requested' ?\n                        'Add Clearification' :\n                        newRemarkField?'Remove Remark':\n                          'Add Remark'}\n                    </Form.Button>}\n                </>\n                }\n              </FieldArray>\n              { props.status !== 'APPROVED' && dirty && selfHasPermissionToAddEdit(props.station) &&\n              <Button type='submit' floated='right' positive>Save</Button>\n              }\n              <Button type='button' floated='right' negative onClick={() => closeModel()}>Cancel</Button>\n            </Form>}\n        </Formik>\n\n\n\n      </Modal.Content>\n\n    </Modal>\n\n\n  )\n}\n\nexport default TimeSheetEditModel","import {  useMutation } from '@apollo/client'\nimport React, { useState } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Table,Button, Popup, Header, Message,  Segment,Form } from 'semantic-ui-react'\nimport { APPROVE_TIMESHEET, DELETE_TIMESHEET, REQUEST_CLARIFICATION } from '../../mutations/timeSheetMutation'\nimport TimeSheetEditModel from './TimeSheetEditModel'\nimport _ from 'lodash'\n\nconst TimeSheetRow = ({ timeSheet, rowSpan ,openReport ,index ,date ,staffId }) => {\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\n\n  const params= useParams()\n\n  const permission = staff.permission && staff.permission.timesheet\n  const startTime = timeSheet.startTime\n  const endTime = timeSheet.endTime\n  const station = (timeSheet.shiftReport && timeSheet.shiftReport.station.location) ||  (timeSheet.station && timeSheet.station.location)\n  const shift = (timeSheet.shiftReport && timeSheet.shiftReport.shift) || timeSheet.shift\n  const  breakt = timeSheet.break\n  const totalHours = timeSheet.total\n  const ot = timeSheet.overTime\n  const remarks = timeSheet.remarks || []\n  const [open,setOpen] = useState(false)\n  const [add,setAdd] = useState(false)\n  const [deleteOpen,setDeleteOpen]=  useState(false)\n  const [clarifyOpen,setClarifyOpen]=  useState(false)\n\n  const [clarifyText,setClarifyText] = useState('')\n\n  const [approveTimesheet,{ loading:timesheetSignLoading }] = useMutation(APPROVE_TIMESHEET)\n  const [mutatedeleteTimesheet,{ loading:deleteLoading }] = useMutation(DELETE_TIMESHEET)\n  const [requestClarification,{ loading:clarifyLoading }] = useMutation(REQUEST_CLARIFICATION)\n\n\n  if (!staffId){\n    staffId = staff.id\n  }\n\n  const deleteTimeSheet = () => {\n    mutatedeleteTimesheet(\n      { variables:{ id: timeSheet.id },\n        update: (store,response) => {\n          if(response.data.deleteTimeSheet && response.data.deleteTimeSheet.status === 'SUCCESS') {\n            store.evict({\n              id: `TimeSheet:${timeSheet.id}`\n            })\n            store.modify({\n              fields:{\n                getAllTimeSheets(existingTimeSheetRefs, { readField }){\n                  const period = params.period\n                  if(!period){\n                    return existingTimeSheetRefs\n                  }\n\n                  const modify = _.cloneDeep(existingTimeSheetRefs)\n\n\n                  const totHours = modify[period][timeSheet.staff.name].totHours-totalHours\n                  if (totHours === 0){\n                    delete (modify[period])\n                    return modify\n                  }\n\n                  const stations = modify[period][timeSheet.staff.name].station\n                  modify[period][timeSheet.staff.name] = {\n                    ...modify[period][timeSheet.staff.name],\n                    itemsPending:modify[period][timeSheet.staff.name].itemsPending-1,\n                    totHours: totHours,\n                    station:  { ...stations,[timeSheet.station.location]: stations[timeSheet.station.location]-1 }\n\n                  }\n\n                  return modify\n                }\n              },\n\n            })\n\n          }\n\n        }\n      })\n\n  }\n\n  const askToclarify = () => {\n    const vars = {\n      id: timeSheet.id,\n      clearify: clarifyText\n    }\n\n    requestClarification({ variables: vars }\n\n\n    )\n\n  }\n\n  const updateTimeSheetApproval = () => {\n    approveTimesheet({\n      variables:{ id:timeSheet.id , status:timeSheet.status==='APPROVED'?'':'APPROVED' },\n      update: (store,response) => {\n        store.modify({\n          fields: {\n            getAllTimeSheets(existingTimeSheetRefs, {  readField }){\n              const period = params.period\n              if(!period){\n                return existingTimeSheetRefs\n              }\n\n              const approved = response.data.approveTimeSheet.status\n              const modify = _.cloneDeep(existingTimeSheetRefs)\n              modify[period][timeSheet.staff.id].itemsPending = approved==='APPROVED'? modify[period][timeSheet.staff.id].itemsPending-1: (modify[period][timeSheet.staff.id].itemsPending)+1\n\n\n              return modify\n\n            }\n          }\n        })\n\n\n      }\n    })\n\n  }\n\n  const isWeekDay = ()  => {\n    const today = new Date(date).getDay()\n    if( today === 0 || today ===6){\n      return false\n    }\n    return true\n  }\n  /**If the id is a valid id string, empty rows with no data will not have valid ids. */\n  const isEmptyRow = timeSheet.id.toString().match(/^[0-9a-fA-F]{24}$/) ? false: true\n\n  return (\n    <Table.Row  key = {timeSheet.id} negative= {!isWeekDay()}>\n      {index === 0 && <Table.Cell collapsing rowSpan={rowSpan}>{ date.split('T')[0]}</Table.Cell>}\n      <Table.Cell> {station} </Table.Cell>\n      <Table.Cell onClick= {(e) => {\n        e.preventDefault()\n        openReport({ id: timeSheet.shiftReport && timeSheet.shiftReport.id, open:true })\n      }}>\n        {  // eslint-disable-next-line jsx-a11y/anchor-is-valid\n          timeSheet.shiftReport && timeSheet.shiftReport.id ? <a href =\"\"> {shift} </a> : shift?`${shift} `:''\n        }  </Table.Cell>\n      <Table.Cell >{ startTime && startTime.split(' ')[1]}</Table.Cell>\n      <Table.Cell> {endTime &&endTime.split(' ')[1]} </Table.Cell>\n      <Table.Cell> {breakt} </Table.Cell>\n      <Table.Cell> {totalHours?totalHours:''} </Table.Cell>\n      {index === 0 &&  <Table.Cell  rowSpan={rowSpan} > {ot?ot:''} </Table.Cell>}\n      <Table.Cell> {timeSheet.status === 'PENDING_APPROVAL'? 'No' : timeSheet.status === 'APPROVED'? 'Yes' : timeSheet.status  } </Table.Cell>\n      <Table.Cell>\n        {remarks && remarks.length>0 &&\n        <>{`${remarks[remarks.length-1].title} ${remarks[remarks.length-1].date.split(' ')[0]}` }  <br/>  {remarks[remarks.length-1].text}`  <br/>\n          {// eslint-disable-next-line jsx-a11y/anchor-is-valid\n            <a href='#'\n              onClick = {(e ) => {\n                e.preventDefault()\n                setOpen(true)\n              }\n\n              }>See all</a>}\n\n        </>\n        }</Table.Cell>\n      <Table.Cell  >\n\n        <Segment loading={timesheetSignLoading || deleteLoading || clarifyLoading} disabled={timesheetSignLoading || deleteLoading || clarifyLoading} size='tiny' basic  style={{ width:'max-content', display:'inline-block' }} >\n\n\n          {\n            /**\n               * Add Button,\n               * visible only if data staff is loggedin Staff or  logged in staff has permission and no record exists for  that day\n               */\n            isEmptyRow  && permission && (  staff.permission.admin || permission.sign.length >0 || staff.id === staffId ) &&\n              <Button icon='add' size='mini' circular onClick = {() => {\n                setAdd(true)\n                setOpen(true)\n\n              }}/>\n\n          }\n          {\n          /**\n           * If the record exist for that day\n           */\n            !isEmptyRow &&\n            <>\n              {\n                /**\n                 * Edit Button,\n                 * visible only\n                 *    if data staff is loggedin Staff\n                 *    or\n                 *    logged in staff has permission to sign timesheet for that station\n                 *    and\n                 *    record exists for that day\n                 *    and\n                 *    record is not already approved\n                 *\n                 */\n                timeSheet.status !== 'APPROVED' && ( staff.permission.admin || (permission.sign.filter(station => timeSheet.station && station._id === timeSheet.station.id ).length !== 0 || staff.id === staffId )) &&\n                  <Popup\n                    trigger=  {<Button icon='edit' size='mini' circular onClick = {() => {\n                      setAdd(false)\n                      setOpen(true)\n                    }}/>}\n                    content='Edit Timesheet'\n                    position='bottom center'\n                  />}\n\n\n              { /**\n                   * Approve Button,\n                   * visible only\n                   *    if data staff is not loggedin Staff\n                   *    or\n                   *    logged in staff has permission to sign timesheet for that station\n                   *    and\n                   *    record is not already approved\n                   */\n                ( (staff.permission.admin || permission.sign.filter(station => timeSheet.station && station._id === timeSheet.station.id ).length !== 0)  &&  staff.id !== staffId) &&\n                  <>\n                    <Popup\n                      trigger=  { <Button  color ={timeSheet.status === 'APPROVED'?'green':'grey'} icon='check' size='mini' circular onClick = {() => {\n                        updateTimeSheetApproval()\n                      }}/>}\n                      content={timeSheet.status === 'APPROVED'? 'Undo Approve': 'Approve'}\n                      position='bottom center'\n                    />\n\n                    {\n                      /**\n                      * Request Clarification button,\n                      * visible only\n                      *    record is not already approved\n                      */\n\n                      timeSheet.status !== 'APPROVED' &&\n                      <Popup size='huge' wide='very' style={{ width:'100%' }}\n                        trigger=  { <Button color='blue' icon='talk' size='mini' circular />}\n                        onOpen= {() => setClarifyOpen(true)}\n                        onClose= {() => setClarifyOpen(false)}\n                        open = {clarifyOpen}\n                        content={\n                          <Form onSubmit = {() => {\n                            askToclarify()\n                            setClarifyOpen(false)\n                          }}>\n                            <Header as ='h5'>Request Clearification </Header>\n                            <Form.TextArea\n                              value= {clarifyText}\n                              onChange= {\n                                (e,{ value }) => setClarifyText(value)\n                              }>\n\n                            </Form.TextArea>\n                            <Form.Button floated='right' type= 'submit' primary> Send</Form.Button>\n                          </Form>\n                        }\n                        on='click'\n                        position='bottom right'\n                      />\n                    }\n                  </>\n              }\n\n              {\n                /**\n                * Delete Button,\n                * visible only\n                *    if data staff is  loggedin Staff\n                *    or\n                *    logged in staff has permission to edit timesheet for that station\n                *    and\n                *    record is not already approved\n                */\n\n                timeSheet.status !== 'APPROVED' &&((staff.permission.admin || permission.sign.filter(station => timeSheet.station && station._id === timeSheet.station.id ).length !== 0)   || staff.id === staffId  ) &&\n                <Popup as={Message} warning\n                  trigger=  { <Button  color = 'red' icon='trash' size='mini' circular />}\n                  content={\n                    <>\n\n                      <Message.Header>Are you sure, you want to remove this record?</Message.Header>\n                      <p> Action is non reversible and will remove all the instances of this record from the system.</p>\n\n                      <Button fluid color='red' icon='trash' content='Confirm' onClick = {() => {\n                        deleteTimeSheet(timeSheet.id)\n                        setDeleteOpen(false)\n\n                      }} /></>}\n                  on='click'\n                  onOpen= {() => setDeleteOpen(true)}\n                  onClose= {() => setDeleteOpen(false)}\n                  open={deleteOpen}\n                  position='bottom center'\n                />}\n            </>}\n        </Segment>\n\n\n\n      </Table.Cell>\n      { open &&\n       <TimeSheetEditModel\n         staffId = {staffId}\n         id= {timeSheet.id}\n         openReport={openReport}\n         date = {date}\n         open={open}\n         station = {timeSheet.station}\n         status ={timeSheet.status}\n         setOpen= {setOpen}\n         startTime= {startTime}\n         endTime= {endTime}\n         break= {breakt}\n         add= {add}\n         remarks= {remarks} >\n       </TimeSheetEditModel>}\n    </Table.Row>)\n\n}\n\nexport default TimeSheetRow","import React,{ Fragment, useState } from 'react'\nimport { Header, Table } from 'semantic-ui-react'\nimport { toDate } from '../../utils/DateHelper'\nimport _ from 'lodash'\nimport ReportViewModal from '../ShiftReport/ReportViewModal'\nimport TimeSheetRow from './TImeSheetRow'\n\n\nconst TimeSheetsReport = ({ startDate,endDate,data, staffId, title })  => {\n  const [openReport,setOpenReport]= useState({ id:'', open: false })\n\n  /** sets the calender from start date and end dates so the empty dates will also be displayed on report*/\n  const calenderArray =[...new Array( Math.ceil((endDate - startDate)/(24*60*60*1000)) +1 )].map((n,index) => {\n    const day = index\n    const date = new Date ( Date.UTC(startDate.getFullYear() , startDate.getMonth() , startDate.getDate()+day)).toISOString()\n    return date\n  } )\n\n  /**Converting calender array to object */\n  const calenderObject = _.zipObject(calenderArray,calenderArray.map((val,index) => [{ id:index }]))\n  let netTotal =0\n  let netOt = 0\n\n  let shiftDate\n  if(data) {\n\n    /**There is chance that the staff might be on 2 shifts on the day so grouping by date */\n    shiftDate = _.groupBy(data.getTimeSheetByUser, 'date')\n\n    const formatData = shiftDate && _.mapValues(shiftDate,(timeSheets,date) => {\n      let totalDaily = 0\n      let ot = 0\n      timeSheets = timeSheets.map((timesheet,index) => {\n        const breakt = (timesheet.break*60*1000)\n        const total =  ((toDate(timesheet.endTime) - toDate(timesheet.startTime) - breakt)/ (60*1000*60)).toFixed(1)\n\n        timesheet = { ...timesheet,total:parseFloat(total) }\n\n        totalDaily = totalDaily + parseFloat(total)\n\n        /**Overtime rules can be imlemented here\n         * For now for simplicity for Employee sundays is 100% saturday is 50%  and 8 hrs(specified by contractType) + is overtime, for contractor 10hrs + is overtime\n         */\n\n        /**If staff is a employee\n        const today = new Date(toDate(timesheet.startTime)).getDay()\n        if( timesheet.staff.contractType === 'Employee') {\n          /**If sunday */\n        /*if(today === 0 ){\n            ot = (totalDaily+parseFloat(total) - timesheet.staff.reqHours).toFixed(1)\n          }\n          /**If saturday */\n        /* else if(today === 6 ){\n            ot = (totalDaily + 0.5 * parseFloat(total) - timesheet.staff.reqHours).toFixed(1)\n          }\n          else{\n            ot = (totalDaily - timesheet.staff.reqHours).toFixed(1)\n          }\n        }\n        else{\n          ot =  (totalDaily - timesheet.staff.reqHours).toFixed(1)\n        }*/\n        ot =  (totalDaily - timesheet.staff.reqHours).toFixed(1)\n        return timesheet\n      })\n      timeSheets[0] = { ...timeSheets[0],overTime:ot }\n      netOt = netOt + parseFloat(ot)\n      netTotal = netTotal + totalDaily\n      return timeSheets\n    } )\n\n    shiftDate = ( { ...calenderObject,...formatData })\n\n  }\n\n  const stickyTh = {\n    position: 'sticky',\n    top : '0',\n    zIndex: 1\n\n\n  }\n\n  return (\n    <>\n      {title &&\n     <Header as = 'h5' floated='right'>{title}</Header>\n      }\n      <Table celled striped structured textAlign='center'>\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell style= {stickyTh}> Date </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Station </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Shift </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Start Time </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> End Time </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Break (Mins) </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Total (Hrs) </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> OverTime </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Approved </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Remarks </Table.HeaderCell>\n            <Table.HeaderCell style= {stickyTh}> Actions</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          {shiftDate && _.map(shiftDate,(timeSheets,date) =>\n            <Fragment key = {date}>\n              {timeSheets.map( (timeSheet,index) =>\n                <TimeSheetRow  staffId= {staffId} date = {date} index = {index} key = {timeSheet.id} openReport= {setOpenReport} timeSheet={timeSheet} rowSpan={timeSheets.length} />\n              )\n              }</Fragment>\n          )\n          }\n\n        </Table.Body>\n        <Table.Footer>\n          <Table.Row >\n            <Table.HeaderCell  colSpan='6'>Total</Table.HeaderCell>\n            <Table.HeaderCell> {netTotal.toFixed(1)} </Table.HeaderCell>\n            <Table.HeaderCell> {netOt.toFixed(1)} </Table.HeaderCell>\n            <Table.HeaderCell colSpan='3' />\n          </Table.Row>\n        </Table.Footer>\n      </Table>\n\n      <ReportViewModal setOpenReport= {setOpenReport} openReport={openReport}></ReportViewModal>\n    </>)\n}\n\nexport default TimeSheetsReport","import { useQuery } from '@apollo/client'\r\nimport React ,{ useEffect, useState } from 'react'\r\nimport { Loader, Header, Segment,Dropdown, Button ,Form, Popup } from 'semantic-ui-react'\r\n\r\nimport { GET_TIMESHEETS } from '../../queries/timeSheetQuery'\r\nimport { getWeekNumber, getDatefromWeek, getMonthOptions, getWeekOptions, getMonthName, getFilterYear  } from '../../utils/DateHelper'\r\nimport TimeSheetsReport from '../TimeSheetsReport'\r\n\r\nconst TimeSheet = ({ staffId,setStaffName, period ,selected ,selectedYear ,timesheetOnly }) => {\r\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\r\n  const [selectBy,setSelectBy] = useState (period || 'week')\r\n  const today = new Date()\r\n  const [number,setNumber] = useState (selected || getWeekNumber(today))\r\n\r\n  const queryParams = { staff: staffId || staff.id , filterDuration: selectBy  , number:number, year: getFilterYear(selectBy,number) }\r\n\r\n  const { error,loading,data } = useQuery(GET_TIMESHEETS, { variables:queryParams })\r\n\r\n  useEffect(() => {\r\n    if (data)\r\n      setStaffName(data.getStaffName)\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  },[data])\r\n\r\n\r\n  /**Get startDate of timeSheet Report */\r\n  const filterStartDate  =  () => {\r\n    let sdate\r\n    const year = getFilterYear(selectBy,number)\r\n    if(selectBy==='month'){\r\n      sdate = new Date(year,number,1)\r\n    } else {\r\n      sdate  = getDatefromWeek(number,year)\r\n    }\r\n\r\n    sdate = new Date(Date.UTC( sdate.getFullYear(), sdate.getMonth(), sdate.getDate()))\r\n    return (sdate)\r\n  }\r\n\r\n  /**Get startDate of timeSheet Report */\r\n  const filterEndDate  =  () => {\r\n    let ed\r\n    const year = getFilterYear(selectBy,number)\r\n    if(selectBy==='month'){\r\n      ed = new Date(year,number+1,0)\r\n    } else {\r\n      const sd  = getDatefromWeek(number,year)\r\n      ed = new Date(Date.UTC( sd.getFullYear(), sd.getMonth(), sd.getDate()+6))\r\n    }\r\n    if(ed >= today ){\r\n      ed = new Date(Date.UTC(today.getFullYear(),today.getMonth(),today.getDate()))\r\n    }\r\n    return (ed )\r\n  }\r\n\r\n  const start = filterStartDate()\r\n  const end = filterEndDate()\r\n\r\n  //console.log(start,end)\r\n\r\n  if (loading) {\r\n    return (\r\n      <Loader active>Fetching timesheets</Loader>\r\n    )\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Header as ='h5'>Something Went Wrong, Please try again</Header>\r\n    )\r\n  }\r\n\r\n  const isAllApproved = () => {\r\n    let approved = false\r\n    if(data && data.getTimeSheetByUser && data.getTimeSheetByUser.length > 0){\r\n      approved = !data.getTimeSheetByUser.some(timeSheet => timeSheet.status !== 'APPROVED')\r\n    }\r\n\r\n    return approved\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Segment basic style= {{ marginBottom:'20em' }} >\r\n        <Form>\r\n          {!timesheetOnly &&\r\n            <><label> Select by: </label>\r\n              <Form.Group>\r\n                <Form.Field>\r\n                  <Dropdown\r\n                    selection\r\n                    options = {[ { key:1 ,text: 'Month' , value: 'month' }, { key:2 ,text: 'Week' , value: 'week' }]}\r\n                    onChange = {(e,{ value }) => {\r\n                      setSelectBy(value)\r\n                      if(value==='month') {\r\n                        setNumber (today.getMonth())\r\n                      }else {\r\n                        setNumber (getWeekNumber(today))\r\n                      }\r\n\r\n                    }\r\n                    }\r\n                    value = {selectBy}/>\r\n                </Form.Field>\r\n                <Form.Field>\r\n                  <Dropdown\r\n                    compact = { selectBy === 'month'? false:true }\r\n                    selection\r\n                    options = { selectBy === 'month'?getMonthOptions(4):getWeekOptions(4)}\r\n                    onChange ={(e,{ value }) => {\r\n                      setNumber(value)\r\n                    }}\r\n                    value = {number}/>\r\n                </Form.Field>\r\n              </Form.Group>\r\n            </> }\r\n          <TimeSheetsReport staffId={staffId} startDate={start} endDate= {end} data={data} title = {`Timesheet ${selectBy === 'month'? getMonthName(number):  `Week ${number},` } ${getFilterYear(selectBy,number)} `}></TimeSheetsReport>\r\n\r\n\r\n          { staffId === staff.id &&\r\n            <Segment  basic clearing>\r\n              <Popup\r\n                trigger = {<span  floated='right' ><Button  floated='right' disabled ={!isAllApproved()} type='button' color='blue'> Submit to Payroll</Button></span>}\r\n                disabled= {isAllApproved()}\r\n                content= ' All records should be approved for submission'\r\n              />\r\n            </Segment>\r\n          }\r\n\r\n\r\n\r\n        </Form>\r\n      </Segment>\r\n\r\n\r\n\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TimeSheet","import { gql } from '@apollo/client'\nexport const GET_STAFF = gql`\nquery fetchStaff($id:String, $registerCode:String, $withPermission: Boolean!){\n    getStaff(\n      id: $id\n      registerCode: $registerCode\n      ){ \n    id     \n    name\n    idCardCode\n    currentStation{\n      location\n    }\n    email\n    position\n    contractType\n    lastActive{\n      station{\n        location\n      }\n      activeAt\n    }\n    username\n    resetCode\n    phone\n    reqHours\n    registerCode\n    permission  @include(if: $withPermission ) {\n      id\n      station\n      timesheet\n      staff\n      admin\n    }\n    }\n  }\n`\nexport const GET_STAFF_REG = gql`\nquery fetchStaff($registerCode:String,){\n    getStaff(\n      registerCode: $registerCode\n      ){ \n    name\n    }\n  }\n`\n\nexport const GET_ALL_STAFF_MINIMAL = gql`\n  query allStaffMinimal ($minimal: Boolean = true) { \n    allStaff (minimal :$minimal){\n    id\n    name   \n  }}\n`\n\nexport const GET_ALL_STAFF = gql`\n  query{ allStaff {\n    id\n    name\n    email\n    phone\n    disabled\n    lastActive{\n      station{\n        location\n      }\n      activeAt\n    }\n  }}\n`\n\n\nexport const VERIFY_USERNAME = gql`\n  query verifyUsername( $username: String!){\n    verifyUsername(   \n      username: $username,\n    ){\n      status,\n      message\n    }\n  }`","import { useLazyQuery } from '@apollo/client'\nimport React, { useEffect, useState } from 'react'\nimport { useLocation, useParams } from 'react-router-dom'\nimport { DateInput } from 'semantic-ui-calendar-react'\nimport { Form, FormGroup, Segment,Label } from 'semantic-ui-react'\n//import { GET_ALL_STAFF_MINIMAL } from '../../../queries/staffQuery'\nimport { formatDate, getMonthOptions, getWeekOptions,getWeekNumber } from '../../utils/DateHelper'\nimport { GET_ALL_STAFF_MINIMAL } from '../../queries/staffQuery'\nimport { ALL_STATION } from '../../queries/stationQuery'\n\nconst TimeSheetsFilter = ({ setFilter }) => {\n  const loggedInStaff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const params = useParams()\n  const today = new Date()\n  const [staff,setStaff] = useState([])\n  const [period,setPeriod] = useState('date')\n  const [stations,setStations] = useState( [])\n  const [groupBy,setGroupBy] = useState('week')\n  const [from,setFrom] = useState(formatDate(new Date(today.getFullYear(), today.getMonth() -3, 1 )).split(' ')[0])\n  const [to,setTo] = useState(formatDate(today).split(' ')[0])\n  const [number,setNumber] = useState(getWeekNumber(today))\n\n  const location = useLocation ()\n  const basePage =  location.pathname.split('/')[2]\n\n\n  const [filterStatus,setFilterStatus] = useState('')\n\n  const [staffOptions,setStaffOptions] = useState([])\n\n  const [stationOptions,setStationOptions] = useState(loggedInStaff.permission.timesheet.view.map((station,index ) => {\n    return { key: index, value:station._id, text: station.location }})\n  ) //Setting the permitted station list\n\n  /**If staff has admin rights then all station should be displayed in options */\n  const [getAllStations,{ loading: stationLoading, data: stationData  }] = useLazyQuery(ALL_STATION )\n  useEffect(() => {\n    if(stationData && stationData.allStations){\n      const stOpt=  stationData.allStations.map((station,i) => {\n        return { key: i, value:station.id, text: station.location }\n      })\n      setStationOptions(stOpt)\n    }\n\n\n  }, [stationData])\n\n  const [getAllStaffs,{ loading: staffLoading, data: staffData }] = useLazyQuery(GET_ALL_STAFF_MINIMAL)\n\n  useEffect(() => {\n    if(staffData){\n      const staffOpt = staffData.allStaff.map((staff,index) => {\n        return { key:index, value:staff.id, text: staff.name }\n      } )\n      setStaffOptions(staffOpt)\n    }\n\n\n  }, [staffData])\n\n\n  useEffect(() => {\n    setFilter({ staff, period ,stations ,groupBy ,from ,to , number,  filterStatus })\n  },[staff, period, stations, groupBy, from, to, number, filterStatus, setFilter])\n\n  useEffect(() => {\n    if(params.staffId ){\n      setStaff([params.staffId])\n    }else{\n      setStaff([])\n    }\n    if(basePage.toLowerCase() === 'mypage'){\n      setStaff([loggedInStaff.id])\n    }\n  },[basePage, loggedInStaff.id, params])\n\n\n  return (\n\n    <>\n\n      <Segment size='tiny' clearing>\n        <Label size='mini' attached='top left'>Filters</Label>\n        <Form size='mini'>\n          <FormGroup widths='equal' >\n            {\n              !params.staffId && basePage.toLowerCase() !== 'mypage' &&\n              <Form.Dropdown\n                label='Staff'\n                value= {staff}\n                loading={staffLoading}\n                options={staffOptions}\n                selection multiple clearable\n                placeholder='All'\n                onFocus= {() => getAllStaffs()}\n                onChange= {(e,{ value }) => setStaff(value)}></Form.Dropdown>\n            }\n            <Form.Dropdown label='Period'\n              value= {period}\n              options= {[{ key:1, value:'date', text:'Date' },{ key:2, value:'week', text:'Week' },{ key:3, value:'month', text:'Month' }, ]}\n              placeholder='All' selection clearable compact\n              onChange ={(e,{ value }) => {\n                if(value ==='week'){\n                  setNumber(getWeekNumber(today))\n                }\n                if(value === 'month'){\n                  setNumber(today.getMonth())\n                }\n                setPeriod(value)\n              } }></Form.Dropdown>\n\n\n            {period === 'date' && <>\n              <DateInput value={from}  label='From'\n                dateFormat='DD-MM-YYYY'\n                onChange = {(e,{ value }) => {\n                  setFrom(value)\n                }}></DateInput>\n              <DateInput value={to} label='To' dateFormat='DD-MM-YYYY'\n                onChange = {(e,{ value }) => {\n                  setTo(value)\n                }}></DateInput>\n            </>}\n\n            {\n              (period === 'week' || period === 'month') && <>\n                <Form.Dropdown\n                  value={number}\n                  label={`Select ${period}`}\n                  options={period==='week'?getWeekOptions():getMonthOptions()}\n                  selection compact\n                  onChange ={(e,{ value }) => {\n                    setNumber(value)\n                  }}></Form.Dropdown>\n              </>\n            }\n            <Form.Dropdown label= 'Group By'\n              value= {groupBy}\n              options= {[{ key:1,value:'week',text:'Week' }, { key:2,value:'month',text:'Month' },]}\n              onChange = {(e,{ value }) => setGroupBy(value)}\n              selection\n              compact>\n\n            </Form.Dropdown >\n            <Form.Dropdown\n              label= 'Station'\n              loading= {stationLoading}\n              options={stationOptions}\n              value= {stations}\n              selection multiple clearable\n              placeholder='All'\n              onFocus= {() => {\n                if(loggedInStaff.permission.admin) {\n                  getAllStations()\n                }\n              }\n              }\n              onChange = {(e,{ value }) => setStations(value)}></Form.Dropdown>\n\n            <Form.Dropdown label= 'Status'\n              value= {filterStatus}\n              options= {[{ key:1,value:'approved',text:'Approved' }, { key:2,value:'pending',text:'Pending' },]}\n              onChange = {(e,{ value }) => setFilterStatus(value)}\n              placeholder='All'\n              clearable\n              selection\n              compact>\n\n            </Form.Dropdown >\n\n          </FormGroup>\n        </Form>\n      </Segment>\n    </>)\n\n\n\n\n\n}\nexport default TimeSheetsFilter","import { useQuery } from '@apollo/client'\nimport React, { useEffect, useState } from 'react'\nimport { Link, useLocation, useParams } from 'react-router-dom'\nimport  _  from 'lodash'\nimport { Table, TableHeader, TableRow, TableHeaderCell, TableBody, TableCell, Loader } from 'semantic-ui-react'\nimport { formatDate, getWeekNumber,getMonthInt, getFilterYear } from '../../utils/DateHelper'\nimport TimeSheet from '../StaffPage/TimeSheet'\nimport { GET_ALL_TIMESHEETS } from '../../queries/timeSheetQuery'\nimport TimeSheetsFilter from './TimeSheetsFilter'\n\nconst TimeSheetsOverview = ({ setStaffName  }) => {\n  const today = new Date()\n  const params = useParams()\n  const location = useLocation()\n  const basePage =  location.pathname.split('/')[2]\n\n  const [filter,setFilter] = useState({\n    staff:[],\n    period:'date',\n    from:formatDate(new Date(today.getFullYear(), today.getMonth() -3, 1 )).split(' ')[0],\n    to:formatDate(today).split(' ')[0],\n    number:getWeekNumber(today),\n    groupBy:'week',\n    stations:[],\n    filterStatus: '' })\n\n  const variables  = { ...filter }\n\n  if(filter.staff.length === 1){\n    variables.staffId = filter.staff[0]\n  }\n\n  variables.year = getFilterYear(filter.period, filter.number)\n\n  const { loading,data } = useQuery(GET_ALL_TIMESHEETS,{ variables: variables,skip: params.period })\n\n  useEffect (() => {\n    if(data ){\n      setStaffName(data.getStaffName)\n    }\n  },[data, setStaffName])\n\n\n  if(params.period) {\n    const periodTitle = params.period.split(' ')\n    let period\n    let selected\n    let selectedYear\n    if(periodTitle[0] === 'Week'){\n      period='week'\n      selected = periodTitle[1]\n      selectedYear = periodTitle[2]\n    }\n    else{\n      period='month'\n      selected = getMonthInt(periodTitle[0])\n      selectedYear = periodTitle[1]\n    }\n\n    return <TimeSheet period= {period} selected={parseInt(selected)} selectedYear={parseInt(selectedYear) } staffId={params.staffId } setStaffName={setStaffName} timesheetOnly />\n  }\n\n  return (\n\n    <>\n      <TimeSheetsFilter setFilter= {setFilter}></TimeSheetsFilter>\n\n      <Loader active={loading}> Loading TimeSheet Overview</Loader>\n\n      <Table >\n        <TableHeader>\n          <TableRow>\n            {!params.staffId && basePage.toLowerCase() !== 'mypage' &&\n            <TableHeaderCell>Staff Name</TableHeaderCell>\n            }\n            <TableHeaderCell>Period</TableHeaderCell>\n            <TableHeaderCell> Stations</TableHeaderCell>\n            <TableHeaderCell> Total Hours</TableHeaderCell>\n            <TableHeaderCell> Status</TableHeaderCell>\n          </TableRow>\n        </TableHeader>\n        <TableBody>\n          {data && data.getAllTimeSheets && _.map(data.getAllTimeSheets, (staffs,period) =>\n            _.map(staffs,(staff,id) =>\n              <TableRow key={id} positive= {staff.itemsPending?false:true} negative= {staff.itemsPending?true:false}>\n                {!params.staffId   && basePage.toLowerCase() !== 'mypage' &&\n                <TableCell><Link to={`/Manage/ManageTimesheets/${id}`} onClick={() => {\n\n                }}> {staff.name}</Link></TableCell> }\n                <TableCell>{period}</TableCell>\n                <TableCell>{\n                  _.reduce(staff.station,(p,c,key) => {\n                    if(c !== 0){\n                      return ( (p?p+'/':'')+key)\n                    }\n                    return p\n\n                  },'')}\n                </TableCell>\n                <TableCell>{staff.totHours}</TableCell>\n                <TableCell><Link to={`${location.pathname}/${params.staffId?'':`${id}/`}${period}`}\n                  onClick={() => {\n\n                  }}>{staff.itemsPending ?  `${staff.itemsPending}  Items Pending`: 'All Approved' } </Link></TableCell>\n              </TableRow>)\n\n          )\n          }\n\n        </TableBody>\n      </Table>\n\n\n\n\n    </>)\n\n\n\n\n\n}\nexport default TimeSheetsOverview","import React, { useState } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { Breadcrumb } from 'semantic-ui-react'\nimport TimeSheetsOverview from '../TimeSheetsOverview'\n\nconst ManageTimeSheets = ({ setName , }) => {\n  const params = useParams()\n  const [staffName, setStaffName ] = useState('')\n\n  return <>\n    { /** If current page is not timesheetsoverview then show breadcrumbs*/\n      !(params.page && params.page.toLowerCase() === 'timesheetsoverview') &&\n      <>\n        <Breadcrumb>\n          { /**If currentpage is overview page of a staff or period is set on params */\n            (params.staffId) &&\n            <>\n              <Breadcrumb.Section link as = {Link} to = {'/Manage/ManageTimesheets'}> Manage Timesheets </Breadcrumb.Section>\n              <Breadcrumb.Divider/>\n              <Breadcrumb.Section active = {params.period? false: true}  as={params.period?  Link: ''} to={`/Manage/ManageTimesheets/${params.staffId}`}> {staffName } </Breadcrumb.Section>\n            </>\n          }\n          {params.period && <>\n            <Breadcrumb.Divider icon='right chevron'/>\n            <Breadcrumb.Section active>{params.period.replace('_',' ')}</Breadcrumb.Section>\n          </>}\n        </Breadcrumb>\n      </>\n    }\n\n    <TimeSheetsOverview setStaffName= { setName || setStaffName } ></TimeSheetsOverview>\n  </>\n\n}\nexport default ManageTimeSheets","import { useMutation } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Button, Form, Header, Segment } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { RESET_PASSWORD } from '../../mutations/staffMutation'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nconst PasswordResetPage = () => {\n  const[,dispatch] = useContext(NotificationContext)\n  const params= useParams()\n  const history = useHistory()\n\n  sessionStorage.removeItem('staffKey') //Logout any logged in staff\n\n  const [resetPassword,{ loading }] = useMutation(RESET_PASSWORD,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content:'Success, password reset. you can now login',type: 'SUCCESS' } })\n      history.push('/staffLogin')\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, password reset failed '}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n\n  if(!params.resetCode){\n    return <Header>Reset code mising or invalid</Header>\n  }\n\n  const initVal = {\n    password:'',\n    confirmPassword:''\n  }\n\n  return(\n    <Segment basic loading ={loading}>\n      <Formik\n        initialValues = { initVal }\n        validate= {(values) =>\n        {\n          const errors = {}\n          if(!values.password || values.password.trim() === '') {\n            errors.password = 'Password is required'\n          }\n\n          if(values.password !== values.confirmPassword){\n            errors.confirmPassword = 'New password and confirm password must match'\n          }\n\n          return errors\n        }\n\n        }\n        onSubmit= {(values) => {\n\n          resetPassword({ variables:{ resetCode: params.resetCode, password: values.password } })\n\n\n        }}\n      >\n        {({ handleSubmit,dirty ,errors }) => <Form style={{ marginBottom:'5rem' }} onSubmit= {handleSubmit}>\n          <Segment>\n            <InputField name='password' label='New Password' type='password' width='8'/>\n\n            <InputField name='confirmPassword' label='Confirm Password' type='password' width='8'/>\n\n            <Button disabled = {!( dirty && _.isEmpty(errors)) } type='submit' style={{ marginTop: '1rem' }} positive>Reset</Button>\n\n          </Segment>\n\n\n        </Form>\n        }\n      </Formik>\n    </Segment>\n\n  )\n}\nexport default PasswordResetPage","import { gql } from '@apollo/client'\n\nexport const CHANGE_PERMISSION = gql`\nmutation changePermission( $id: String! $staff: JsonObject, $station: JsonObject, $timesheet: JsonObject ,$admin: Boolean){\n  changePermission(\n    id: $id\n    staff: $staff\n    station: $station\n    timesheet: $timesheet\n    admin: $admin\n    ){\n      id\n      staff\n      station\n      timesheet\n      admin\n    }\n}`","import { useMutation, useQuery } from '@apollo/client'\nimport React, { Fragment, useContext, useEffect, useState } from 'react'\nimport { Button, Checkbox, Form, Header,Message,Table, TableBody } from 'semantic-ui-react'\nimport _ from 'lodash'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nimport { FieldArray, Formik } from 'formik'\nimport { CHANGE_PERMISSION } from '../../mutations/permissionMutation'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\n\nconst PermissionManager = ({ permissions }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const [options,setOptions] = useState([]) // List permitted stations\n  const staff =  JSON.parse(sessionStorage.getItem('staffKey'))\n  const [superUserSet,setSuperUserSet] = useState((permissions && permissions.admin )|| false) //If the staff is assigned admin permission\n\n  const hasSuperPermission = staff.permission.admin\n\n  // console.log(hasSuperPermission,staff ,superUserSet)\n  const [updatePermission,{ loading: pLoading }] = useMutation(CHANGE_PERMISSION,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, permission changed' ,type: 'SUCCESS' } })\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to change permission'}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n\n  const mapPermission = (permssionType) => permssionType && permssionType.map(v => {\n    if(!v) return null\n    return v._id\n  })\n\n  /**Generates station option based on user permission\n   * User can only assign permsission if the user have rights for the station\n   */\n\n  const hasPermission = (permissions) => {\n    if(hasSuperPermission){\n      return true\n    }\n    if((typeof permissions === 'object' )) {\n      if(!_.isEmpty(permissions)){\n        return true\n      }\n    }  else if(permissions){\n      return true\n    }\n    return false\n  }\n\n  const permission = _.mapValues(permissions,(v,k) => {\n    if(typeof v === 'object'){\n      const mod = { ...v }\n      if(k==='station'){\n        mod.edit = mapPermission (mod.edit )\n\n      }\n\n      if(k==='timesheet'){\n        mod.view = mapPermission (mod.view )\n        mod.sign = mapPermission (mod.sign)\n\n      }\n      return mod\n\n    }\n    else return v\n\n  })\n\n  const { loading,data } = useQuery(ALL_STATION,{ skip: !hasSuperPermission })\n  useEffect(() => {\n    if(data){\n      const stations = data.allStations\n      const stationOptions = stations.map((station,index) => {\n        return { key:index, value: station.id, text: station.location }\n      })\n      setOptions(stationOptions)\n    }\n  },[data])\n\n\n\n  const getStationOptions = (fieldName) => {\n    if (hasSuperPermission) {\n      return options\n    }\n    /**Set return station options based on users current permitted station  */\n    let soptions = []\n    switch (fieldName){\n    case 'station.edit':\n      if(staff.permission.station.edit.length ) {\n        soptions= staff.permission.station.edit.map((v,i) => {\n          return { key:i, value: v._id, text: v.location }\n        })\n\n      }\n      return soptions\n\n    case 'timesheet.view':\n      if(staff.permission.timesheet.view.length ) {\n        soptions = staff.permission.timesheet.view.map((v,i) => {\n          return { key:i, value: v._id, text: v.location }\n        })\n\n      }\n      return  soptions\n    case 'timesheet.sign':\n      if(staff.permission.timesheet.sign.length ) {\n        soptions =  staff.permission.timesheet.sign.map((v,i) => {\n          return { key:i, value: v._id, text: v.location }\n        })\n      }\n      return soptions\n\n    default:\n      return soptions\n\n    }\n\n  }\n\n  const allStationIds =  options.map(station => station.value)\n\n  return (\n    <Formik\n      enableReinitialize\n      initialValues = {{ ...permission }}\n      onSubmit= { (values ) => {\n        const formValues = { ...values }\n\n        if(!formValues.admin) {\n          _.reduce(values,(prev,cur,scope) =>\n          {\n            if(permission[scope] && _.isEqual(permission[scope] , formValues[scope] )){\n              delete formValues[scope]\n\n            }\n            if(permission[scope] && !_.isEqual( permission[scope] ,formValues[scope] )){\n              _.reduce(formValues[scope],(prev,cur,pType) => {\n                if( _.isEqual(permissions[scope][pType],formValues[scope][pType] )){\n                  delete formValues[scope][pType]\n                }\n              },{})\n\n            }\n          },{})\n          updatePermission({ variables: { ...formValues,id: permissions.id } })\n        }\n        else{\n\n          updatePermission({ variables: { admin:true,id: permissions.id } })\n        }\n\n\n      }\n\n      }\n\n    >\n      {({ setFieldValue,values,handleSubmit,dirty,resetForm }) => <>\n        <Header as ='h3'>Permission</Header>\n        <Checkbox\n          label = 'Administrator (All Permissions for all stations)'\n          disabled = { !hasSuperPermission}\n          toggle\n          name= 'admin'\n          checked = {values.admin}\n          onChange= {(e,{ checked }) => {\n            setFieldValue('admin',checked)\n            setSuperUserSet(checked)\n\n            /**If superUser is set then set all permission fileds  */\n            if(checked) {\n              setFieldValue('station.edit',allStationIds)\n              setFieldValue('station.add',true)\n              setFieldValue('timesheet.view',allStationIds)\n              setFieldValue('timesheet.sign',allStationIds)\n              setFieldValue('staff.edit',true)\n              setFieldValue('staff.add',true)\n              setFieldValue('staff.view',true)\n\n            }\n          }}/>\n\n        {\n          dirty && <Message warning >Remember to save the changes for changes to take effect </Message>\n        }\n\n\n\n        <Form as='table' loading={loading || pLoading} className='ui celled padded table' onSubmit={handleSubmit}>\n          <Table.Header>\n            <Table.Row>\n              <Table.HeaderCell>\n          Scope\n              </Table.HeaderCell>\n              <Table.HeaderCell>\n          Edit\n              </Table.HeaderCell>\n              <Table.HeaderCell>\n          Add\n              </Table.HeaderCell>\n              <Table.HeaderCell>\n          View\n              </Table.HeaderCell>\n              <Table.HeaderCell>\n          Sign\n              </Table.HeaderCell>\n            </Table.Row>\n          </Table.Header>\n          <TableBody>\n\n            {_.map(permissions,(val,key) => <Fragment key={key}>\n              {key !== '__typename' && key !== 'id' &&  key !== 'admin' &&\n              <FieldArray>\n                {() => <Table.Row key={key}>\n                  <Table.Cell>\n                    {key.toUpperCase()}\n                  </Table.Cell>\n                  {/**EDIT COLUMN */}\n                  <Table.Cell >\n                    {(key=== 'station') &&\n                    <DropDownField\n                      multiple\n                      selection\n                      options= {getStationOptions(`${key}.edit`)}\n                      placeholder = 'Add Stations'\n                      disabled = {loading || !hasPermission(staff.permission[key].edit) || superUserSet}\n                      loading= {loading}\n                      name={`${key}.edit`}\n                    />}\n\n                    {key === 'staff'?\n                      <Checkbox\n                        disabled = {  !hasPermission(staff.permission[key].edit) || superUserSet}\n                        toggle name={`${key}.edit` }\n                        checked = {values[`${key}`].edit }\n                        onChange= {(e,{ checked }) => {\n                          setFieldValue(`${key}.edit`,checked)\n\n                          /** If edit is enabled then user must have view permission */\n                          if(checked) {\n                            setFieldValue(`${key}.view`,checked)\n                          }\n\n                        }}/> : ''\n                    }\n                  </Table.Cell >\n\n                  {/**ADD COLUMN */}\n                  {<Table.Cell >\n                    {key!== 'timesheet' &&\n                    <Checkbox\n                      toggle\n                      disabled = {  !hasPermission(staff.permission[key].add) || superUserSet}\n                      name={`${key}.add`}\n                      checked = {values[`${key}`].add }\n                      onChange= {(e,{ checked }) => {\n                        setFieldValue(`${key}.add`,checked)\n                        if(key === 'staff' && checked){\n                          /**If staff has add permission then must have view permission by default */\n                          setFieldValue(`${key}.view`,true)\n                        }\n                      }}/>}\n\n                  </Table.Cell>}\n\n                  {/**VIEW COLUMN */}\n                  <Table.Cell  >\n                    {key === 'staff' &&\n                     <Checkbox\n                       disabled = {  !hasPermission(staff.permission[key].view) || superUserSet }\n                       toggle\n                       name={`${key}.view` }\n                       checked = {values[`${key}`].view }\n                       onChange= {(e,{ checked }) => {\n                       /** If edit is enabled then user must have view permission */\n                         if(values.staff.edit || values.staff.add ){\n                           setFieldValue(`${key}.view`,true)\n                         }else{\n                           setFieldValue(`${key}.view`,checked)\n                         }\n                       }}/>\n                    }\n\n                    {key === 'timesheet' &&\n                     <DropDownField\n                       multiple\n                       selection\n                       options={getStationOptions(`${key}.view`)}\n                       placeholder = 'Add Stations'\n                       disabled = {loading  ||  !hasPermission(staff.permission[key].view) || superUserSet}\n                       loading= {loading}\n                       name={`${key}.view`}\n                       onChange = {(e,{ value }) => {\n                         /**If user has permission to sign the station timesheet then user must have permission to view the timesheet for that station as well */\n                         const newViewValues  = [...new Set([...values.timesheet.sign, ...value])]\n                         setFieldValue(`${key}.view`,newViewValues)\n                       }}\n                     />\n                    }\n\n                  </Table.Cell>\n\n                  {/**SIGN COLUMN */}\n                  <Table.Cell disabled = {key !== 'timesheet'}>\n                    {key === 'timesheet' &&\n                    <DropDownField\n                      multiple\n                      selection\n                      name={`${key}.sign`}\n                      options={getStationOptions(`${key}.sign`)}\n                      placeholder = 'Add Stations'\n                      disabled = {loading ||  !hasPermission(staff.permission[key].sign) || superUserSet}\n                      onChange = {(e,{ value }) => {\n                        setFieldValue(`${key}.sign`,value)\n                        /**If user has permission to sign the station timesheet then user must have permission to view the timesheet for that station as well */\n                        const newViewValues  = [...new Set([...values.timesheet.view, ...value])]\n                        setFieldValue(`${key}.view`,newViewValues)\n                      }}\n                      loading= {loading}\n\n                    />\n                    }\n                  </Table.Cell>\n                </Table.Row>}\n\n              </FieldArray>\n              }</Fragment>\n            )\n            }\n\n          </TableBody>\n        </Form>\n        {dirty &&\n        <>\n          <Button positive onClick = {() => handleSubmit()}> Save Changes</Button>\n          <Button  negative onClick = {() => resetForm()}> Discard Changes</Button>\n        </>\n        }</>\n      }\n    </Formik>\n\n  )\n\n}\n\nexport default PermissionManager","import { useMutation } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext } from 'react'\nimport { Button, Dimmer, Form, Grid, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { STAFF_EDIT } from '../../mutations/staffMutation'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { validateEmail } from '../StationReportPage/NewReportForm/validator'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nconst StaffEditModel = (props) => {\n  const [,dispatch] = useContext(NotificationContext)\n\n  const [updateStaff,{ loading: updateStaffLoading }] = useMutation(STAFF_EDIT,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, staff information saved' ,type: 'SUCCESS' } })\n      props.setOpen(false)\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to save edited information'}<br/> {err.message}</> ,type: 'ERROR' } })\n      props.setOpen(false)\n    }\n  })\n\n\n  const initVal = { email: props.email,\n    phone: props.phone || '',\n    contractType: props.contractType,\n    contractHours: props.reqHours,\n    position: props.position || '',\n  }\n  return(\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {props.open}\n      onClose= {() =>  props.setOpen(false)}\n      onOpen= {() => props.setOpen (true)}\n    >\n      <ModalHeader>Editing Staff {props.name} </ModalHeader>\n      <ModalContent>\n\n        {updateStaffLoading &&\n            <Dimmer active>\n              <Loader />\n            </Dimmer>\n        }\n\n        <Formik\n          initialValues = { initVal }\n          validate= {(values) =>\n          {\n            const errors = {}\n            if(/[a-z]/i.test(values.phone)){\n              errors.phone='Phone number cannot contain alphabets '\n            }\n            if(values.phone && values.phone.length < 8){\n              errors.phone='Phone number should be at least 8 charter long '\n            }\n            if(validateEmail(values.email)){\n              errors.email ='Invalid Email'\n            }\n            if(isNaN(values.contractHours)){\n              errors.contractHours ='Contract Hours must be number'\n            }\n            return errors\n          }}\n\n          onSubmit= {(values) => {\n            const updatedValues = _.omitBy(values, (v,k) => initVal[k] === v )\n\n            updateStaff({ variables:{ ...updatedValues,id:props.id } })\n          }}\n        >\n          {({ values,handleSubmit,setFieldValue,dirty,errors }) => <Form style={{ marginBottom:'5rem' }} onSubmit= {handleSubmit}>\n            <Grid>\n              <Grid.Row>\n                <InputField name='email' label='Email' type='email'/>\n              </Grid.Row>\n              <Grid.Row>\n                <InputField name='phone' label='Phone' type='tel'/>\n\n              </Grid.Row>\n              <Grid.Row>\n                <DropDownField  name='contractType' labeled label='Contract'\n                  selection\n                  options= {[{\n                    key:1, value:'Contractor', text: 'Contractor' },\n                  { key:2, value:'Employee', text: 'Employee' }]}></DropDownField>\n\n\n              </Grid.Row>\n              <Grid.Row>\n                <InputField name='contractHours' label='Required Hours per day'/>\n\n              </Grid.Row>\n              <Grid.Row>\n                <InputField name='position' label='Position'/>\n              </Grid.Row>\n            </Grid>\n            {dirty &&\n            <Button type='submit' floated='right' positive>Save</Button>}\n\n          </Form>\n          }\n        </Formik></ModalContent>\n    </Modal>\n\n  )\n}\n\nexport default StaffEditModel","import { useMutation } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext } from 'react'\nimport { Button, Dimmer, Form, Grid, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { CHANGE_PASSWORD } from '../../mutations/staffMutation'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nconst PasswordChangeModel = (props) => {\n\n  const [,dispatch] = useContext(NotificationContext)\n  const [changePassword,{ loading }] = useMutation(CHANGE_PASSWORD,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, password cahanged' ,type: 'SUCCESS' } })\n      props.setOpen(false)\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to change password'}<br/> {err.message}</> ,type: 'ERROR' } })\n      props.setOpen(false)\n    }\n  })\n\n\n  const initVal = {\n    password:'',\n    newPassword:'',\n    confirmPassword:''\n  }\n\n  return(\n    <Modal\n      closeIcon\n      closeOnEscape={false}\n      closeOnDimmerClick={false}\n      open = {props.open}\n      onClose= {() =>  props.setOpen(false)}\n      onOpen= {() => props.setOpen (true)}\n    >\n      <ModalHeader>Password Change</ModalHeader>\n      <ModalContent>\n\n        {loading &&\n            <Dimmer active>\n              Updating Password\n              <Loader />\n            </Dimmer>\n        }\n\n        <Formik\n          initialValues = { initVal }\n          validate= {(values) =>\n          {\n            const errors = {}\n            if(!values.password){\n              errors.password = 'Old Password is required'\n            }\n\n            if(values.newPassword === values.password){\n              errors.newPassword = 'New password cannot be same as old password'\n            }\n\n            if(!values.newPassword ){\n              errors.newPassword = 'New password cannot be empty'\n            }\n\n            if(values.newPassword !== values.confirmPassword){\n              errors.confirmPassword = 'New password and confirm password must match'\n            }\n            return errors\n          }\n\n          }\n          onSubmit= {(values) => {\n            changePassword({ variables:{ id:props.id,password: values.password, newPassword: values.newPassword } })\n\n          }}\n        >\n          {({ handleSubmit,dirty ,errors }) => <Form style={{ marginBottom:'5rem' }} onSubmit= {handleSubmit}>\n            <Grid>\n              <Grid.Row>\n                <InputField name='password' label='Old Password' type='password'/>\n              </Grid.Row>\n              <Grid.Row>\n                <InputField name='newPassword' label='New Password' type='password'/>\n\n              </Grid.Row>\n              <Grid.Row>\n                <InputField name='confirmPassword' label='Confirm Password' type='password'/>\n              </Grid.Row>\n            </Grid>\n            {dirty && _.isEmpty(errors) &&\n            <Button type='submit' style={{ marginTop: '1rem' }} positive>Change Password</Button>}\n\n          </Form>\n          }\n        </Formik></ModalContent>\n    </Modal>\n\n  )\n}\n\nexport default PasswordChangeModel","import { useMutation, useQuery } from '@apollo/client'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { Button, Confirm, Grid,Header,Icon,Loader, Table, TableBody } from 'semantic-ui-react'\nimport { GET_STAFF } from '../../queries/staffQuery'\nimport PermissionManager from './PermissionManager'\nimport StaffEditModel from './StaffEditModel'\nimport {  RESET_PASSWORD_REQ, RESET_REGISTER_CODE } from '../../mutations/staffMutation'\nimport PasswordChangeModel from './PasswordChangeModel'\nimport { useParams } from 'react-router-dom'\nimport { formatDate } from '../../utils/DateHelper'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\n\nconst Profile = (props) => {\n  const[,dispatch]= useContext(NotificationContext)\n  const params = useParams()\n\n  const [confirm,setConfirm] = useState({ open:false, handleCancel:() => {}, handleConfirm:() => {} })\n\n  const [passwordChangeOpen,setPasswordChangeOpen] = useState(false)\n  const staff =  JSON.parse(sessionStorage.getItem('staffKey'))\n\n  /**Staff can edit if staff has edit or admin  permission and not own profile */\n  let staffId = staff.id\n\n  if(props.id){\n    staffId= props.id\n  } else if(params.staffId) {\n    staffId= params.staffId\n  }else {\n    staffId= staff.id\n  }\n\n\n  const { loading,error,data } = useQuery(GET_STAFF,{ variables:{ id:staffId ,withPermission: props.staffCanEdit || false  } })\n\n\n\n  const [resetPassword,{ loading: rpLoading }] = useMutation(RESET_PASSWORD_REQ,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, password reset code sent to users email' ,type: 'SUCCESS' } })\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to reset'}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n  const [resetRegisterCode,{ loading: rcLoading }] = useMutation(RESET_REGISTER_CODE,{\n    onCompleted: () => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: 'Success, new register code sent to users email' ,type: 'SUCCESS' } })\n    },\n\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to send new register code'}<br/> {err.message}</> ,type: 'ERROR' } })\n    }\n  })\n\n\n  const resetConfirm = () => {\n    setConfirm(({ open:false, handleCancel:() => {}, handleConfirm:() => {}  }))\n  }\n\n  useEffect(() => {\n    if(data && props.setStaffName)\n      props.setStaffName(data.getStaff.name)\n\n  },[data, props])\n\n\n  if (loading) {\n    return (\n      <Loader active>Fetching User Profile</Loader>\n    )\n  }\n\n  if (error) {\n    return (\n      <Header as ='h5'>Something Went Wrong, Please try again</Header>\n    )\n  }\n\n  /**If the user has completed registration\n   * Registered user should have regiserCode empty\n  */\n\n  const registered =  data && data.getStaff.registerCode ? false: true\n\n  return (<>\n\n    <Grid columns='3' style={{ marginTop:'1rem' }}>\n      <Grid.Row centered  textAlign='center'>\n        <Grid.Column>\n          <Header as ='h4'>Basic Info</Header>\n          <Table compact>\n            <TableBody>\n              <Table.Row>\n                <Table.Cell width='8'> <strong> Id Card Saved </strong> </Table.Cell>\n                <Table.Cell width='7'>{data.getStaff.idCardCode ?\n                  <Icon name='checkmark' color='green'></Icon> : <Icon name='cancel' color='red'></Icon> }</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell width='8'> <strong> Registration Complete</strong> </Table.Cell>\n                <Table.Cell width='7'>{registered ?\n                  <Icon name='checkmark' color='green'></Icon> : <Icon name='cancel' color='red'></Icon> }</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell> <strong> Email </strong> </Table.Cell>\n                <Table.Cell > {data.getStaff.email}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell> <strong> Phone </strong> </Table.Cell>\n                <Table.Cell > {data.getStaff.phone}</Table.Cell>\n              </Table.Row>\n              { registered &&\n              <Table.Row>\n                <Table.Cell> <strong> Username </strong> </Table.Cell>\n                <Table.Cell> {data.getStaff.username}</Table.Cell>\n              </Table.Row>}\n            </TableBody>\n            <Table.Footer>\n              {(props.staffCanEdit || staff.id === data.getStaff.id) &&\n              <Table.Row>\n                <Table.HeaderCell >\n                  <Button\n                    primary\n                    size='small'\n                  >\n                 Scan Id Card\n                  </Button>\n                </Table.HeaderCell>\n                <Table.HeaderCell >\n                  <Button\n                    loading = {rpLoading || rcLoading}\n                    disabled =  {rpLoading || rcLoading}\n                    primary\n                    size='small'\n                    onClick = { (e,{ children }) => {\n\n                      switch( children ){\n                      case 'Change Password':\n                        setPasswordChangeOpen(true)\n                        break\n                      case 'Reset Password':\n                        setConfirm({\n                          open:true,\n                          handleConfirm: () => {\n                            resetPassword({ variables:{ id:data.getStaff.id } })\n                            resetConfirm()\n                          },\n                          handleCancel:() => {\n                            resetConfirm()\n                          },\n                          content: 'Confirm Reset Password',\n                          header:'Confirm'\n                        })\n                        break\n                      case 'Resend Register Link':\n                        setConfirm({\n                          open:true,\n                          handleConfirm: () => {\n                            resetRegisterCode({ variables:{ id:data.getStaff.id } })\n                            resetConfirm()\n                          },\n                          handleCancel:() => {\n                            resetConfirm()\n                          },\n                          content: 'Confirm Reset Registration Link',\n                          header:'Confirm'\n                        })\n                        break\n                      default:\n                        break\n                      }\n                    }\n\n                    }\n                  >\n                    {registered\n                      ?staff.id === data.getStaff.id\n                        ? 'Change Password'\n                        : props.staffCanEdit?  'Reset Password':''\n                      :'Resend Register Link'}\n                  </Button>\n                </Table.HeaderCell>\n              </Table.Row>}\n            </Table.Footer>\n\n          </Table>\n        </Grid.Column>\n        <Grid.Column>\n          <Header as ='h4'>Contract</Header>\n          <Table compact>\n            <TableBody>\n              <Table.Row>\n                <Table.Cell> <strong> Type </strong> </Table.Cell>\n                <Table.Cell>{data && data.getStaff.contractType }</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell> <strong> Required Hrs/Day </strong> </Table.Cell>\n                <Table.Cell > {data && data.getStaff.reqHours}</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell> <strong> Position </strong> </Table.Cell>\n                <Table.Cell> {data && data.getStaff.position}</Table.Cell>\n              </Table.Row>\n            </TableBody>\n\n\n          </Table>\n        </Grid.Column>\n        <Grid.Column>\n          <Header as ='h4'>Last Active</Header>\n          <Table compact>\n            <TableBody>\n              <Table.Row>\n                <Table.Cell> <strong> Station </strong> </Table.Cell>\n                <Table.Cell>{ data && data.getStaff.lastActive &&  data.getStaff.lastActive.station && data.getStaff.lastActive.station.location }</Table.Cell>\n              </Table.Row>\n              <Table.Row>\n                <Table.Cell> <strong> Active at </strong> </Table.Cell>\n                <Table.Cell > {data && data.getStaff.lastActive && formatDate(data.getStaff.lastActive.activeAt) }</Table.Cell>\n              </Table.Row>\n            </TableBody>\n\n          </Table>\n        </Grid.Column>\n\n      </Grid.Row>\n      {props.staffCanEdit &&\n      <Grid.Row > <Grid.Column><PermissionManager permissions= {data.getStaff.permission}></PermissionManager> </Grid.Column>  </Grid.Row>}\n\n      <StaffEditModel\n        open={props.editModelOpen}\n        setOpen= {props.setEditModelOpen}\n        email = {data.getStaff.email}\n        phone =  {data.getStaff.phone}\n        contractType ={data.getStaff.contractType}\n        reqHours =  {data.getStaff.reqHours}\n        position = {data.getStaff.position}\n        id= {data.getStaff.id}\n      ></StaffEditModel>\n\n      <PasswordChangeModel\n        open = {passwordChangeOpen}\n        setOpen = {setPasswordChangeOpen}\n        id= {data.getStaff.id }\n      ></PasswordChangeModel>\n\n\n      <Confirm\n        open={confirm.open}\n        content = {confirm.content}\n        header = {confirm.header}\n        onCancel={confirm.handleCancel}\n        onConfirm={confirm.handleConfirm}\n      />\n\n    </Grid>\n  </>\n\n\n\n\n  )\n}\n\n\n\n\n\nexport default Profile","import { useLazyQuery, useMutation, useQuery } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Button, Form, Header, Icon, Input, Label,  Message, Segment } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { COMPLETE_REGISTRATION } from '../../mutations/staffMutation'\nimport { GET_STAFF_REG,VERIFY_USERNAME } from '../../queries/staffQuery'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nconst RegisterPage = ({ setName }) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const params= useParams()\n  const history = useHistory()\n\n  const { loading,error,data } = useQuery(GET_STAFF_REG, { variables: { registerCode: params.registerCode }, skip: !params.registerCode  })\n  const [completeRegistration,{ loading:regstrationLoading,data:registrationData }] = useMutation(COMPLETE_REGISTRATION,{\n    onError: (err) => {\n      dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{'Error, failed to register'}<br/> {err.message}</> ,type: 'ERROR' }\n      })}\n  })\n  const [validateUsernameQuery,{ loading:usernameLoading,data:usernameData }] = useLazyQuery(VERIFY_USERNAME)\n  const [usernameVerified,setUsernameVerified] = useState({ verified:false })\n\n\n  useEffect(() => {\n    if(usernameData){\n\n      setUsernameVerified({ verified:true,status:usernameData.verifyUsername.status })\n      //setFieldError('username','This is a error')\n    }\n\n  }, [usernameData])\n\n  if(!params.registerCode){\n    return <Header>Registration code mising or invalid</Header>\n  }\n\n  if(registrationData && registrationData.registerStaff.status === 'SUCCESS'){\n    history.push('/staff')\n    return null\n  }\n\n  if(data && data.getStaff){\n    setName(data.getStaff.name)\n  }\n\n\n  const initVal = {\n    password:'',\n    username:'',\n    confirmPassword:''\n  }\n\n  const validateUsername =(value) => {\n    validateUsernameQuery({ variables:{ username:value } })\n\n  }\n\n\n  return(\n    <Segment basic loading ={loading || regstrationLoading}>\n      <Message success={data && data.getStaff} error={error?true:false}>\n        <Message.Header>\n          {data && data.getStaff && 'Please complete registration by setting  your username and password'}\n          {error && error.message}\n          {(data && !data.getStaff) && 'Registration code Invalid'}\n        </Message.Header>\n      </Message>\n\n      { data && data.getStaff &&\n      <Formik\n        initialValues = { initVal }\n        validate= {(values) =>\n        {\n          const errors = {}\n\n          if(!values.username || values.username.trim() === ''){\n            errors.username = 'Username is required'\n          }\n\n          if(values.username && values.username.length < 4){\n            errors.username = 'Username should be at least 4 character long'\n          }\n          if(!values.password || values.password.trim() === '') {\n            errors.password = 'Password is required'\n          }\n\n          if(values.password !== values.confirmPassword){\n            errors.confirmPassword = 'New password and confirm password must match'\n          }\n\n          return errors\n        }\n\n        }\n        onSubmit= {(values) => {\n\n          completeRegistration({ variables:{ registerCode: params.registerCode, password: values.password ,username: values.username } })\n\n\n        }}\n      >\n        {({ values,handleChange, handleSubmit,dirty ,errors, handleBlur, touched }) => <Form style={{ marginBottom:'5rem' }} onSubmit= {handleSubmit}>\n\n          <Form.Field width='8'>\n            <Input\n              loading={usernameLoading}\n              icon= {<Icon name= {errors.username === undefined && usernameVerified.verified?(usernameVerified.status==='SUCCESS'?'check circle':'cancel'):''} color={usernameVerified.verified?usernameVerified.status==='SUCCESS'?'green':'red':'red'} />}\n              onBlur= {handleBlur}\n              name='username' label='Username' width='8' onChange = {e => {\n              // call the built-in onchange\n                handleChange(e)\n                let username = e.currentTarget.value\n                validateUsername(username)\n              }}/>\n\n            { ((errors.username && touched.username) ||  (errors.username === undefined && usernameVerified.verified && usernameVerified.status!=='SUCCESS')) &&\n           <Label pointing prompt>\n             { errors.username || 'Selected username already taken, please select new username' }\n           </Label>}\n          </Form.Field>\n\n\n\n\n          <InputField name='password' label='Password' type='password' width='8'/>\n\n          <InputField name='confirmPassword' label='Confirm Password' type='password' width='8'/>\n\n\n          <Button disabled = {!( dirty && _.isEmpty(errors) && usernameVerified.verified && usernameVerified.status ==='SUCCESS') }type='submit' style={{ marginTop: '1rem' }} positive>Register</Button>\n\n        </Form>\n        }\n      </Formik>}\n    </Segment>\n\n  )\n}\nexport default RegisterPage","import React from 'react'\r\nimport { Dropdown, Menu } from 'semantic-ui-react'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\n\r\n\r\nconst StaffMenuBar = ({ staffName, activeItem, setActiveItem }) => {\r\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\r\n  const history = useHistory()\r\n\r\n  const location = useLocation()\r\n\r\n  if(location.pathname.split('/')[1].toLowerCase() === 'register'){\r\n    return (\r\n\r\n      <Menu inverted color=\"blue\" stackable >\r\n        <Menu.Item position='right'>\r\n          Welcome {staffName}\r\n        </Menu.Item>\r\n      </Menu>\r\n    )\r\n\r\n  }\r\n\r\n\r\n  const handleMenuClick = (e, { name }) => {\r\n    setActiveItem( name )\r\n    if( ['Profile','Timesheets','TimesheetsOverview'].includes(name) ){\r\n      history.push(`/staff/${staff.id}/${name}`)\r\n    }else{\r\n      history.push(`/${name}`)\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    sessionStorage.removeItem('staffKey')\r\n    history.push('/staffLogin')\r\n  }\r\n\r\n  const menuItems = []\r\n\r\n\r\n  const cornerButton = () => {\r\n    return (\r\n      <Dropdown item text = {`Welcome ${staff.name}` } >\r\n        <Dropdown.Menu>\r\n          <Dropdown.Item text='Logout' onClick={() => logout()}/>\r\n        </Dropdown.Menu>\r\n      </Dropdown>\r\n    )\r\n  }\r\n\r\n  /** Add Items to Menu*/\r\n  if (menuItems.length === 0) {\r\n    menuItems.push('Timesheets')\r\n    menuItems.push('TimesheetsOverview')\r\n    menuItems.push('Profile')\r\n  }\r\n\r\n\r\n  const getMenuItems = () => {\r\n    return menuItems.map(item =>\r\n      <Menu.Item  key={ item} name = {item} active = {activeItem ===  item }\r\n        onClick = {handleMenuClick} />)\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <Menu inverted color=\"blue\" stackable >\r\n\r\n      {getMenuItems()}\r\n      <Menu.Menu position='right'>\r\n        {cornerButton()}\r\n      </Menu.Menu>\r\n    </Menu>\r\n\r\n\r\n\r\n\r\n  )\r\n\r\n\r\n}\r\n\r\nexport default StaffMenuBar","import React, { useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport { Menu } from 'semantic-ui-react'\n\nconst StaffSubMenu = ({  activeItem, setActiveItem ,staffName, staffId ,staffCanEdit ,setEditModelOpen }) => {\n  const loggedInStaffPermissions = JSON.parse( sessionStorage.getItem('staffKey')).permission\n  const history = useHistory()\n  useEffect(() => {\n    setActiveItem('')\n    return () => setActiveItem('')\n  },[setActiveItem])\n  return (\n    <Menu pointing secondary >\n      <Menu.Item header>{staffName}</Menu.Item>\n      <Menu.Item\n        position='right'\n        name='Profile'\n        active = {activeItem === 'Profile'}\n        onClick={() => {\n          setActiveItem('Profile')\n          history.push(`/Manage/AllStaffs/${staffId}/Profile`)\n        }}\n      />\n\n      {(loggedInStaffPermissions.admin || loggedInStaffPermissions.timesheet.view.length || loggedInStaffPermissions.timesheet.sign.length) === true  &&\n        <>\n          <Menu.Item\n            name='Timesheets'\n            active = {activeItem === 'Timesheets'}\n            onClick={() => {\n              setActiveItem('Timesheets')\n              history.push(`/Manage/AllStaffs/${staffId}/Timesheets`)\n            }}\n          />\n\n\n          <Menu.Item\n            name='TimesheetsOverview'\n            active = {activeItem === 'TimesheetsOverview'}\n            onClick={() => {\n              setActiveItem('TimesheetsOverview')\n              history.push(`/Manage/AllStaffs/${staffId}/TimesheetsOverview`)\n\n\n            }}\n          />\n        </>}\n      {staffCanEdit &&<Menu.Item\n        position='right'\n        name='EditProfile'\n        icon = 'edit'\n        onClick={(e) => {\n          e.preventDefault()\n          history.push('Profile')\n          setActiveItem('Profile')\n          setEditModelOpen(true)\n        }}\n      />}\n\n    </Menu>\n\n  )}\n\nexport default StaffSubMenu","import React,{ useEffect, useState } from 'react'\nimport { Link, useHistory, useLocation, useParams } from 'react-router-dom'\nimport { Breadcrumb, BreadcrumbDivider, BreadcrumbSection } from 'semantic-ui-react'\nimport ManageTimeSheets from '../AdminPages/ManageTimeSheets'\nimport PasswordResetPage from './PasswordResetPage'\nimport Profile from './Profile'\nimport RegisterPage from './RegisterPage'\nimport StaffMenuBar from './StaffMenuBar'\nimport StaffSubMenu from './StaffSubMenu'\nimport TimeSheet from './TimeSheet'\n/**\n * Staff page component\n * Can receive staffName as props  if props not set then retrives staffId from url nad fetches name\n * @param props {staffName,id}\n */\nconst StaffPage = ({ name ,id }) => {\n\n  const params = useParams()\n\n  let staffId = params && params.staffId\n  let page = params && params.page\n  const location = useLocation()\n  const history = useHistory()\n  const [staffName, setStaffName] = useState(name)\n\n  const [editModelOpen,setEditModelOpen] = useState(false)\n  const [activeItem, setActiveItem] = useState(page )\n  const [subMenuActiveItem, setSubMenuActiveItem] = useState(page || 'Profile')\n\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\n\n  const [loggedInStaffName, setLoggedInStaffName] = useState(staff && staff.name)\n\n  const locationPaths = location.pathname.split('/')\n\n  useEffect(() => {\n    setActiveItem(page)\n    setSubMenuActiveItem(page)\n  },[page])\n\n  /**If the user is trying to register via registration link  */\n  if(locationPaths[1].toLowerCase() === 'register'){\n    page = 'register'\n    return<>\n      <StaffMenuBar staffName = {loggedInStaffName} activeItem= {activeItem} setActiveItem={setActiveItem}></StaffMenuBar>\n      <RegisterPage setName={setLoggedInStaffName}></RegisterPage></>\n  }\n\n  if(locationPaths[1].toLowerCase() === 'reset-password'){\n    page = 'reset-password'\n    return<>\n      <PasswordResetPage></PasswordResetPage></>\n  }\n\n\n  /**If user is not logged in and is not requesting to register or reset password  */\n  if(!staff && !( page === 'register' || page === 'reset-password')){\n    history.push('/staffLogin')\n    return null\n  }\n\n\n  const staffCanEdit  = (staff.id !== staffId && staffId !== undefined)  && ((staff.permission && staff.permission.staff.edit) ||  staff.permission.admin || false)\n  const staffHasMangeRights =  staff.permission && (\n    staff.permission.admin ||\n    staff.permission.station.edit.length > 0 ||\n      staff.permission.station.add ||\n      staff.permission.staff.view ||\n      staff.permission.staff.add ||\n      staff.permission.staff.edit ||\n      staff.permission.timesheet.view.length > 0\n  )\n\n  /**If id is passed as props then use that as staffId*/\n  if(id){\n    staffId= id\n  }\n  /**If the url have staff Id */\n  else if(params.staffId) {\n    staffId= params.staffId\n  }\n  /**staff is loggedIn user */\n  else {\n    staffId= staff.id\n  }\n\n  const basePage =  locationPaths[1] //root page\n  if(staff.id !== staffId && basePage.toLocaleLowerCase() === 'staff' ){ //if user is not same as logged in user then redirect to manage page\n    history.push(`/Manage/AllStaffs/${staffId}/${activeItem}`)\n  }\n\n  if(staffHasMangeRights && basePage.toLowerCase() !== 'manage' ){ // if user has manage rights then redirect to manage page\n    history.push('/Manage/MyPage/Profile')\n  }\n\n  /**\n   * Set bredcrumbs for diffent view based on root page\n   */\n\n  const getBreadCrumb = () => {\n\n    return(\n      <>\n        <Breadcrumb>\n          { staff.id === staffId &&\n            <>\n              <BreadcrumbSection> My Page </BreadcrumbSection>\n              <BreadcrumbDivider/>\n            </>\n          }\n          {\n            staff.id !== staffId &&\n            <>\n              <BreadcrumbSection link as = {Link} to = {`/${basePage}/${locationPaths[2]}`}> {locationPaths[2]} </BreadcrumbSection>\n              <BreadcrumbDivider/>\n              <BreadcrumbSection link as={Link} to={`/${basePage}/${locationPaths[2]}/${locationPaths[3]}/Profile`}> {staffName || staffId} </BreadcrumbSection>\n              <BreadcrumbDivider/>\n\n            </>\n          }\n          {\n            page && page.toLowerCase()=== 'timesheetsoverview'  && params.period ?\n              <>\n                <BreadcrumbSection link as={Link}\n                  to={\n                    locationPaths.reduce ((p,c,i) => {\n                      if(i === locationPaths.length -1 || c === ''){\n                        return p\n                      }\n                      return p+'/'+c\n                    })}\n                  active> {subMenuActiveItem} </BreadcrumbSection>\n                <BreadcrumbDivider icon='right chevron'/>\n                <BreadcrumbSection active>{params.period.replace('_',' ')}</BreadcrumbSection>\n              </>:\n              <BreadcrumbSection active> {subMenuActiveItem} </BreadcrumbSection>\n          }\n\n        </Breadcrumb>\n      </>\n    )\n  }\n\n  return (\n    <>\n      {!staffHasMangeRights  && <StaffMenuBar staffName = {loggedInStaffName} activeItem= {activeItem} setActiveItem={setActiveItem}></StaffMenuBar> }\n      {getBreadCrumb()}\n\n      {staffId !== staff.id  && //If admin user is browsing staff\n      <StaffSubMenu\n        activeItem= {subMenuActiveItem}\n        setActiveItem = {setSubMenuActiveItem}\n        staffName= {staffName} staffId={staffId}\n        staffCanEdit={staffCanEdit}\n        setEditModelOpen = {setEditModelOpen}/>\n      }\n\n      { /**If submenu is timesheets  Or current page is timesheet */\n        ((subMenuActiveItem &&subMenuActiveItem.toLocaleLowerCase() === 'timesheets' )|| (activeItem && activeItem.toLowerCase() === 'timesheets')) && <>\n          <TimeSheet staffId ={staffId} setStaffName={setStaffName} />\n        </>\n      }\n      {/**If submenu is profile Or current page is profile */\n        ((subMenuActiveItem && subMenuActiveItem.toLocaleLowerCase() === 'profile' ) || ( activeItem && activeItem.toLowerCase() === 'profile') )&&\n        <>\n          <Profile id={staffId} staffCanEdit={staffCanEdit} setEditModelOpen={setEditModelOpen} editModelOpen={editModelOpen} setStaffName={setStaffName}/>\n        </>\n      }\n      {/**If submenu is timesheetsoverview  current page is managetimesheets or  timesheetsoverview*/\n        ((subMenuActiveItem && subMenuActiveItem.toLocaleLowerCase() === 'timesheetsoverview' ) || (activeItem && ( activeItem.toLowerCase() === 'timesheetsoverview'))) &&\n        <>\n          <ManageTimeSheets setName={setStaffName}></ManageTimeSheets>\n        </>\n      }\n    </>\n  )\n}\n\nexport default StaffPage","import { useMutation } from '@apollo/client'\nimport { Formik } from 'formik'\nimport _ from 'lodash'\nimport React, { useContext } from 'react'\nimport { Button, Dimmer, Form, Grid, Icon, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { STAFF_ADD } from '../../mutations/staffMutation'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { validateEmail, validateName } from '../StationReportPage/NewReportForm/validator'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nconst NewStaffModel = (props) => {\n  const [,dispatch]= useContext(NotificationContext)\n\n  const [addStaffMutation,{ loading }] = useMutation(STAFF_ADD)\n\n  const addStaff = (values) => {\n    addStaffMutation({\n      variables: values,\n      update: (store,response) => {\n        store.modify({\n          fields:{\n            allStaff(existingStaffRefs , { readField }){\n              const newStaff = response.data.addStaff\n              if(existingStaffRefs.some(ref => readField('id',ref) === newStaff.id)){\n                return existingStaffRefs\n              }\n              return [...existingStaffRefs,newStaff]\n\n            }\n          }\n\n        })\n      }\n    }).then(\n      () =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, new staff ${values.name} created` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot create new staff  staff ${values.name}`}<br/> {err.message}</> ,type: 'ERROR' } }),\n      props.setOpen(false)\n    )\n\n  }\n  const initVal = {\n    name: '',\n    email: '',\n    phone: '',\n    contractType: '',\n    contractHours: '',\n    position: '',\n  }\n  return(\n    <Formik\n      initialValues = { initVal }\n      onSubmit= {(values) => {\n        addStaff(values)\n      }}\n      validate = {(values) => {\n        let errors = {}\n\n        errors.name = validateName(values.name)\n        errors.email = validateEmail(values.email)\n\n        if(_.isEmpty(errors.name)) delete errors.name\n        if(_.isEmpty(errors.email)) delete errors.email\n\n        if(!values.contractType ){\n          errors.contractType = 'Please select contract type'\n        }\n\n        if(!values.contractHours || !parseFloat(values.contractHours) ){\n          errors.contractHours = 'Invalid contract hours'\n        }\n\n        return errors\n\n      }}\n    >\n      {({ handleSubmit,setFieldValue,dirty }) =>\n        <Modal\n          closeIcon\n          closeOnEscape={false}\n          closeOnDimmerClick={false}\n          open = {props.open}\n          onClose= {() =>  props.setOpen(false)}\n          onOpen= {() => props.setOpen (true)}\n        >\n          <ModalHeader>New Staff {props.name} </ModalHeader>\n          <ModalContent>\n\n            { loading &&\n            <Dimmer active>\n              <Loader />\n            </Dimmer>\n            }\n\n\n            <Form style={{ marginBottom:'5rem' }}>\n              <Grid>\n                <Grid.Row>\n                  <InputField name='name' label='Name' type='text' width='8'/>\n                </Grid.Row>\n                <Grid.Row>\n                  <InputField name='email' label='Email' type='email'  width='8'/>\n                </Grid.Row>\n                <Grid.Row>\n                  <InputField name='phone' label='Phone' type='tel'  width='8'/>\n\n                </Grid.Row>\n                <Grid.Row>\n                  <DropDownField  name='contractType' labeled label='Contract'\n                    selection\n                    width='8'\n                    options= {[{\n                      key:1, value:'Contractor', text: 'Contractor' },\n                    { key:2, value:'Employee', text: 'Employee' }]}\n                    onChange = {  (e,{ value }) => {\n                      setFieldValue('contractType',value)\n                    }}\n                  >\n\n                  </DropDownField>\n\n\n                </Grid.Row>\n                <Grid.Row>\n                  <InputField name='contractHours' label='Required Hours per day' type='number'  width='8'/>\n\n                </Grid.Row>\n                <Grid.Row>\n                  <InputField name='position' label='Position' width='8'/>\n                </Grid.Row>\n                <Grid.Row>\n                  <Form.Button icon type='button'  labelPosition='right' primary><Icon size='big' name='barcode'/>Link Id card</Form.Button>\n                </Grid.Row>\n              </Grid>\n            </Form>\n          </ModalContent>\n          <Modal.Actions>\n            <Button   negative onClick={() => props.setOpen (false)}>Cancel</Button>\n            {dirty &&\n            <Button  positive onClick= {() => handleSubmit()}>Save</Button>}\n          </Modal.Actions>\n        </Modal>\n      }\n    </Formik>\n\n  )\n}\n\nexport default NewStaffModel","import React, { useState,useEffect, useContext } from 'react'\nimport { useMutation, useQuery } from '@apollo/client'\nimport { GET_ALL_STAFF } from '../../queries/staffQuery'\nimport { Segment, Loader, Table, TableHeaderCell, TableRow, TableCell, Button, Icon, Input, Form, Checkbox } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\nimport NewStaffModel from './NewStaffModal'\nimport { formatDate } from '../../utils/DateHelper'\nimport { DELETE_STAFF, SET_STAFF_STATUS } from '../../mutations/staffMutation'\nimport ConfirmModal from '../ConfirmModal'\nimport { NotificationContext } from '../../contexts/NotificationContext'\n\n\nconst AllStaffs = () => {\n  const[,dispatch] = useContext(NotificationContext)\n  const { loading,error,data } = useQuery(GET_ALL_STAFF)\n  const  [staffsData,setStaffsData]  = useState([])\n  const [staffAddOpen,setStaffAddOpen ]= useState(false)\n  const [confirmModalOpen, setConfirmModalOpen] = useState(false)\n  const [confirm,setConfirm] = useState({ title:'', fn:() => {} })\n\n  const loggedInstaff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const [deleteStaff] = useMutation(DELETE_STAFF)\n  const [toggleStaffStatus] = useMutation ( SET_STAFF_STATUS)\n\n\n  const staffDelete = (id,name) => {\n    deleteStaff({\n      variables: { id: id } ,\n      update: (store) => {\n        store.evict({\n          id: `Staff:${id}`\n        })\n      }\n    }).then(\n      () =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, staff ${name} deleted` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot delete staff ${name}`}<br/> {err.message}</> ,type: 'ERROR' } })\n    )\n  }\n\n  const staffToggle = (id, name, toggle) => {\n    toggleStaffStatus({\n      variables: { id:id , disabled: !toggle },\n      update: (store) => {\n        store.modify({\n          id: `Staff:${id}`,\n          fields:{\n            disabled(){\n              return !toggle\n            }\n          }\n        })\n      }\n    }).then(\n      () =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, staff ${name} set ${toggle?'active':'disabled'}` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot toggle status for  staff ${name}`}<br/> {err.message}</> ,type: 'ERROR' } })\n    )\n  }\n\n\n  useEffect  (() => {\n    if(data  && data.allStaff ){\n      setStaffsData(data.allStaff)\n    }\n  }, [data])\n\n  if(loading){\n    return (\n      <Loader active>Fetching Staffs</Loader>\n    )\n  }\n\n  if(error){\n    return <Segment >Something Went Wrong </Segment>\n  }\n\n\n\n\n  return (\n    <>\n      {(loggedInstaff.permission.staff.add || loggedInstaff.permission.admin ) ===true &&\n      <Button primary icon onClick= {() => setStaffAddOpen(true)}>Add New Staff <Icon name = 'add'> </Icon></Button>}\n      {\n        staffsData &&\n      <Input icon='search' placeholder='Search...'\n        onChange ={ (event,{ value }) => {\n          if(!value || value.trim() === ''){\n            setStaffsData(data.allStaff)\n          }else{\n            const filterData = staffsData.filter(staff => staff.name.includes(value) )\n            setStaffsData(filterData)\n          }\n\n\n        }}\n      />}\n      <Table>\n        <Table.Header>\n          <TableRow>\n            <TableHeaderCell> Name </TableHeaderCell>\n            <TableHeaderCell> Email </TableHeaderCell>\n            <TableHeaderCell> Phone </TableHeaderCell>\n            <TableHeaderCell> Last Active </TableHeaderCell>\n            <TableHeaderCell> Recent Station </TableHeaderCell>\n            <TableHeaderCell> Account Status </TableHeaderCell>\n            <TableHeaderCell> </TableHeaderCell>\n          </TableRow>\n        </Table.Header>\n        <Table.Body>\n          {staffsData && staffsData.map( staff =>\n            <Table.Row key= {staff.id}>\n              <TableCell><Link to={`/Manage/AllStaffs/${staff.id}/Profile`}>{staff.name}</Link></TableCell>\n              <TableCell>{staff.email}</TableCell>\n              <TableCell>{staff.phone}</TableCell>\n              <TableCell>{staff.lastActive && formatDate(staff.lastActive.activeAt) }</TableCell>\n              <TableCell>{staff.lastActive && staff.lastActive.station && staff.lastActive.station.location}</TableCell>\n              <TableCell>{staff.accountStatus}<Form.Field>\n\n                <Checkbox checked={!staff.disabled } toggle label={staff.disabled ?'Disabled': 'Active'} disabled = {staff.id === loggedInstaff.id || !(loggedInstaff.permission.staff.edit || loggedInstaff.permission.admin)}\n                  onChange ={(e,{ checked }) => {\n                    staffToggle( staff.id,staff.name,checked)\n                  }}/>\n              </Form.Field></TableCell>\n              <TableCell>\n                {staff.id !== loggedInstaff.id && (loggedInstaff.permission.staff.edit || loggedInstaff.permission.admin)  &&\n                <Button circular size ='mini' icon ='trash' negative disabled = {staff.id === loggedInstaff.id}\n                  onClick={() => {\n                    setConfirmModalOpen(true)\n                    setConfirm({ title:'Are you sure, you want to delete '+ staff.name +'?', fn: () => staffDelete(staff.id,staff.name) })\n                  }}\n                ></Button>}\n              </TableCell>\n            </Table.Row>\n          )}\n        </Table.Body>\n      </Table>\n      <NewStaffModel open={staffAddOpen} setOpen= {setStaffAddOpen}></NewStaffModel>\n      {confirmModalOpen &&\n        <ConfirmModal open= {confirmModalOpen} confirm= {confirm} setOpen= {setConfirmModalOpen} ></ConfirmModal>\n      }\n    </>\n\n  )\n}\n\nexport default AllStaffs","import { useMutation, useQuery } from '@apollo/client'\nimport { FieldArray, Formik } from 'formik'\nimport { forEach } from 'lodash'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { Button, Dimmer, Form, Grid, Header, Icon, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { ADD_STATION } from '../../mutations/stationMutation'\nimport { ALL_COSTUMERS } from '../../queries/costumerQuey'\nimport { InputField, TimeInputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { validateEmail } from '../StationReportPage/NewReportForm/validator'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nconst NewStationModel = (props) => {\n\n  const [,dispatch] = useContext(NotificationContext)\n  const [addStationMutation,{ loading }] = useMutation(ADD_STATION)\n  const [countryList,setCountryList]=  useState([])\n  const [costumerList,setCostumerList] = useState([])\n\n  const { loading: costumerLoading } = useQuery(ALL_COSTUMERS, { onCompleted : (data) => {\n    if(data.allCostumers){\n      const costumerOptions =data.allCostumers.map((costumer,index) => {\n        return { key:index, value: costumer.id, text: costumer.name }\n      } )\n      setCostumerList(costumerOptions)\n    }\n  } })\n\n  useEffect(() => {\n    const fetchCountries = async () => {\n      const response = await fetch('https://restcountries.eu/rest/v2/?fields=name;alpha2Code;')\n      const countries = await response.json()\n      const countryArray = countries.map((country,index) => {\n        const exclude = ['aq','bq','cw','gg','im','je','xk','bl','mf','sx','ss']\n        if(exclude.includes(country.alpha2Code.toLowerCase())){ //exclusdw coutry codes have no flags defined on semntic ui so return without flag\n          return { key:index, value: country.name, text:  country.name  }\n        }\n        return { key:index, value: country.name, text:  country.name ,flag: country.alpha2Code.toLowerCase() }\n      })\n      setCountryList(countryArray)\n    }\n\n    fetchCountries()\n  },[])\n\n  const addStation = (values) => {\n    addStationMutation({\n      variables: values,\n      update: (store,{ data:{ addStation } }) => {\n        store.modify({\n          fields:{\n            allStations(existingStationRefs , { readField }){\n              const newStation = addStation\n              if(existingStationRefs.some(ref => readField('id',ref) === newStation.id)){\n                return existingStationRefs\n              }\n              const update = { ...values,id: newStation.id }\n              return [...existingStationRefs,update]\n\n            }\n          }\n\n        })\n        /**Add station information to each added costumer on cache */\n        forEach(values.costumers, costumer => {\n          store.modify({\n            id: `Costumer:${costumer}`,\n            fields:{\n              stations(existingStationRefs, { readField }) {\n                if(existingStationRefs.some(ref => readField('id',ref) === addStation.id)){\n                  return existingStationRefs\n                }\n                return [...existingStationRefs, { '__ref':`Station:${addStation.id}` }]\n              }\n            }\n          })\n        })\n\n\n      }\n    }).then(\n      () =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, ${values.location} added to station list` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, ${values.location} cannot be added to station list`}<br/> {err.message}</> ,type: 'ERROR' } }),\n      props.setOpen(false),\n    )\n  }\n\n\n  const initVal = {\n    location: '',\n    address:{\n      street:'',\n      postcode:'',\n      city:'',\n      country:''\n    },\n    email: '',\n    phone: '',\n    costumers:[],\n    shifts:[{ name:'',startTime:'' }],\n    stationKey:'',\n    stationKeyConfirm:''\n  }\n  return(\n    <Formik\n      initialValues = { initVal }\n      onSubmit= {(values) => {\n        addStation(values)\n      }}\n      validate = {(values) => {\n        let errors = {}\n\n        if(!values.location || (values.location && values.location.length < 3)){\n          errors.location= 'Location is required and must be at least 3 charcter long'\n        }\n\n        if( !values.address.street || (values.address.street && values.address.street.length < 3) ){\n\n          errors.address = { ...errors.address, street: 'Street is required and must be at least 3 charcter long' }\n        }\n\n        if( !values.address.city ){\n          errors.address= { ...errors.address, city: 'City is required and must be at least 3 charcter long' }\n        }\n\n        if( !values.address.country ){\n          errors.address = { ...errors.address,country:'Country is required' }\n        }\n        if( !values.email  || validateEmail(values.email)){\n          errors.email = 'Email is required and must be valid'\n        }\n\n        if(values.shifts.length){\n          forEach(values.shifts, (shift,index) => {\n            if(!shift.name){\n              if (!errors.shifts) errors.shifts=[]\n              if (!errors.shifts[index] ) errors.shifts[index] = {}\n              errors.shifts[index].name = 'Please provide shift name'\n            }\n\n            if(!shift.startTime){\n              if (!errors.shifts) errors.shifts=[]\n              if (!errors.shifts[index] ) errors.shifts[index] = {}\n\n              errors.shifts[index].startTime = 'Shift start time is required'\n            }\n\n            if(shift.startTime){\n              if(!shift.startTime.match(/^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$/)){\n                if (!errors.shifts) errors.shifts=[]\n                if (!errors.shifts[index] ) errors.shifts[index] = {}\n\n                errors.shifts[index].startTime = 'Shift start should be on format HH:mm'\n              }\n            }\n\n          }\n          )\n        }\n\n\n        if( !values.stationKey || (values.stationKey && values.stationKey.length < 8)){\n          errors.stationKey = 'Station key is required and should be at least 8 charter long'\n        }\n        if( values.stationKeyConfirm !== values.stationKey){\n          errors.stationKeyConfirm = 'Station key confirm mismatch'\n        }\n\n        return errors\n\n      }}\n    >\n      {({ values,handleSubmit,setFieldValue,dirty }) =>\n        <Modal\n          closeIcon\n          closeOnEscape={false}\n          closeOnDimmerClick={false}\n          open = {props.open }\n          onClose= {() =>  props.setOpen(false)}\n          onOpen= {() => props.setOpen (true)}\n        >\n          <ModalHeader>New Station {props.name} </ModalHeader>\n          <ModalContent>\n\n            { loading &&\n            <Dimmer active>\n              <Loader />\n            </Dimmer>\n            }\n\n\n            <Form style={{ marginBottom:'5rem' }} autoComplete=\"off\">\n              <Grid padded >\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='location' label='Location' type='text' width='8' placeholder='Location identifier ex: Airport code'/>\n                </Grid.Row>\n                <Grid.Row style={{ paddingTop:3 }}>\n                  <DropDownField  name='address.country' labeled label='Country'\n                    placeholder='Select Country'\n                    search\n                    selection\n                    width='8'\n                    options= {countryList}\n                    onChange = {  (e,{ value }) => {\n                      setFieldValue('address.country',value)\n                    }}\n                  >\n\n                  </DropDownField>\n\n                </Grid.Row>\n                <Grid.Row><Header as ='h3'>Address</Header></Grid.Row>\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='address.street' label='Street' type='text' width='8'/>\n                </Grid.Row>\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='address.postcode' label='postcode' type='text' width='8'/>\n                </Grid.Row>\n                <Grid.Row style={{ paddingTop:0 }}>\n                  <InputField name='address.city' label='city' type='text' width='8'/>\n                </Grid.Row>\n\n                <Grid.Row><Header as ='h3'>Contact Information</Header></Grid.Row>\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='email' label='Email' type='email'  width='8'/>\n                </Grid.Row>\n                <Grid.Row style={{ paddingTop:0 }}>\n                  <InputField name='phone' label='Phone' type='tel'  width='8'/>\n                </Grid.Row>\n\n                <Grid.Row ><Header as ='h3'>Working Shift</Header></Grid.Row>\n                <FieldArray  name={'shifts'}>\n                  {({ push,remove }) => (<>\n                    { values.shifts.length > 0 && values.shifts.map((shift,index) =>\n                      <Grid.Row columns='2' key ={index} style={{ padding:0 }}>\n\n                        <InputField name={`shifts[${index}].name`} label='Name' width='5' />\n                        <TimeInputField name={`shifts[${index}].startTime`} label placeholder='Start Time' ></TimeInputField>\n                        {index !== 0 &&\n                        <Icon\n                          link\n                          name =\"cancel\"\n                          color='red'\n                          onClick={ () => remove(index)\n                          }/>}\n\n                      </Grid.Row>\n                    )}\n                    <Button\n                      type='button'\n                      icon\n                      size ='mini'\n                      primary\n                      onClick={ () => push ({ name:'', startTime:'' })\n                      }>\n                      <Icon name=\"plus circle\"/> Add\n                    </Button>\n                  </>)}\n\n\n\n                </FieldArray>\n\n                <Grid.Row><Header as ='h3'>Costumers</Header></Grid.Row>\n                <DropDownField  name='costumers'\n                  placeholder='Select Costumers'\n                  multiple\n                  search\n                  selection\n                  width='8'\n                  loading= {costumerLoading}\n                  options= {costumerList}\n                  onChange = {  (e,{ value }) => {\n                    setFieldValue('costumers',value)\n                  }}\n                >\n\n                </DropDownField>\n                <Grid.Row><Header as ='h3'>Station Key</Header></Grid.Row>\n                <Grid.Row style={{ padding:0 }}> <InputField name='stationKey' type='password' width='8' placeholder='stationKey' /> </Grid.Row>\n                <Grid.Row style={{ padding:0 }}> <InputField name='stationKeyConfirm' type='password' width='8' placeholder='Confirm stationKey' /> </Grid.Row>\n\n\n              </Grid>\n            </Form>\n          </ModalContent>\n          <Modal.Actions>\n            <Button   negative onClick={() => props.setOpen (false)}>Cancel</Button>\n            {dirty &&\n            <Button  positive onClick= {() => handleSubmit()}>Save</Button>}\n          </Modal.Actions>\n        </Modal>\n      }\n    </Formik>\n\n  )\n}\n\nexport default NewStationModel","import React, { useState,useEffect } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { Segment, Loader, Table, TableHeaderCell, TableRow, TableCell, Button, Icon, Input, Flag } from 'semantic-ui-react'\nimport { Link } from 'react-router-dom'\nimport NewStationModel from './NewStationModal'\n\n\nconst AllStations = () => {\n  const { loading,error,data } = useQuery(ALL_STATION , { variables:{ detailed:true } })\n  const  [stationsData,setStationsData]  = useState([])\n  const [stationAddOpen,setStationAddOpen ]= useState(false)\n\n  useEffect  (() => {\n    if(data  && data.allStations ){\n      setStationsData(data.allStations)\n    }\n  }, [data])\n\n  if(loading){\n    return (\n      <Loader active>Fetching Staffs</Loader>\n    )\n  }\n\n  if(error){\n    return <Segment >Something Went Wrong </Segment>\n  }\n\n\n\n\n  return (\n    <>\n      <Button primary icon onClick= {() => setStationAddOpen(true)}>Add New Station <Icon name = 'add'> </Icon></Button>\n      {\n        stationsData &&\n      <Input icon='search'  placeholder='Country or location ...'\n        onChange ={ (event,{ value }) => {\n          if(!value || value.trim() === ''){\n            setStationsData(data.allStations)\n          }else{\n            const filterData = stationsData.filter(station => station.location.toLowerCase().includes(value.toLowerCase()) ||  station.address.country.toLowerCase().includes(value.toLowerCase()))\n            setStationsData(filterData)\n          }\n        }}\n      />}\n      <Table textAlign='center'>\n        <Table.Header>\n          <TableRow>\n            <TableHeaderCell> Location </TableHeaderCell>\n            <TableHeaderCell> Staff Count (Last 24 Hrs) </TableHeaderCell>\n            <TableHeaderCell> Address </TableHeaderCell>\n            <TableHeaderCell> Phone No. </TableHeaderCell>\n            <TableHeaderCell> Email </TableHeaderCell>\n          </TableRow>\n        </Table.Header>\n        <Table.Body>\n          {stationsData && stationsData.map( station =>\n            <Table.Row key= {station.id}>\n              <TableCell><Link to={`/Manage/AllStations/${station.id}`}>{station.location}</Link></TableCell>\n              <TableCell>{station.activeStaffs}</TableCell>\n              <TableCell>{<> {station.address.street} <br/>   {station.address.postcode} {station.address.city} <br/>  {station.address.country}    <Flag name={station.address && station.address.country && station.address.country.toLowerCase()}></Flag> </>}</TableCell>\n              <TableCell>{station.phone && station.phone.reduce((p,c) => <>{c}  <br/> {p}</> , '') } </TableCell>\n              <TableCell>{station.email}</TableCell>\n            </Table.Row>\n          )}\n        </Table.Body>\n      </Table>\n      {stationAddOpen &&\n        <NewStationModel open={stationAddOpen} setOpen= {setStationAddOpen}></NewStationModel>\n      }\n\n    </>\n\n  )\n}\n\nexport default AllStations","import React from 'react'\nimport { Dropdown, Menu } from 'semantic-ui-react'\nimport { useHistory } from 'react-router-dom'\n\n\nconst AdminMenuBar = ({  activeItem, setActiveItem }) => {\n  const staff = JSON.parse( sessionStorage.getItem('staffKey'))\n  const history = useHistory()\n  const handleMenuClick = (e, { name }) => {\n    setActiveItem( name )\n\n    if( ['Profile','Timesheets','TimesheetsOverview'].includes(name) ){ /** If user views personal pages */\n      history.push(`/Manage/MyPage/${name}`)\n    }else{\n      history.push(`/Manage/${name}`)\n    }\n  }\n\n  const logout = () => {\n    sessionStorage.removeItem('staffKey')\n    history.push('/staffLogin')\n  }\n\n  const menuItems = []\n\n  /**If user has some admin rights then add those items to menu and own profile options view will be on dropdown Button */\n  if(staff.permission.admin || staff.permission.station.edit.length > 0 || staff.permission.station.add){\n    menuItems.push ('AllStations')\n  }\n\n  if(staff.permission.admin || staff.permission.staff.view || staff.permission.staff.add  || staff.permission.staff.view || staff.permission.staff.edit){\n    menuItems.push ('AllStaffs')\n  }\n\n  if(staff.permission.admin || staff.permission.timesheet.view.length > 0){\n    menuItems.push ('ManageTimesheets')\n  }\n\n  if(staff.permission.admin){\n    menuItems.push ('Costumers')\n  }\n\n  if(staff.permission.admin || staff.permisison.station.edit.length){\n    menuItems.push ('ShiftReports')\n  }\n\n  const getMenuItems = () => {\n    return menuItems.map(item =>\n      <Menu.Item  key={ item} name = {item} active = {activeItem ===  item }\n        onClick = {handleMenuClick} />)\n  }\n\n\n  return (\n    <Menu inverted color=\"blue\" stackable >\n      {getMenuItems()}\n      <Menu.Menu position='right'>\n        <Dropdown item text = {`Welcome ${staff.name}` } >\n          <Dropdown.Menu>\n            {menuItems.length > 0 && <>\n              <Dropdown.Item disabled text='My Pages'  onClick = { handleMenuClick }/>\n              <Dropdown.Item name= 'Profile' text='Profile'  onClick = { handleMenuClick }/>\n              <Dropdown.Item name ='Timesheets' text='Timesheets'  onClick = { handleMenuClick }/>\n              <Dropdown.Item name = 'TimesheetsOverview' text='TimesheetsOverview'  onClick = { handleMenuClick }/>\n              <Dropdown.Divider/>\n            </>\n            }\n            <Dropdown.Item text='Logout' onClick={() => logout()}/>\n\n          </Dropdown.Menu>\n\n        </Dropdown>\n      </Menu.Menu>\n    </Menu>\n  )\n\n\n}\n\nexport default AdminMenuBar","import { useMutation, useLazyQuery, gql } from '@apollo/client'\nimport { FieldArray, Formik } from 'formik'\nimport { forEach } from 'lodash'\nimport React, { useContext, useEffect, useState } from 'react'\nimport { Button, Dimmer, Form, Grid, Header, Icon, Loader, Modal,ModalContent, ModalHeader } from 'semantic-ui-react'\nimport { NotificationContext } from '../../contexts/NotificationContext'\nimport { ADD_COSTUMER } from '../../mutations/costumerMutation'\nimport { VERIFY_REGISTRATION } from '../../queries/costumerQuey'\nimport { ALL_STATION } from '../../queries/stationQuery'\nimport { InputField } from '../StationReportPage/NewReportForm/FormFields'\nimport { validateEmail } from '../StationReportPage/NewReportForm/validator'\nimport { DropDownField } from '../TimeSheetsReport/TimeSheetEditFields'\nconst NewCostumerModel = (props) => {\n  const [,dispatch] = useContext(NotificationContext)\n  const [stationOptions,setStationOptions]=  useState([])\n\n  const[addCostumerMutation, { loading }] = useMutation(ADD_COSTUMER)\n\n  const [loadStations, { loading:stationLoading, data: stationData }] = useLazyQuery(ALL_STATION)\n\n  const [checkAircraftRegistration,{ loading:aircraftCheckLoading,data:aircraftCheckData }] = useLazyQuery(VERIFY_REGISTRATION)\n  const [duplicateAircraftError,setDuplicateAircraftError] = useState([])\n  useEffect(() => {\n    if(aircraftCheckData){\n      setDuplicateAircraftError(aircraftCheckData.verifyAircraftRegistration)\n    }\n  }, [aircraftCheckData,])\n\n\n  useEffect(() => {\n    if(stationData && stationData.allStations){\n      const stations =stationData.allStations.map((station,index) => {\n        return { key:index, value: station.id, text:station.location }\n      } )\n      setStationOptions(stations)\n    }\n\n  },[stationData])\n\n\n  const addCostumer = (values) => {\n    addCostumerMutation({\n      variables: values,\n      update: (store,{ data: { addCostumer } }) => {\n\n        forEach( addCostumer.stations, station => {\n          store.modify({\n            id: `Station:${station.id}`,\n            fields:{\n              costumers(existingCostumerRefs, { readField }) {\n                if(existingCostumerRefs.some(ref => readField('id',ref) === addCostumer.id)){\n                  return existingCostumerRefs\n                }\n                return [...existingCostumerRefs, { '__ref':`Station:${addCostumer.id}` }]\n              }\n            }\n          })\n\n        })\n\n        /**Append to costumers List */\n        store.modify({\n          fields:{\n            allCostumers(existingCostumersRefs = [] , { readField }){\n              const newCostumerRef  = store.writeFragment({\n                data: addCostumer,\n                fragment : gql `\n                  fragment NewCostumer on Costumer {\n                    name\n                    id\n                    contract\n                    aircrafts{\n                      id\n                      registration\n                    }\n                    stations{\n                      id\n                    }\n\n                  }   \n                `\n              })\n\n              if(existingCostumersRefs.some(ref => readField('id',ref) === addCostumer.id)){\n                return existingCostumersRefs\n              }\n              return [...existingCostumersRefs,newCostumerRef]\n            }\n          }\n        })\n\n      }\n    }).then(\n      () =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: `Success, costumer ${values.name} added` ,type: 'SUCCESS' } }),\n      err =>  dispatch({ type:'ADD_NOTIFICATION',  payload:{ content: <>{`Error, Cannot add costumer ${values.name}`}<br/> {err.message}</> ,type: 'ERROR' } }),\n      props.setOpen(false)\n    )\n  }\n\n  const initVal = {\n    name: '',\n    contract:'',\n    keyContacts: [],\n    stations:[],\n    aircrafts:'',\n\n  }\n  return(\n    <Formik\n      initialValues = { initVal }\n      onSubmit= {(values) => {\n\n        const submittedValues = { ...values , aircrafts: values.aircrafts ? values.aircrafts.toUpperCase().split(','):[] }\n        addCostumer(submittedValues)\n      }}\n      validate = {(values) => {\n        let errors = {}\n\n        if(!values.name || (values.name && values.name.length < 3)){\n          errors.name= 'Costumer Name is required and must be at least 3 charcter long'\n        }\n\n        if( !values.contract ){\n          errors.contract = 'Please specify contract type ex: Ad-HOC, LongTerm , Seasonal etc.'\n        }\n\n        if( values.aircrafts.length ){\n          if(!values.aircrafts.match(/^[a-zA-Z, ]+$/)){\n            errors.aircrafts = 'Invalid character detected, check again'\n          }\n\n          const errAircraft =[]\n          forEach(values.aircrafts.split(','), aircraft => {\n            if(aircraft.trim().length < 3) errAircraft.push(aircraft.trim().toUpperCase())\n          })\n          if (errAircraft.length ){\n            errors.aircrafts = `${errAircraft.toString()} invalid Aircraft Registration, should at least 3 characters`\n          }\n\n          /**If no any error then check if the registration is unique */\n          if(!errors.aircrafts){\n            checkAircraftRegistration({ variables:{ registrations: values.aircrafts } })\n            if(duplicateAircraftError.length){\n              errors.aircrafts = `Registration ${duplicateAircraftError.toString()} already exists.`\n            }\n          }\n\n        }else{\n          errors.aircrafts = 'Enter at least one Aircraft'\n        }\n\n        if(values.keyContacts.length){\n          forEach(values.keyContacts, (contact,index) => {\n            if(!contact.description){\n              if (!errors.keyContacts) errors.keyContacts=[]\n              if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n              errors.keyContacts[index].description = 'Please provide contact description'\n            }\n\n            if(!contact.phone && !contact.email){\n              if (!errors.keyContacts) errors.keyContacts=[]\n              if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n\n              errors.keyContacts[index].phone = 'At least a phone or a email is required'\n              errors.keyContacts[index].email = 'At least a phone or a email is required'\n            }\n\n            if(contact.email){\n              if(validateEmail(contact.email)){\n                if (!errors.keyContacts) errors.keyContacts=[]\n                if (!errors.keyContacts[index] ) errors.keyContacts[index] = {}\n                errors.keyContacts[index].email = 'Invalid Email'\n              }\n            }\n\n          }\n          )\n        }\n\n        return errors\n\n      }}\n    >\n      {({ values,handleSubmit,setFieldValue,dirty }) =>\n        <Modal\n          closeIcon\n          closeOnEscape={false}\n          closeOnDimmerClick={false}\n          open = {props.open}\n          onClose= {() =>  props.setOpen(false)}\n          onOpen= {() => props.setOpen (true)}\n        >\n          <ModalHeader>New Costumer </ModalHeader>\n          <ModalContent>\n\n            { loading &&\n            <Dimmer active>\n              <Loader />\n            </Dimmer>\n            }\n\n\n            <Form style={{ marginBottom:'5rem' }} autoComplete=\"off\"\n              onSubmit={(e) => {\n                e.preventDefault()\n                handleSubmit()\n              }\n              }>\n              <Grid padded >\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='name' label='Name' type='text' width='8' placeholder='Costumer Name'/>\n                </Grid.Row>\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='contract' label='Contract' type='text' width='8' placeholder='Ex: Ad-Hoc, Short-term , Long-term, Seasonal'/>\n                </Grid.Row>\n                <Grid.Row style={{ padding:0 }}>\n                  <InputField name='aircrafts' label='Aircrafts' type='text' width='8' placeholder='Aircrfat Registrations separeted by comma \",\"'/>\n                </Grid.Row>\n                <Grid.Row style={{ paddingTop:3 }}>\n                  <DropDownField  name='stations' labeled label='Station'\n                    placeholder='Select Stations'\n                    search\n                    loading={stationLoading}\n                    selection\n                    multiple\n                    width='8'\n                    options= {stationOptions}\n                    onFocus = {() => loadStations()}\n                    onChange = {  (e,{ value }) => {\n                      setFieldValue('stations',value)\n                    }}\n                  >\n                  </DropDownField>\n                </Grid.Row>\n\n\n                <Grid.Row><Header as ='h3'>Key Contacts</Header></Grid.Row>\n                <FieldArray  name={'keyContacts'}>\n                  {({ push,remove }) => (<>\n                    { values.keyContacts.length > 0 && values.keyContacts.map((contact,index) => <Grid.Row key ={index} style={{ padding:0 }}>\n                      <Form.Group style={{ margin:0 }} widths='13'><InputField name={`keyContacts[${index}].description`} label='Description' /><InputField name={`keyContacts[${index}].phone`} label='Phone' /><InputField name={`keyContacts[${index}].email`} label='Email' />\n                        <Icon\n                          link\n                          name =\"cancel\"\n                          color='red'\n                          onClick={ () => remove(index)\n                          }/>\n                      </Form.Group>\n                    </Grid.Row>\n                    )}\n                    <Button\n                      style= {{ marginTop:'1rem' }}\n                      type='button'\n                      icon\n                      size ='mini'\n                      primary\n                      onClick={ () => push ({ description:'',phone:'' ,email:'' })\n                      }>\n                      <Icon name=\"plus circle\"/> Add\n                    </Button>\n                  </>)}\n                </FieldArray>\n              </Grid>\n            </Form>\n          </ModalContent>\n          <Modal.Actions>\n            <Button   negative onClick={() => props.setOpen (false)}>Cancel</Button>\n            {dirty &&\n            <Button  loading = {aircraftCheckLoading} disabled={aircraftCheckLoading} positive onClick= {(e) => {\n              e.preventDefault()\n              handleSubmit()\n            }}>Save</Button>}\n          </Modal.Actions>\n        </Modal>\n      }\n    </Formik>\n\n  )\n}\n\nexport default NewCostumerModel","import { useQuery } from '@apollo/client'\nimport React, { useState } from 'react'\nimport { Link, useLocation } from 'react-router-dom'\nimport { Button, Card, Header, Icon, Loader, Segment } from 'semantic-ui-react'\nimport { ALL_COSTUMERS } from '../../queries/costumerQuey'\nimport NewCostumerModel from './NewCostumerModal'\n\n\nconst Costumers = () => {\n\n  const [costumerAddOpen,setCostumerAddOpen] = useState(false)\n  const { loading,error,data } = useQuery(ALL_COSTUMERS,{ variables: { detailed: true } })\n\n  const location = useLocation()\n\n  if(!data && !loading){\n    return null\n  }\n\n  if(loading){\n    return <Segment basic ><Loader active> Loading Costumer Data</Loader></Segment>\n  }\n\n  if(error){\n    return <Header as='h4'>Something went wrong</Header>\n  }\n\n  return (\n    <>\n      <Button primary icon style={{ marginBottom: '1rem' }} onClick= {() => setCostumerAddOpen(true)}><Icon name='add circle' />Add New Costumer</Button>\n      {\n        data && data.allCostumers.length> 0 &&\n    <Card.Group>\n      {\n        data.allCostumers.map(costumer =>\n          <Card key={costumer.id} link raised as={Link} to={`${location.pathname}/${costumer.id}`}>\n            <Card.Content textAlign='center' header = {costumer.name} />\n            <Card.Content textAlign='center' >{costumer.contract? costumer.contract + ' Contract':''}</Card.Content>\n            <Card.Content textAlign='center' extra>\n              <Header as ='h5'> <Icon name='plane'/> Total Aircrafts: {costumer.aircrafts && costumer.aircrafts.length}</Header>\n            </Card.Content>\n          </Card>\n        )}\n    </Card.Group>\n      }\n\n      {\n        !data.allCostumers &&\n    <Header as='h4'>No Costumer Data</Header>\n      }\n\n      {costumerAddOpen &&\n        <NewCostumerModel open={costumerAddOpen} setOpen= {setCostumerAddOpen}></NewCostumerModel>\n      }\n    </>\n  )\n\n\n\n}\n\nexport default Costumers","import React, { useEffect, useState } from 'react'\nimport { useLocation, useParams } from 'react-router-dom'\nimport StaffPage from '../StaffPage'\nimport AllStaffs from './AllStaffs'\nimport AllStations from './AllStations'\nimport StationInfo from '../StationInfo/Index'\nimport AdminMenuBar from './AdminMenuBar'\nimport ManageTimeSheets from './ManageTimeSheets'\nimport Costumers from './Costumers'\nimport CostumerInfo from '../CostumerInfo'\nimport ShiftReportsList from '../ShiftReportsList'\n//import AllStaffs from '../../AdminPages/AllStaffs'\n//import AllStations from '../../AdminPages/AllStations'\n\n//import TimeSheetsOverview from '../../TimeSheetsOverview'\n\n\nconst AdminPages = () => {\n  const params = useParams()\n  const location = useLocation()\n\n  const basePage =  location.pathname.split('/')[2] //root page\n\n  const [activeItem, setActiveItem] = useState(basePage)\n\n  useEffect(() => {\n    setActiveItem(basePage)}\n  ,[basePage, location, params])\n\n\n  return (\n    <>\n      <AdminMenuBar activeItem={activeItem} setActiveItem= {setActiveItem}></AdminMenuBar>\n      {/**If submenu is timesheetsoverview and staffId is set Or current page is managetimesheets or  timesheetsoverview*/\n        activeItem && activeItem.toLowerCase() === 'managetimesheets' &&\n        <ManageTimeSheets />\n      }\n\n      { /**If current page is shiftReports and staffId value is not set */\n        activeItem.toLowerCase() === 'shiftreports' &&\n      <>\n        <ShiftReportsList/>\n      </>\n      }\n\n      { /**If current page is allStaffs and staffId value is not set */\n        activeItem.toLowerCase() === 'mypage' &&\n      <>\n        <StaffPage />\n      </>\n      }\n      { /**If current page is allStaffs and staffId value is not set */\n        activeItem.toLowerCase() === 'allstaffs' && !params.staffId &&\n      <>\n        <AllStaffs/>\n      </>\n      }\n      { /**If current page is allStaffs and staffId value is set */\n        activeItem.toLowerCase() === 'allstaffs' && params.staffId &&\n      <>\n        <StaffPage id={params.staffId}/>\n      </>\n      }\n      { /**If current page is allStations and stationId value is not set */\n        activeItem && activeItem.toLowerCase() === 'allstations' && !params.stationId &&\n      <>\n        <AllStations/>\n      </>\n      }\n      { /**If current page is allStations and stationId value is set */\n        activeItem && activeItem.toLowerCase() === 'allstations' && params.stationId &&\n      <>\n        <StationInfo/>\n      </>\n      }\n      { /**If current page is allStations and stationId value is not set */\n        activeItem && activeItem.toLowerCase() === 'costumers' && !params.costumerId &&\n      <>\n        <Costumers/>\n      </>\n      }\n      { /**If current page is allStations and stationId value is set */\n        activeItem && activeItem.toLowerCase() === 'costumers' && params.costumerId &&\n      <>\n        <CostumerInfo/>\n      </>\n      }\n    </>\n  )\n}\n\nexport default AdminPages","import React from 'react'\nimport { BrowserRouter as  Router, Switch, Route, Redirect } from 'react-router-dom'\nimport StationLoginPage from './components/StationLoginPage'\nimport './App.css'\nimport StationReportPage from './components/StationReportPage'\nimport StaffLoginPage from './components/StaffLoginPage'\nimport StaffPage from './components/StaffPage'\nimport AdminPages from './components/AdminPages'\n\n\nconst  AppRouter = () =>   {\n  return (\n    <Router>\n      <Switch>\n        <Route path = {['/shiftReport/:station/:id','/shiftReport/:id']}>\n          <StationReportPage></StationReportPage>\n        </Route>\n\n        <Route path = \"/stationLogin\">\n          <StationLoginPage ></StationLoginPage>\n        </Route>\n\n        <Route path = \"/staffLogin\">\n          <StaffLoginPage />\n        </Route>\n\n        {/**Routing for nonAdmin staff Pages */}\n        <Route path ={[ '/staff/:staffId/:page/:period','/staff/:staffId/:page']}>\n          <StaffPage></StaffPage>\n        </Route>\n        <Redirect from=\"/staff/:staffId\" to=\"/staff/:staffId/Profile\"/>\n        <Route path = \"/staff\">\n          <StaffPage></StaffPage>\n        </Route>\n\n        {/**Routing for /Manage/MyPage */}\n        <Redirect from='/Manage/MyPage/:page/:id/:period' to=\"/Manage/MyPage/:page/:period\"/>\n\n        {/**Routing for /Manage/AllStaffs */}\n        <Route path = {['/Manage/AllStaffs/:staffId/:page/:period','/Manage/AllStaffs/:staffId/:page/', '/Manage/MyPage/:page/:period','/Manage/MyPage/:page/' ]}>\n          <AdminPages></AdminPages>\n        </Route>\n        <Redirect from=\"/Manage/AllStaffs/:staffId\" to=\"/Manage/AllStaffs/:staffId/Profile\"/>\n        <Route path = '/Manage/AllStaffs'>\n          <AdminPages></AdminPages>\n        </Route>\n\n        {/**Routing for /Manage/ManageTimesheets */}\n        <Route path = {['/Manage/ManageTimesheets/:staffId/:period','/Manage/ManageTimesheets/:staffId','/Manage/ManageTimesheets' ]}>\n          <AdminPages></AdminPages>\n        </Route>\n\n\n        {/** Routing for /Manage/AllStations */}\n        <Route path = {['/Manage/AllStations/:stationId/:page/:costumerId','/Manage/AllStations/:stationId/:page' ]}>\n          <AdminPages/>\n        </Route>\n        <Redirect from='/Manage/AllStations/:stationId' to='/Manage/AllStations/:stationId/BasicInfo'/>\n        <Route path = '/Manage/AllStations'>\n          <AdminPages/>\n        </Route>\n\n        {/**Routing for /Manage/Costumers */}\n        <Route path = {['/Manage/Costumers/:costumerId', '/Manage/Costumers']}>\n          <AdminPages/>\n        </Route>\n\n        {/**Routing for /Manage/ShiftReports */}\n        <Route path = {['/Manage/ShiftReports']}>\n          <AdminPages/>\n        </Route>\n\n        {/**Routing for Manage Page */}\n        <Redirect from=\"/Manage\" to=\"/Manage/MyPage/Profile\"/>\n        <Route path = '/Manage'>\n          <AdminPages></AdminPages>\n        </Route>\n\n        <Route path = \"/Register/:registerCode\">\n          <StaffPage></StaffPage>\n        </Route>\n\n        <Route path = \"/Reset-Password/:resetCode\">\n          <StaffPage></StaffPage>\n        </Route>\n\n        <Route path = \"/\">\n          <StationLoginPage ></StationLoginPage>\n        </Route>\n      </Switch>\n    </Router>\n\n\n  )\n}\n\nexport default AppRouter\n","import React from 'react'\nimport './App.css'\nimport AppRouter from './router'\nimport { NotificationProvider } from './contexts/NotificationContext'\n\n\nconst  App = () =>   {\n  return (\n    <NotificationProvider>\n      <AppRouter></AppRouter>\n    </NotificationProvider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport 'semantic-ui-css/semantic.min.css'\nimport { Container } from 'semantic-ui-react'\n\nimport { ApolloClient, HttpLink , InMemoryCache, ApolloProvider } from '@apollo/client'\n\nimport { setContext } from 'apollo-link-context'\n\nconst authLink = setContext((_, { headers }) => {\n  /**\n   * If the user is on staffs page session must have staffKey set , then set authorisation header to staffKey\n   */\n  let key = JSON.parse(sessionStorage.getItem('staffKey'))\n\n  /**If the staff page is not active then authorisation header is set to stationKey */\n  if(!key){\n    /**If the login info was saved preiously key will be set else retrive key from session*/\n    key =  JSON.parse(localStorage.getItem('stationKey'))\n    if(!key) {\n      key = JSON.parse(sessionStorage.getItem('stationKey'))\n    }\n  }\n\n  const token = key? key.value:null\n\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `bearer ${token}` : null,\n    }\n  }\n})\n\nconst httpLink = new HttpLink({ uri: window.location.href })\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache(),\n  link:  authLink.concat(httpLink)\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <Container><App /></Container>\n  </ApolloProvider>,\n  document.getElementById('root')\n)\n\n"],"sourceRoot":""}